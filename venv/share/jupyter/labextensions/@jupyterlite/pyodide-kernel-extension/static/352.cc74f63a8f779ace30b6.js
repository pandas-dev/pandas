/*! For license information please see 352.cc74f63a8f779ace30b6.js.LICENSE.txt */
(()=>{var __webpack_modules__={664:e=>{var t,n,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function r(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var o,l=[],c=!1,d=-1;function p(){c&&o&&(c=!1,o.length?l=o.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=r(p);c=!0;for(var t=l.length;t;){for(o=l,l=[];++d<t;)o&&o[d].run();d=-1,t=l.length}o=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new u(e,t)),1!==l.length||c||r(h)},u.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},352:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var process=__webpack_require__(664),_o=Object.create,Xn=Object.defineProperty,vo=Object.getOwnPropertyDescriptor,yo=Object.getOwnPropertyNames,wo=Object.getPrototypeOf,bo=Object.prototype.hasOwnProperty,et=(e,t)=>()=>(e&&(t=e(e=0)),t),E=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),So=(e,t)=>{for(var n in t)Xn(e,n,{get:t[n],enumerable:!0})},xo=(e,t,n,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of yo(t))!bo.call(e,s)&&s!==n&&Xn(e,s,{get:()=>t[s],enumerable:!(i=vo(t,s))||i.enumerable});return e},Me=(e,t,n)=>(n=null!=e?_o(wo(e)):{},xo(!t&&e&&e.__esModule?n:Xn(n,"default",{value:e,enumerable:!0}),e)),ei=E(((e,t)=>{var n,i;n=e,i=function(e){function t(e,t){let n=0;for(let i of e)if(!1===t(i,n++))return!1;return!0}var n;e.ArrayExt=void 0,function(e){function t(e,t,n=0,i=-1){let s,a=e.length;if(0===a)return-1;n=n<0?Math.max(0,n+a):Math.min(n,a-1),s=(i=i<0?Math.max(0,i+a):Math.min(i,a-1))<n?i+1+(a-n):i-n+1;for(let i=0;i<s;++i){let s=(n+i)%a;if(e[s]===t)return s}return-1}function n(e,t,n=-1,i=0){let s,a=e.length;if(0===a)return-1;s=(n=n<0?Math.max(0,n+a):Math.min(n,a-1))<(i=i<0?Math.max(0,i+a):Math.min(i,a-1))?n+1+(a-i):n-i+1;for(let i=0;i<s;++i){let s=(n-i+a)%a;if(e[s]===t)return s}return-1}function i(e,t,n=0,i=-1){let s,a=e.length;if(0===a)return-1;n=n<0?Math.max(0,n+a):Math.min(n,a-1),s=(i=i<0?Math.max(0,i+a):Math.min(i,a-1))<n?i+1+(a-n):i-n+1;for(let i=0;i<s;++i){let s=(n+i)%a;if(t(e[s],s))return s}return-1}function s(e,t,n=-1,i=0){let s,a=e.length;if(0===a)return-1;s=(n=n<0?Math.max(0,n+a):Math.min(n,a-1))<(i=i<0?Math.max(0,i+a):Math.min(i,a-1))?n+1+(a-i):n-i+1;for(let i=0;i<s;++i){let s=(n-i+a)%a;if(t(e[s],s))return s}return-1}function a(e,t=0,n=-1){let i=e.length;if(!(i<=1))for(t=t<0?Math.max(0,t+i):Math.min(t,i-1),n=n<0?Math.max(0,n+i):Math.min(n,i-1);t<n;){let i=e[t],s=e[n];e[t++]=s,e[n--]=i}}function r(e,t){let n=e.length;if(t<0&&(t+=n),t<0||t>=n)return;let i=e[t];for(let i=t+1;i<n;++i)e[i-1]=e[i];return e.length=n-1,i}e.firstIndexOf=t,e.lastIndexOf=n,e.findFirstIndex=i,e.findLastIndex=s,e.findFirstValue=function(e,t,n=0,s=-1){let a=i(e,t,n,s);return-1!==a?e[a]:void 0},e.findLastValue=function(e,t,n=-1,i=0){let a=s(e,t,n,i);return-1!==a?e[a]:void 0},e.lowerBound=function(e,t,n,i=0,s=-1){let a=e.length;if(0===a)return 0;let r=i=i<0?Math.max(0,i+a):Math.min(i,a-1),o=(s=s<0?Math.max(0,s+a):Math.min(s,a-1))-i+1;for(;o>0;){let i=o>>1,s=r+i;n(e[s],t)<0?(r=s+1,o-=i+1):o=i}return r},e.upperBound=function(e,t,n,i=0,s=-1){let a=e.length;if(0===a)return 0;let r=i=i<0?Math.max(0,i+a):Math.min(i,a-1),o=(s=s<0?Math.max(0,s+a):Math.min(s,a-1))-i+1;for(;o>0;){let i=o>>1,s=r+i;n(e[s],t)>0?o=i:(r=s+1,o-=i+1)}return r},e.shallowEqual=function(e,t,n){if(e===t)return!0;if(e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;++i)if(n?!n(e[i],t[i]):e[i]!==t[i])return!1;return!0},e.slice=function(e,t={}){let{start:n,stop:i,step:s}=t;if(void 0===s&&(s=1),0===s)throw new Error("Slice `step` cannot be zero.");let a,r=e.length;void 0===n?n=s<0?r-1:0:n<0?n=Math.max(n+r,s<0?-1:0):n>=r&&(n=s<0?r-1:r),void 0===i?i=s<0?-1:r:i<0?i=Math.max(i+r,s<0?-1:0):i>=r&&(i=s<0?r-1:r),a=s<0&&i>=n||s>0&&n>=i?0:s<0?Math.floor((i-n+1)/s+1):Math.floor((i-n-1)/s+1);let o=[];for(let t=0;t<a;++t)o[t]=e[n+t*s];return o},e.move=function(e,t,n){let i=e.length;if(i<=1||(t=t<0?Math.max(0,t+i):Math.min(t,i-1))===(n=n<0?Math.max(0,n+i):Math.min(n,i-1)))return;let s=e[t],a=t<n?1:-1;for(let i=t;i!==n;i+=a)e[i]=e[i+a];e[n]=s},e.reverse=a,e.rotate=function(e,t,n=0,i=-1){let s=e.length;if(s<=1||(n=n<0?Math.max(0,n+s):Math.min(n,s-1))>=(i=i<0?Math.max(0,i+s):Math.min(i,s-1)))return;let r=i-n+1;if(t>0?t%=r:t<0&&(t=(t%r+r)%r),0===t)return;let o=n+t;a(e,n,o-1),a(e,o,i),a(e,n,i)},e.fill=function(e,t,n=0,i=-1){let s,a=e.length;if(0!==a){n=n<0?Math.max(0,n+a):Math.min(n,a-1),s=(i=i<0?Math.max(0,i+a):Math.min(i,a-1))<n?i+1+(a-n):i-n+1;for(let i=0;i<s;++i)e[(n+i)%a]=t}},e.insert=function(e,t,n){let i=e.length;t=t<0?Math.max(0,t+i):Math.min(t,i);for(let n=i;n>t;--n)e[n]=e[n-1];e[t]=n},e.removeAt=r,e.removeFirstOf=function(e,n,i=0,s=-1){let a=t(e,n,i,s);return-1!==a&&r(e,a),a},e.removeLastOf=function(e,t,i=-1,s=0){let a=n(e,t,i,s);return-1!==a&&r(e,a),a},e.removeAllOf=function(e,t,n=0,i=-1){let s=e.length;if(0===s)return 0;n=n<0?Math.max(0,n+s):Math.min(n,s-1),i=i<0?Math.max(0,i+s):Math.min(i,s-1);let a=0;for(let r=0;r<s;++r)n<=i&&r>=n&&r<=i&&e[r]===t||i<n&&(r<=i||r>=n)&&e[r]===t?a++:a>0&&(e[r-a]=e[r]);return a>0&&(e.length=s-a),a},e.removeFirstWhere=function(e,t,n=0,s=-1){let a,o=i(e,t,n,s);return-1!==o&&(a=r(e,o)),{index:o,value:a}},e.removeLastWhere=function(e,t,n=-1,i=0){let a,o=s(e,t,n,i);return-1!==o&&(a=r(e,o)),{index:o,value:a}},e.removeAllWhere=function(e,t,n=0,i=-1){let s=e.length;if(0===s)return 0;n=n<0?Math.max(0,n+s):Math.min(n,s-1),i=i<0?Math.max(0,i+s):Math.min(i,s-1);let a=0;for(let r=0;r<s;++r)n<=i&&r>=n&&r<=i&&t(e[r],r)||i<n&&(r<=i||r>=n)&&t(e[r],r)?a++:a>0&&(e[r-a]=e[r]);return a>0&&(e.length=s-a),a}}(e.ArrayExt||(e.ArrayExt={})),(n||(n={})).rangeLength=function(e,t,n){return 0===n?1/0:e>t&&n>0||e<t&&n<0?0:Math.ceil((t-e)/n)},e.StringExt=void 0,function(e){function t(e,t,n=0){let i=new Array(t.length);for(let s=0,a=n,r=t.length;s<r;++s,++a){if(a=e.indexOf(t[s],a),-1===a)return null;i[s]=a}return i}e.findIndices=t,e.matchSumOfSquares=function(e,n,i=0){let s=t(e,n,i);if(!s)return null;let a=0;for(let e=0,t=s.length;e<t;++e){let t=s[e]-i;a+=t*t}return{score:a,indices:s}},e.matchSumOfDeltas=function(e,n,i=0){let s=t(e,n,i);if(!s)return null;let a=0,r=i-1;for(let e=0,t=s.length;e<t;++e){let t=s[e];a+=t-r-1,r=t}return{score:a,indices:s}},e.highlight=function(e,t,n){let i=[],s=0,a=0,r=t.length;for(;s<r;){let o=t[s],l=t[s];for(;++s<r&&t[s]===l+1;)l++;a<o&&i.push(e.slice(a,o)),o<l+1&&i.push(n(e.slice(o,l+1))),a=l+1}return a<e.length&&i.push(e.slice(a)),i},e.cmp=function(e,t){return e<t?-1:e>t?1:0}}(e.StringExt||(e.StringExt={})),e.chain=function*(...e){for(let t of e)yield*t},e.each=function(e,t){let n=0;for(let i of e)if(!1===t(i,n++))return},e.empty=function*(){},e.enumerate=function*(e,t=0){for(let n of e)yield[t++,n]},e.every=t,e.filter=function*(e,t){let n=0;for(let i of e)t(i,n++)&&(yield i)},e.find=function(e,t){let n=0;for(let i of e)if(t(i,n++))return i},e.findIndex=function(e,t){let n=0;for(let i of e)if(t(i,n++))return n-1;return-1},e.map=function*(e,t){let n=0;for(let i of e)yield t(i,n++)},e.max=function(e,t){let n;for(let i of e)void 0!==n?t(i,n)>0&&(n=i):n=i;return n},e.min=function(e,t){let n;for(let i of e)void 0!==n?t(i,n)<0&&(n=i):n=i;return n},e.minmax=function(e,t){let n,i,s=!0;for(let a of e)s?(n=a,i=a,s=!1):t(a,n)<0?n=a:t(a,i)>0&&(i=a);return s?void 0:[n,i]},e.once=function*(e){yield e},e.range=function*(e,t,i){void 0===t?(t=e,e=0,i=1):void 0===i&&(i=1);let s=n.rangeLength(e,t,i);for(let t=0;t<s;t++)yield e+i*t},e.reduce=function(e,t,n){let i=e[Symbol.iterator](),s=0,a=i.next();if(a.done&&void 0===n)throw new TypeError("Reduce of empty iterable with no initial value.");if(a.done)return n;let r,o,l=i.next();if(l.done&&void 0===n)return a.value;if(l.done)return t(n,a.value,s++);for(r=t(void 0===n?a.value:t(n,a.value,s++),l.value,s++);!(o=i.next()).done;)r=t(r,o.value,s++);return r},e.repeat=function*(e,t){for(;0<t--;)yield e},e.retro=function*(e){if("function"==typeof e.retro)yield*e.retro();else for(let t=e.length-1;t>-1;t--)yield e[t]},e.some=function(e,t){let n=0;for(let i of e)if(t(i,n++))return!0;return!1},e.stride=function*(e,t){let n=0;for(let i of e)n++%t==0&&(yield i)},e.take=function*(e,t){if(t<1)return;let n,i=e[Symbol.iterator]();for(;0<t--&&!(n=i.next()).done;)yield n.value},e.toArray=function(e){return Array.from(e)},e.toObject=function(e){let t={};for(let[n,i]of e)t[n]=i;return t},e.topologicSort=function(e){let t=[],n=new Set,i=new Map;for(let t of e)s(t);for(let[e]of i)a(e);return t;function s(e){let[t,n]=e,s=i.get(n);s?s.push(t):i.set(n,[t])}function a(e){if(n.has(e))return;n.add(e);let s=i.get(e);if(s)for(let e of s)a(e);t.push(e)}},e.zip=function*(...e){let n=e.map((e=>e[Symbol.iterator]())),i=n.map((e=>e.next()));for(;t(i,(e=>!e.done));i=n.map((e=>e.next())))yield i.map((e=>e.value))}},"object"==typeof e&&void 0!==t?i(e):"function"==typeof define&&__webpack_require__.amdO?define(["exports"],i):i((n="undefined"!=typeof globalThis?globalThis:n||self).lumino_algorithm={})})),te=E(((e,t)=>{var n,i;n=e,i=function(e,t){var n;function i(e){let t=0;for(let n=0,i=e.length;n<i;++n)n%4==0&&(t=4294967295*Math.random()>>>0),e[n]=255&t,t>>>=8}e.JSONExt=void 0,function(e){function t(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e}function n(e){return Array.isArray(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=n,e.isObject=function(e){return!t(e)&&!n(e)},e.deepEqual=function e(i,s){if(i===s)return!0;if(t(i)||t(s))return!1;let a=n(i),r=n(s);return a===r&&(a&&r?function(t,n){if(t===n)return!0;if(t.length!==n.length)return!1;for(let i=0,s=t.length;i<s;++i)if(!e(t[i],n[i]))return!1;return!0}(i,s):function(t,n){if(t===n)return!0;for(let e in t)if(void 0!==t[e]&&!(e in n))return!1;for(let e in n)if(void 0!==n[e]&&!(e in t))return!1;for(let i in t){let s=t[i],a=n[i];if(!(void 0===s&&void 0===a||void 0!==s&&void 0!==a&&e(s,a)))return!1}return!0}(i,s))},e.deepCopy=function e(i){return t(i)?i:n(i)?function(t){let n=new Array(t.length);for(let i=0,s=t.length;i<s;++i)n[i]=e(t[i]);return n}(i):function(t){let n={};for(let i in t){let s=t[i];void 0!==s&&(n[i]=e(s))}return n}(i)}}(e.JSONExt||(e.JSONExt={})),function(e){class n{constructor(e){var t,n,i,s;this._activated=!1,this._promise=null,this._service=null,this.id=e.id,this.description=null!==(t=e.description)&&void 0!==t?t:"",this.activate=e.activate,this.deactivate=null!==(n=e.deactivate)&&void 0!==n?n:null,this.provides=null!==(i=e.provides)&&void 0!==i?i:null,this.autoStart=null!==(s=e.autoStart)&&void 0!==s&&s,this.requires=e.requires?e.requires.slice():[],this.optional=e.optional?e.optional.slice():[]}get activated(){return this._activated}set activated(e){this._activated=e}get service(){return this._service}set service(e){this._service=e}get promise(){return this._promise}set promise(e){this._promise=e}}e.createPluginData=function(e){return new n(e)},e.ensureNoCycle=function(e,t,n){let i=[...e.requires,...e.optional],s=i=>{if(i===e.provides)return!0;let r=n.get(i);if(!r)return!1;let o=t.get(r),l=[...o.requires,...o.optional];return 0!==l.length&&(a.push(r),!!l.some(s)||(a.pop(),!1))};if(!e.provides||0===i.length)return;let a=[e.id];if(i.some(s))throw new ReferenceError(`Cycle detected: ${a.join(" -> ")}.`)},e.findDependents=function(e,n,i){let s=new Array,a=e=>{let t=n.get(e),a=[...t.requires,...t.optional];s.push(...a.reduce(((t,n)=>{let s=i.get(n);return s&&t.push([e,s]),t}),[]))};for(let e of n.keys())a(e);let r=s.filter((t=>t[1]===e)),o=0;for(;r.length>o;){let e=r.length,t=new Set(r.map((e=>e[0])));for(let e of t)s.filter((t=>t[1]===e)).forEach((e=>{r.includes(e)||r.push(e)}));o=e}let l=t.topologicSort(r),c=l.findIndex((t=>t===e));return-1===c?[e]:l.slice(0,c+1)},e.collectStartupPlugins=function(e,t){let n=new Set;for(let t of e.keys())!0===e.get(t).autoStart&&n.add(t);if(t.startPlugins)for(let e of t.startPlugins)n.add(e);if(t.ignorePlugins)for(let e of t.ignorePlugins)n.delete(e);return Array.from(n)}}(n||(n={})),e.Random=void 0,(e.Random||(e.Random={})).getRandomValues=(()=>{let e="undefined"!=typeof window&&(window.crypto||window.msCrypto)||null;return e&&"function"==typeof e.getRandomValues?function(t){return e.getRandomValues(t)}:i})(),e.UUID=void 0,(e.UUID||(e.UUID={})).uuid4=function(e){let t=new Uint8Array(16),n=new Array(256);for(let e=0;e<16;++e)n[e]="0"+e.toString(16);for(let e=16;e<256;++e)n[e]=e.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],n[t[0]]+n[t[1]]+n[t[2]]+n[t[3]]+"-"+n[t[4]]+n[t[5]]+"-"+n[t[6]]+n[t[7]]+"-"+n[t[8]]+n[t[9]]+"-"+n[t[10]]+n[t[11]]+n[t[12]]+n[t[13]]+n[t[14]]+n[t[15]]}}(e.Random.getRandomValues),e.MimeData=class{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(e){return-1!==this._types.indexOf(e)}getData(e){let t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0}setData(e,t){this.clearData(e),this._types.push(e),this._values.push(t)}clearData(e){let t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))}clear(){this._types.length=0,this._values.length=0}},e.PluginRegistry=class{constructor(e={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=new Map,this._services=new Map,e.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=e.validatePlugin)}get application(){return this._application}set application(e){if(null!==this._application)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=e}get deferredPlugins(){return Array.from(this._plugins).filter((([e,t])=>"defer"===t.autoStart)).map((([e,t])=>e))}getPluginDescription(e){var t,n;return null!==(n=null===(t=this._plugins.get(e))||void 0===t?void 0:t.description)&&void 0!==n?n:""}hasPlugin(e){return this._plugins.has(e)}isPluginActivated(e){var t,n;return null!==(n=null===(t=this._plugins.get(e))||void 0===t?void 0:t.activated)&&void 0!==n&&n}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(e){if(this._plugins.has(e.id))throw new TypeError(`Plugin '${e.id}' is already registered.`);if(!this._validatePlugin(e))throw new Error(`Plugin '${e.id}' is not valid.`);let t=n.createPluginData(e);n.ensureNoCycle(t,this._plugins,this._services),t.provides&&this._services.set(t.provides,t.id),this._plugins.set(t.id,t)}registerPlugins(e){for(let t of e)this.registerPlugin(t)}deregisterPlugin(e,t){let n=this._plugins.get(e);if(n){if(n.activated&&!t)throw new Error(`Plugin '${e}' is still active.`);this._plugins.delete(e)}}async activatePlugin(e){let t=this._plugins.get(e);if(!t)throw new ReferenceError(`Plugin '${e}' is not registered.`);if(t.activated)return;if(t.promise)return t.promise;let n=t.requires.map((e=>this.resolveRequiredService(e))),i=t.optional.map((e=>this.resolveOptionalService(e)));return t.promise=Promise.all([...n,...i]).then((e=>t.activate.apply(void 0,[this.application,...e]))).then((e=>{t.service=e,t.activated=!0,t.promise=null})).catch((e=>{throw t.promise=null,e})),t.promise}async activatePlugins(e,t={}){switch(e){case"defer":{let e=this.deferredPlugins.filter((e=>this._plugins.get(e).autoStart)).map((e=>this.activatePlugin(e)));await Promise.all(e);break}case"startUp":{let e=n.collectStartupPlugins(this._plugins,t).map((async e=>{try{return await this.activatePlugin(e)}catch(t){console.error(`Plugin '${e}' failed to activate.`,t)}}));await Promise.all(e);break}}}async deactivatePlugin(e){let t=this._plugins.get(e);if(!t)throw new ReferenceError(`Plugin '${e}' is not registered.`);if(!t.activated)return[];if(!t.deactivate)throw new TypeError(`Plugin '${e}'#deactivate() method missing`);let i=n.findDependents(e,this._plugins,this._services),s=i.map((e=>this._plugins.get(e)));for(let t of s)if(!t.deactivate)throw new TypeError(`Plugin ${t.id}#deactivate() method missing (depends on ${e})`);for(let e of s){let t=[...e.requires,...e.optional].map((e=>{let t=this._services.get(e);return t?this._plugins.get(t).service:null}));await e.deactivate(this.application,...t),e.service=null,e.activated=!1}return i.pop(),i}async resolveRequiredService(e){let t=this._services.get(e);if(!t)throw new TypeError(`No provider for: ${e.name}.`);let n=this._plugins.get(t);return n.activated||await this.activatePlugin(t),n.service}async resolveOptionalService(e){let t=this._services.get(e);if(!t)return null;let n=this._plugins.get(t);if(!n.activated)try{await this.activatePlugin(t)}catch(e){return console.error(e),null}return n.service}},e.PromiseDelegate=class{constructor(){this.promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}resolve(e){(0,this._resolve)(e)}reject(e){(0,this._reject)(e)}},e.Token=class{constructor(e,t){this.name=e,this.description=null!=t?t:"",this._tokenStructuralPropertyT=null}}},"object"==typeof e&&void 0!==t?i(e,ei()):"function"==typeof define&&__webpack_require__.amdO?define(["exports","@lumino/algorithm"],i):i((n="undefined"!=typeof globalThis?globalThis:n||self).lumino_coreutils={},n.lumino_algorithm)})),Z=E(((e,t)=>{var n,i;n=e,i=function(e,t,n){class i{constructor(e){this.sender=e}connect(e,t){return a.connect(this,e,t)}disconnect(e,t){return a.disconnect(this,e,t)}emit(e){a.emit(this,e)}}var s,a;(s=i||(i={})).disconnectBetween=function(e,t){a.disconnectBetween(e,t)},s.disconnectSender=function(e){a.disconnectSender(e)},s.disconnectReceiver=function(e){a.disconnectReceiver(e)},s.disconnectAll=function(e){a.disconnectAll(e)},s.clearData=function(e){a.disconnectAll(e)},s.getExceptionHandler=function(){return a.exceptionHandler},s.setExceptionHandler=function(e){let t=a.exceptionHandler;return a.exceptionHandler=e,t};class r extends i{constructor(){super(...arguments),this._pending=new n.PromiseDelegate}async*[Symbol.asyncIterator](){let e=this._pending;for(;;)try{let{args:t,next:n}=await e.promise;e=n,yield t}catch{return}}emit(e){let t=this._pending,i=this._pending=new n.PromiseDelegate;t.resolve({args:e,next:i}),super.emit(e)}stop(){this._pending.promise.catch((()=>{})),this._pending.reject("stop"),this._pending=new n.PromiseDelegate}}(function(e){function n(e){let t=s.get(e);if(t&&0!==t.length){for(let e of t){if(!e.signal)continue;let t=e.thisArg||e.slot;e.signal=null,d(a.get(t))}d(t)}}function i(e){let t=a.get(e);if(t&&0!==t.length){for(let e of t){if(!e.signal)continue;let t=e.signal.sender;e.signal=null,d(s.get(t))}d(t)}}e.exceptionHandler=e=>{console.error(e)},e.connect=function(e,t,n){n=n||void 0;let i=s.get(e.sender);if(i||(i=[],s.set(e.sender,i)),l(i,e,t,n))return!1;let r=n||t,o=a.get(r);o||(o=[],a.set(r,o));let c={signal:e,slot:t,thisArg:n};return i.push(c),o.push(c),!0},e.disconnect=function(e,t,n){n=n||void 0;let i=s.get(e.sender);if(!i||0===i.length)return!1;let r=l(i,e,t,n);if(!r)return!1;let o=n||t,c=a.get(o);return r.signal=null,d(i),d(c),!0},e.disconnectBetween=function(e,t){let n=s.get(e);if(!n||0===n.length)return;let i=a.get(t);if(i&&0!==i.length){for(let t of i)t.signal&&t.signal.sender===e&&(t.signal=null);d(n),d(i)}},e.disconnectSender=n,e.disconnectReceiver=i,e.disconnectAll=function(e){n(e),i(e)},e.emit=function(e,t){let n=s.get(e.sender);if(n&&0!==n.length)for(let i=0,s=n.length;i<s;++i){let s=n[i];s.signal===e&&c(s,t)}};let s=new WeakMap,a=new WeakMap,r=new Set,o="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function l(e,n,i,s){return t.find(e,(e=>e.signal===n&&e.slot===i&&e.thisArg===s))}function c(t,n){let{signal:i,slot:s,thisArg:a}=t;try{s.call(a,i.sender,n)}catch(t){e.exceptionHandler(t)}}function d(e){0===r.size&&o(p),r.add(e)}function p(){r.forEach(h),r.clear()}function h(e){t.ArrayExt.removeAllWhere(e,u)}function u(e){return null===e.signal}})(a||(a={})),e.Signal=i,e.Stream=r},"object"==typeof e&&void 0!==t?i(e,ei(),te()):"function"==typeof define&&__webpack_require__.amdO?define(["exports","@lumino/algorithm","@lumino/coreutils"],i):i((n="undefined"!=typeof globalThis?globalThis:n||self).lumino_signaling={},n.lumino_algorithm,n.lumino_coreutils)})),Ms=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActivityMonitor=void 0;var t=Z();e.ActivityMonitor=class{constructor(e){this._timer=-1,this._timeout=-1,this._isDisposed=!1,this._activityStopped=new t.Signal(this),e.signal.connect(this._onSignalFired,this),this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,t.Signal.clearData(this))}_onSignalFired(e,t){clearTimeout(this._timer),this._sender=e,this._args=t,this._timer=setTimeout((()=>{this._activityStopped.emit({sender:this._sender,args:this._args})}),this._timeout)}}})),Is=E((e=>{Object.defineProperty(e,"__esModule",{value:!0})})),Rs=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LruCache=void 0,e.LruCache=class{constructor(e={}){this._map=new Map,this._maxSize=(null==e?void 0:e.maxSize)||128}get size(){return this._map.size}clear(){this._map.clear()}get(e){let t=this._map.get(e)||null;return null!=t&&(this._map.delete(e),this._map.set(e,t)),t}set(e,t){this._map.size>=this._maxSize&&this._map.delete(this._map.keys().next().value),this._map.set(e,t)}}})),Ds=E((e=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.MarkdownCodeBlocks=void 0,function(e){e.CODE_BLOCK_MARKER="```";let t=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class n{constructor(e){this.startLine=e,this.code="",this.endLine=-1}}e.MarkdownCodeBlock=n,e.isMarkdown=function(e){return t.indexOf(e)>-1},e.findMarkdownCodeBlocks=function(t){if(!t||""===t)return[];let i=t.split("\n"),s=[],a=null;for(let t=0;t<i.length;t++){let r=i[t],o=0===r.indexOf(e.CODE_BLOCK_MARKER),l=null!=a;if(o||l)if(l)a&&(o?(a.endLine=t-1,s.push(a),a=null):a.code+=r+"\n");else{a=new n(t);let i=r.indexOf(e.CODE_BLOCK_MARKER),o=r.lastIndexOf(e.CODE_BLOCK_MARKER);i!==o&&(a.code=r.substring(i+e.CODE_BLOCK_MARKER.length,o),a.endLine=t,s.push(a),a=null)}}return s}}(t||(e.MarkdownCodeBlocks=t={}))})),Us=E(((e,t)=>{function n(e){return!("number"!=typeof e&&!/^0x[0-9a-f]+$/i.test(e))||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function i(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}t.exports=function(e,t){t||(t={});var s={bools:{},strings:{},unknownFn:null};"function"==typeof t.unknown&&(s.unknownFn=t.unknown),"boolean"==typeof t.boolean&&t.boolean?s.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach((function(e){s.bools[e]=!0}));var a={};function r(e){return a[e].some((function(e){return s.bools[e]}))}Object.keys(t.alias||{}).forEach((function(e){a[e]=[].concat(t.alias[e]),a[e].forEach((function(t){a[t]=[e].concat(a[e].filter((function(e){return t!==e})))}))})),[].concat(t.string).filter(Boolean).forEach((function(e){s.strings[e]=!0,a[e]&&[].concat(a[e]).forEach((function(e){s.strings[e]=!0}))}));var o=t.default||{},l={_:[]};function c(e,t,n){for(var a=e,r=0;r<t.length-1;r++){var o=t[r];if(i(a,o))return;void 0===a[o]&&(a[o]={}),(a[o]===Object.prototype||a[o]===Number.prototype||a[o]===String.prototype)&&(a[o]={}),a[o]===Array.prototype&&(a[o]=[]),a=a[o]}var l=t[t.length-1];i(a,l)||((a===Object.prototype||a===Number.prototype||a===String.prototype)&&(a={}),a===Array.prototype&&(a=[]),void 0===a[l]||s.bools[l]||"boolean"==typeof a[l]?a[l]=n:Array.isArray(a[l])?a[l].push(n):a[l]=[a[l],n])}function d(e,t,i){if(!i||!s.unknownFn||function(e,t){return s.allBools&&/^--[^=]+$/.test(t)||s.strings[e]||s.bools[e]||a[e]}(e,i)||!1!==s.unknownFn(i)){var r=!s.strings[e]&&n(t)?Number(t):t;c(l,e.split("."),r),(a[e]||[]).forEach((function(e){c(l,e.split("."),r)}))}}Object.keys(s.bools).forEach((function(e){d(e,void 0!==o[e]&&o[e])}));var p=[];-1!==e.indexOf("--")&&(p=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var h=0;h<e.length;h++){var u,m,g=e[h];if(/^--.+=/.test(g)){var f=g.match(/^--([^=]+)=([\s\S]*)$/);u=f[1];var v=f[2];s.bools[u]&&(v="false"!==v),d(u,v,g)}else if(/^--no-.+/.test(g))d(u=g.match(/^--no-(.+)/)[1],!1,g);else if(/^--.+/.test(g))u=g.match(/^--(.+)/)[1],void 0===(m=e[h+1])||/^(-|--)[^-]/.test(m)||s.bools[u]||s.allBools||a[u]&&r(u)?/^(true|false)$/.test(m)?(d(u,"true"===m,g),h+=1):d(u,!s.strings[u]||"",g):(d(u,m,g),h+=1);else if(/^-[^-]+/.test(g)){for(var _=g.slice(1,-1).split(""),y=!1,w=0;w<_.length;w++)if("-"!==(m=g.slice(w+2))){if(/[A-Za-z]/.test(_[w])&&"="===m[0]){d(_[w],m.slice(1),g),y=!0;break}if(/[A-Za-z]/.test(_[w])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(m)){d(_[w],m,g),y=!0;break}if(_[w+1]&&_[w+1].match(/\W/)){d(_[w],g.slice(w+2),g),y=!0;break}d(_[w],!s.strings[_[w]]||"",g)}else d(_[w],m,g);u=g.slice(-1)[0],!y&&"-"!==u&&(!e[h+1]||/^(-|--)[^-]/.test(e[h+1])||s.bools[u]||a[u]&&r(u)?e[h+1]&&/^(true|false)$/.test(e[h+1])?(d(u,"true"===e[h+1],g),h+=1):d(u,!s.strings[u]||"",g):(d(u,e[h+1],g),h+=1))}else if((!s.unknownFn||!1!==s.unknownFn(g))&&l._.push(s.strings._||!n(g)?g:Number(g)),t.stopEarly){l._.push.apply(l._,e.slice(h+1));break}}return Object.keys(o).forEach((function(e){(function(e,t){var n=e;return t.slice(0,-1).forEach((function(e){n=n[e]||{}})),t[t.length-1]in n})(l,e.split("."))||(c(l,e.split("."),o[e]),(a[e]||[]).forEach((function(t){c(l,t.split("."),o[e])})))})),t["--"]?l["--"]=p.slice():p.forEach((function(e){l._.push(e)})),l}})),Xt=E(((e,t)=>{function n(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function i(e,t){for(var n,i="",s=0,a=-1,r=0,o=0;o<=e.length;++o){if(o<e.length)n=e.charCodeAt(o);else{if(47===n)break;n=47}if(47===n){if(a!==o-1&&1!==r)if(a!==o-1&&2===r){if(i.length<2||2!==s||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",s=0):s=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),a=o,r=0;continue}}else if(2===i.length||1===i.length){i="",s=0,a=o,r=0;continue}t&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+="/"+e.slice(a+1,o):i=e.slice(a+1,o),s=o-a-1;a=o,r=0}else 46===n&&-1!==r?++r:r=-1}return i}var s={resolve:function(){for(var e,t="",s=!1,a=arguments.length-1;a>=-1&&!s;a--){var r;a>=0?r=arguments[a]:(void 0===e&&(e=process.cwd()),r=e),n(r),0!==r.length&&(t=r+"/"+t,s=47===r.charCodeAt(0))}return t=i(t,!s),s?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(n(e),0===e.length)return".";var t=47===e.charCodeAt(0),s=47===e.charCodeAt(e.length-1);return 0===(e=i(e,!t)).length&&!t&&(e="."),e.length>0&&s&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return n(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];n(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":s.normalize(e)},relative:function(e,t){if(n(e),n(t),e===t||(e=s.resolve(e))===(t=s.resolve(t)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var a=e.length,r=a-i,o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var l=t.length-o,c=r<l?r:l,d=-1,p=0;p<=c;++p){if(p===c){if(l>c){if(47===t.charCodeAt(o+p))return t.slice(o+p+1);if(0===p)return t.slice(o+p)}else r>c&&(47===e.charCodeAt(i+p)?d=p:0===p&&(d=0));break}var h=e.charCodeAt(i+p);if(h!==t.charCodeAt(o+p))break;47===h&&(d=p)}var u="";for(p=i+d+1;p<=a;++p)(p===a||47===e.charCodeAt(p))&&(0===u.length?u+="..":u+="/..");return u.length>0?u+t.slice(o+d):(o+=d,47===t.charCodeAt(o)&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(n(e),0===e.length)return".";for(var t=e.charCodeAt(0),i=47===t,s=-1,a=!0,r=e.length-1;r>=1;--r)if(47===(t=e.charCodeAt(r))){if(!a){s=r;break}}else a=!1;return-1===s?i?"/":".":i&&1===s?"//":e.slice(0,s)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');n(e);var i,s=0,a=-1,r=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var o=t.length-1,l=-1;for(i=e.length-1;i>=0;--i){var c=e.charCodeAt(i);if(47===c){if(!r){s=i+1;break}}else-1===l&&(r=!1,l=i+1),o>=0&&(c===t.charCodeAt(o)?-1==--o&&(a=i):(o=-1,a=l))}return s===a?a=l:-1===a&&(a=e.length),e.slice(s,a)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!r){s=i+1;break}}else-1===a&&(r=!1,a=i+1);return-1===a?"":e.slice(s,a)},extname:function(e){n(e);for(var t=-1,i=0,s=-1,a=!0,r=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(47!==l)-1===s&&(a=!1,s=o+1),46===l?-1===t?t=o:1!==r&&(r=1):-1!==t&&(r=-1);else if(!a){i=o+1;break}}return-1===t||-1===s||0===r||1===r&&t===s-1&&t===i+1?"":e.slice(t,s)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+i:n+"/"+i:i}(0,e)},parse:function(e){n(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var i,s=e.charCodeAt(0),a=47===s;a?(t.root="/",i=1):i=0;for(var r=-1,o=0,l=-1,c=!0,d=e.length-1,p=0;d>=i;--d)if(47!==(s=e.charCodeAt(d)))-1===l&&(c=!1,l=d+1),46===s?-1===r?r=d:1!==p&&(p=1):-1!==r&&(p=-1);else if(!c){o=d+1;break}return-1===r||-1===l||0===p||1===p&&r===l-1&&r===o+1?-1!==l&&(t.base=t.name=0===o&&a?e.slice(1,l):e.slice(o,l)):(0===o&&a?(t.name=e.slice(1,r),t.base=e.slice(1,l)):(t.name=e.slice(o,r),t.base=e.slice(o,l)),t.ext=e.slice(r,l)),o>0?t.dir=e.slice(0,o-1):a&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,t.exports=s})),zs=E(((e,t)=>{t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}})),Bs=E((e=>{var t=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function i(e){try{return encodeURIComponent(e)}catch{return null}}e.stringify=function(e,n){n=n||"";var s,a,r=[];for(a in"string"!=typeof n&&(n="?"),e)if(t.call(e,a)){if(!(s=e[a])&&(null==s||isNaN(s))&&(s=""),a=i(a),s=i(s),null===a||null===s)continue;r.push(a+"="+s)}return r.length?n+r.join("&"):""},e.parse=function(e){for(var t,i=/([^=?#&]+)=?([^&]*)/g,s={};t=i.exec(e);){var a=n(t[1]),r=n(t[2]);null===a||null===r||a in s||(s[a]=r)}return s}})),Xs=E(((e,t)=>{var n=zs(),i=Bs(),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,r=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(s,"")}var p=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function u(e){var t,n=("undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{}).location||{},i={},s=typeof(e=e||n);if("blob:"===e.protocol)i=new f(unescape(e.pathname),{});else if("string"===s)for(t in i=new f(e,{}),h)delete i[t];else if("object"===s){for(t in e)t in h||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=r.test(e.href))}return i}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=d(e)).replace(a,""),t=t||{};var n,i=l.exec(e),s=i[1]?i[1].toLowerCase():"",r=!!i[2],o=!!i[3],c=0;return r?o?(n=i[2]+i[3]+i[4],c=i[2].length+i[3].length):(n=i[2]+i[4],c=i[2].length):o?(n=i[3]+i[4],c=i[3].length):n=i[4],"file:"===s?c>=2&&(n=n.slice(2)):m(s)?n=i[4]:s?r&&(n=n.slice(2)):c>=2&&m(t.protocol)&&(n=i[4]),{protocol:s,slashes:r||m(s),slashesCount:c,rest:n}}function f(e,t,s){if(e=(e=d(e)).replace(a,""),!(this instanceof f))return new f(e,t,s);var r,o,l,h,v,_,y=p.slice(),w=typeof t,b=this,x=0;for("object"!==w&&"string"!==w&&(s=t,t=null),s&&"function"!=typeof s&&(s=i.parse),r=!(o=g(e||"",t=u(t))).protocol&&!o.slashes,b.slashes=o.slashes||r&&t.slashes,b.protocol=o.protocol||t.protocol||"",e=o.rest,("file:"===o.protocol&&(2!==o.slashesCount||c.test(e))||!o.slashes&&(o.protocol||o.slashesCount<2||!m(b.protocol)))&&(y[3]=[/(.*)/,"pathname"]);x<y.length;x++)"function"!=typeof(h=y[x])?(l=h[0],_=h[1],l!=l?b[_]=e:"string"==typeof l?~(v="@"===l?e.lastIndexOf(l):e.indexOf(l))&&("number"==typeof h[2]?(b[_]=e.slice(0,v),e=e.slice(v+h[2])):(b[_]=e.slice(v),e=e.slice(0,v))):(v=l.exec(e))&&(b[_]=v[1],e=e.slice(0,v.index)),b[_]=b[_]||r&&h[3]&&t[_]||"",h[4]&&(b[_]=b[_].toLowerCase())):e=h(e,b);s&&(b.query=s(b.query)),r&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),i=n.length,s=n[i-1],a=!1,r=0;i--;)"."===n[i]?n.splice(i,1):".."===n[i]?(n.splice(i,1),r++):r&&(0===i&&(a=!0),n.splice(i,1),r--);return a&&n.unshift(""),("."===s||".."===s)&&n.push(""),n.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&m(b.protocol)&&(b.pathname="/"+b.pathname),n(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(v=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,v),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(v+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&m(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}f.prototype={set:function(e,t,s){var a=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(s||i.parse)(t)),a[e]=t;break;case"port":a[e]=t,n(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=t,a.port&&(t+=":"+a.port),a.host=t;break;case"host":a[e]=t,o.test(t)?(t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":")):(a.hostname=t,a.port="");break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!s;break;case"pathname":case"hash":if(t){var r="pathname"===e?"/":"#";a[e]=t.charAt(0)!==r?r+t:t}else a[e]=t;break;case"username":case"password":a[e]=encodeURIComponent(t);break;case"auth":var l=t.indexOf(":");~l?(a.username=t.slice(0,l),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=t.slice(l+1),a.password=encodeURIComponent(decodeURIComponent(a.password))):a.username=encodeURIComponent(decodeURIComponent(t))}for(var c=0;c<p.length;c++){var d=p[c];d[4]&&(a[d[1]]=a[d[1]].toLowerCase())}return a.auth=a.password?a.username+":"+a.password:a.username,a.origin="file:"!==a.protocol&&m(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){(!e||"function"!=typeof e)&&(e=i.stringify);var t,n=this,s=n.host,a=n.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var r=a+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(r+=n.username,n.password&&(r+=":"+n.password),r+="@"):n.password?(r+=":"+n.password,r+="@"):"file:"!==n.protocol&&m(n.protocol)&&!s&&"/"!==n.pathname&&(r+="@"),(":"===s[s.length-1]||o.test(n.hostname)&&!n.port)&&(s+=":"),r+=s+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(r+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(r+=n.hash),r}},f.extractProtocol=g,f.location=u,f.trimLeft=d,f.qs=i,t.exports=f})),ai=E((e=>{var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.URLExt=void 0;var n,i=Xt(),s=t(Xs());!function(e){function t(e){if("undefined"!=typeof document&&document){let t=document.createElement("a");return t.href=e,t}return(0,s.default)(e)}function n(...e){let t=(0,s.default)(e[0],{}),n=""===t.protocol&&t.slashes;n&&(t=(0,s.default)(e[0],"https:"+e[0]));let a=`${n?"":t.protocol}${t.slashes?"//":""}${t.auth}${t.auth?"@":""}${t.host}`,r=i.posix.join(`${a&&"/"!==t.pathname[0]?"/":""}${t.pathname}`,...e.slice(1));return`${a}${"."===r?"":r}`}e.parse=t,e.getHostName=function(e){return(0,s.default)(e).hostname},e.normalize=function(e){return e&&t(e).toString()},e.join=n,e.encodeParts=function(e){return n(...e.split("/").map(encodeURIComponent))},e.objectToQueryString=function(e){let t=Object.keys(e).filter((e=>e.length>0));return t.length?"?"+t.map((t=>{let n=encodeURIComponent(String(e[t]));return t+(n?"="+n:"")})).join("&"):""},e.queryStringToObject=function(e){return e.replace(/^\?/,"").split("&").reduce(((e,t)=>{let[n,i]=t.split("=");return n.length>0&&(e[n]=decodeURIComponent(i||"")),e}),{})},e.isLocal=function(e,n=!1){let{protocol:i}=t(e);return(!i||0!==e.toLowerCase().indexOf(i))&&(n?0!==e.indexOf("//"):0!==e.indexOf("/"))}}(n||(e.URLExt=n={}))})),Qs=E(((exports,module)=>{var __importDefault=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageConfig=void 0;var coreutils_1=te(),minimist_1=__importDefault(Us()),url_1=ai(),PageConfig;(function(PageConfig){function getOption(name){if(configData)return configData[name]||getBodyData(name);configData=Object.create(null);let found=!1;if("undefined"!=typeof document&&document){let e=document.getElementById("jupyter-config-data");e&&(configData=JSON.parse(e.textContent||""),found=!0)}if(!found&&void 0!==process&&process.argv)try{let cli=(0,minimist_1.default)(process.argv.slice(2)),path=Xt(),fullPath="";"jupyter-config-data"in cli?fullPath=path.resolve(cli["jupyter-config-data"]):"JUPYTER_CONFIG_DATA"in process.env&&(fullPath=path.resolve(process.env.JUPYTER_CONFIG_DATA)),fullPath&&(configData=eval("require")(fullPath))}catch(e){console.error(e)}if(coreutils_1.JSONExt.isObject(configData))for(let e in configData)"string"!=typeof configData[e]&&(configData[e]=JSON.stringify(configData[e]));else configData=Object.create(null);return configData[name]||getBodyData(name)}function setOption(e,t){let n=getOption(e);return configData[e]=t,n}function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}function getUrl(e){var t,n,i,s;let a=e.toShare?getShareUrl():getBaseUrl(),r=null!==(t=e.mode)&&void 0!==t?t:getOption("mode"),o=null!==(n=e.workspace)&&void 0!==n?n:getOption("workspace"),l="single-document"===r?"doc":"lab";a=url_1.URLExt.join(a,l),o!==PageConfig.defaultWorkspace&&(a=url_1.URLExt.join(a,"workspaces",encodeURIComponent(null!==(i=getOption("workspace"))&&void 0!==i?i:PageConfig.defaultWorkspace)));let c=null!==(s=e.treePath)&&void 0!==s?s:getOption("treePath");return c&&(a=url_1.URLExt.join(a,"tree",url_1.URLExt.encodeParts(c))),a}function getWsUrl(e){let t=getOption("wsUrl");if(!t){if(0!==(e=e?url_1.URLExt.normalize(e):getBaseUrl()).indexOf("http"))return"";t="ws"+e.slice(4)}return url_1.URLExt.normalize(t)}function getNBConvertURL({path:e,format:t,download:n}){let i=url_1.URLExt.encodeParts(e),s=url_1.URLExt.join(getBaseUrl(),"nbconvert",t,i);return n?s+"?download=true":s}function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}function getNotebookVersion(){let e=getOption("notebookVersion");return""===e?[0,0,0]:JSON.parse(e)}PageConfig.getOption=getOption,PageConfig.setOption=setOption,PageConfig.getBaseUrl=getBaseUrl,PageConfig.getTreeUrl=getTreeUrl,PageConfig.getShareUrl=getShareUrl,PageConfig.getTreeShareUrl=getTreeShareUrl,PageConfig.getUrl=getUrl,PageConfig.defaultWorkspace="default",PageConfig.getWsUrl=getWsUrl,PageConfig.getNBConvertURL=getNBConvertURL,PageConfig.getToken=getToken,PageConfig.getNotebookVersion=getNotebookVersion;let configData=null,Extension;function getBodyData(e){if("undefined"==typeof document||!document.body)return"";let t=document.body.dataset[e];return void 0===t?"":decodeURIComponent(t)}!function(e){function t(e){try{let t=getOption(e);if(t)return JSON.parse(t)}catch(t){console.warn(`Unable to parse ${e}.`,t)}return[]}e.deferred=t("deferredExtensions"),e.disabled=t("disabledExtensions"),e.isDeferred=function(t){let n=t.indexOf(":"),i="";return-1!==n&&(i=t.slice(0,n)),e.deferred.some((e=>e===t||i&&e===i))},e.isDisabled=function(t){let n=t.indexOf(":"),i="";return-1!==n&&(i=t.slice(0,n)),e.disabled.some((e=>e===t||i&&e===i))}}(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig||(exports.PageConfig=PageConfig={}))})),tr=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathExt=void 0;var t,n=Xt();!function(e){function t(e){return 0===e.indexOf("/")&&(e=e.slice(1)),e}e.join=function(...e){let i=n.posix.join(...e);return"."===i?"":t(i)},e.joinWithLeadingSlash=function(...e){let t=n.posix.join(...e);return"."===t?"":t},e.basename=function(e,t){return n.posix.basename(e,t)},e.dirname=function(e){let i=t(n.posix.dirname(e));return"."===i?"":i},e.extname=function(e){return n.posix.extname(e)},e.normalize=function(e){return""===e?"":t(n.posix.normalize(e))},e.resolve=function(...e){return t(n.posix.resolve(...e))},e.relative=function(e,i){return t(n.posix.relative(e,i))},e.normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e},e.removeSlash=t}(t||(e.PathExt=t={}))})),nr=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.signalToPromise=function(e,n){let i=new t.PromiseDelegate;function s(){e.disconnect(a)}function a(e,t){s(),i.resolve([e,t])}return e.connect(a),(null!=n?n:0)>0&&setTimeout((()=>{s(),i.reject(`Signal not emitted within ${n} ms.`)}),n),i.promise};var t=te()})),sr=E((e=>{var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.Text=void 0,(n=t||(e.Text=t={})).jsIndexToCharIndex=function(e,t){return e},n.charIndexToJsIndex=function(e,t){return e},n.camelCase=function(e,t=!1){return e.replace(/^(\w)|[\s-_:]+(\w)/g,(function(e,n,i){return i?i.toUpperCase():t?n.toUpperCase():n.toLowerCase()}))},n.titleCase=function(e){return(e||"").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}})),ar=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Time=void 0;var t,n,i=[{name:"years",milliseconds:31536e6},{name:"months",milliseconds:2592e6},{name:"days",milliseconds:864e5},{name:"hours",milliseconds:36e5},{name:"minutes",milliseconds:6e4},{name:"seconds",milliseconds:1e3}];(n=t||(e.Time=t={})).formatHuman=function(e,t="long"){let n=document.documentElement.lang||"en",s=new Intl.RelativeTimeFormat(n,{numeric:"auto",style:t}),a=new Date(e).getTime()-Date.now();for(let e of i){let t=Math.ceil(a/e.milliseconds);if(0!==t)return s.format(t,e.name)}return s.format(0,"seconds")},n.format=function(e){let t=document.documentElement.lang||"en";return new Intl.DateTimeFormat(t,{dateStyle:"short",timeStyle:"short"}).format(new Date(e))}})),J=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(n,i)&&t(n,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ms(),e),n(Is(),e),n(Rs(),e),n(Ds(),e),n(Qs(),e),n(tr(),e),n(nr(),e),n(sr(),e),n(ar(),e),n(ai(),e)})),st=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.supportedKernelWebSocketProtocols=void 0,e.createMessage=function(e){var t,i,s,a,r,o;return{buffers:null!==(t=e.buffers)&&void 0!==t?t:[],channel:e.channel,content:e.content,header:{date:(new Date).toISOString(),msg_id:null!==(i=e.msgId)&&void 0!==i?i:n.UUID.uuid4(),msg_type:e.msgType,session:e.session,username:null!==(s=e.username)&&void 0!==s?s:"",subshell_id:null!==(a=e.subshellId)&&void 0!==a?a:null,version:"5.2"},metadata:null!==(r=e.metadata)&&void 0!==r?r:{},parent_header:null!==(o=e.parentHeader)&&void 0!==o?o:{}}},e.isStreamMsg=function(e){return"stream"===e.header.msg_type},e.isDisplayDataMsg=function(e){return"display_data"===e.header.msg_type},e.isUpdateDisplayDataMsg=function(e){return"update_display_data"===e.header.msg_type},e.isExecuteInputMsg=function(e){return"execute_input"===e.header.msg_type},e.isExecuteResultMsg=function(e){return"execute_result"===e.header.msg_type},e.isErrorMsg=function(e){return"error"===e.header.msg_type},e.isStatusMsg=function(e){return"status"===e.header.msg_type},e.isClearOutputMsg=function(e){return"clear_output"===e.header.msg_type},e.isDebugEventMsg=function(e){return"debug_event"===e.header.msg_type},e.isCommOpenMsg=function(e){return"comm_open"===e.header.msg_type},e.isCommCloseMsg=function(e){return"comm_close"===e.header.msg_type},e.isCommMsgMsg=function(e){return"comm_msg"===e.header.msg_type},e.isInfoRequestMsg=function(e){return"kernel_info_request"===e.header.msg_type},e.isExecuteReplyMsg=function(e){return"execute_reply"===e.header.msg_type},e.isDebugRequestMsg=function(e){return"debug_request"===e.header.msg_type},e.isDebugReplyMsg=function(e){return"debug_reply"===e.header.msg_type},e.isInputRequestMsg=function(e){return"input_request"===e.header.msg_type},e.isInputReplyMsg=function(e){return"input_reply"===e.header.msg_type};var t,n=te();(t||(e.supportedKernelWebSocketProtocols=t={})).v1KernelWebsocketJupyterOrg="v1.kernel.websocket.jupyter.org"})),cr=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&t(i,e,s);return n(i,e),i};Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=function(e,t=""){return t===r.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg?s.serializeV1KernelWebsocketJupyterOrg(e):s.serializeDefault(e)},e.deserialize=function(e,t=""){return t===r.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg?s.deserializeV1KernelWebsocketJupyterOrg(e):s.deserializeDefault(e)};var s,a,r=i(st());(a=s||(s={})).deserializeV1KernelWebsocketJupyterOrg=function(e){let t,n=new DataView(e),i=Number(n.getBigUint64(0,!0)),s=[];for(let e=0;e<i;e++)s.push(Number(n.getBigUint64(8*(e+1),!0)));let a=new TextDecoder("utf8"),r=a.decode(e.slice(s[0],s[1])),o=JSON.parse(a.decode(e.slice(s[1],s[2]))),l=JSON.parse(a.decode(e.slice(s[2],s[3]))),c=JSON.parse(a.decode(e.slice(s[3],s[4]))),d=JSON.parse(a.decode(e.slice(s[4],s[5]))),p=[];for(let t=5;t<s.length-1;t++)p.push(new DataView(e.slice(s[t],s[t+1])));return t={channel:r,header:o,parent_header:l,metadata:c,content:d,buffers:p},t},a.serializeV1KernelWebsocketJupyterOrg=function(e){let t=JSON.stringify(e.header),n=null==e.parent_header?"{}":JSON.stringify(e.parent_header),i=JSON.stringify(e.metadata),s=JSON.stringify(e.content),a=void 0!==e.buffers?e.buffers:[],r=5+a.length+1,o=[];o.push(8*(1+r)),o.push(e.channel.length+o[o.length-1]);let l=new TextEncoder,c=l.encode(e.channel),d=l.encode(t),p=l.encode(n),h=l.encode(i),u=l.encode(s),m=new Uint8Array(c.length+d.length+p.length+h.length+u.length);m.set(c),m.set(d,c.length),m.set(p,c.length+d.length),m.set(h,c.length+d.length+p.length),m.set(u,c.length+d.length+p.length+h.length);for(let e of[d.length,p.length,h.length,u.length])o.push(e+o[o.length-1]);let g=0;for(let e of a){let t=e.byteLength;o.push(t+o[o.length-1]),g+=t}let f=new Uint8Array(8*(1+r)+m.byteLength+g),v=new ArrayBuffer(8),_=new DataView(v);_.setBigUint64(0,BigInt(r),!0),f.set(new Uint8Array(v),0);for(let e=0;e<o.length;e++)_.setBigUint64(0,BigInt(o[e]),!0),f.set(new Uint8Array(v),8*(e+1));f.set(m,o[0]);for(let e=0;e<a.length;e++){let t=a[e];f.set(new Uint8Array(ArrayBuffer.isView(t)?t.buffer:t),o[5+e])}return f.buffer},a.deserializeDefault=function(e){let t;return t="string"==typeof e?JSON.parse(e):function(e){let t=new DataView(e),n=t.getUint32(0),i=[];if(n<2)throw new Error("Invalid incoming Kernel Message");for(let e=1;e<=n;e++)i.push(t.getUint32(4*e));let s=new Uint8Array(e.slice(i[0],i[1])),a=JSON.parse(new TextDecoder("utf8").decode(s));a.buffers=[];for(let t=1;t<n;t++){let n=i[t],s=i[t+1]||e.byteLength;a.buffers.push(new DataView(e.slice(n,s)))}return a}(e),t},a.serializeDefault=function(e){var t;let n;return n=null!==(t=e.buffers)&&void 0!==t&&t.length?function(e){let t=[],n=[],i=new TextEncoder,s=[];void 0!==e.buffers&&(s=e.buffers,delete e.buffers);let a=i.encode(JSON.stringify(e));n.push(a.buffer);for(let e=0;e<s.length;e++){let t=s[e];n.push(ArrayBuffer.isView(t)?t.buffer:t)}let r=n.length;t.push(4*(r+1));for(let e=0;e+1<n.length;e++)t.push(t[t.length-1]+n[e].byteLength);let o=new Uint8Array(t[t.length-1]+n[n.length-1].byteLength),l=new DataView(o.buffer);l.setUint32(0,r);for(let e=0;e<t.length;e++)l.setUint32(4*(e+1),t[e]);for(let e=0;e<n.length;e++)o.set(new Uint8Array(n[e]),t[e]);return o.buffer}(e):JSON.stringify(e),n}})),dr=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=WebSocket})),de=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ServerConnection=void 0;var t,n,i,s,a=J(),r=cr();t="undefined"==typeof window?dr():WebSocket,function(e){e.makeSettings=function(e){return i.makeSettings(e)},e.makeRequest=function(e,t,n){return i.handleRequest(e,t,n)};class t extends Error{static async create(e){try{let n=await e.json(),{message:i,traceback:s}=n;return s&&console.error(s),new t(e,null!=i?i:t._defaultMessage(e),null!=s?s:"")}catch(n){return console.debug(n),new t(e)}}constructor(e,n=t._defaultMessage(e),i=""){super(n),this.response=e,this.traceback=i}static _defaultMessage(e){return`Invalid response: ${e.status} ${e.statusText}`}}e.ResponseError=t;class n extends TypeError{constructor(e){super(e.message),this.stack=e.stack}}e.NetworkError=n}(n||(e.ServerConnection=n={})),(s=i||(i={})).makeSettings=function(e={}){var n;let i=a.PageConfig.getBaseUrl(),s=a.PageConfig.getWsUrl(),o=a.URLExt.normalize(e.baseUrl)||i,l=e.wsUrl;!l&&o===i&&(l=s),!l&&0===o.indexOf("http")&&(l="ws"+o.slice(4)),l=null!=l?l:s;let c,d=a.PageConfig.getOption("appendToken").toLowerCase();return c=""===d?"undefined"==typeof window||void 0!==process&&void 0!==(null===(n=null==process?void 0:process.env)||void 0===n?void 0:n.JEST_WORKER_ID)||a.URLExt.getHostName(i)!==a.URLExt.getHostName(l):"true"===d,{init:{cache:"no-store",credentials:"same-origin"},fetch,Headers,Request,WebSocket:t,token:a.PageConfig.getToken(),appUrl:a.PageConfig.getOption("appUrl"),appendToken:c,serializer:{serialize:r.serialize,deserialize:r.deserialize},...e,baseUrl:o,wsUrl:l}},s.handleRequest=function(e,t,i){var s;if(0!==e.indexOf(i.baseUrl))throw new Error("Can only be used for notebook server requests");"no-store"===(null!==(s=t.cache)&&void 0!==s?s:i.init.cache)&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());let a=new i.Request(e,{...i.init,...t}),r=!1;if(i.token&&(r=!0,a.headers.append("Authorization",`token ${i.token}`)),"undefined"!=typeof document){let e=function(e){let t="";try{t=document.cookie}catch{return}let n=t.match("\\b_xsrf=([^;]*)\\b");return null==n?void 0:n[1]}();void 0!==e&&(r=!0,a.headers.append("X-XSRFToken",e))}return!a.headers.has("Content-Type")&&r&&a.headers.set("Content-Type","application/json"),i.fetch.call(null,a).catch((e=>{throw new n.NetworkError(e)}))}})),Ye=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseManager=void 0;var t=Z(),n=de();e.BaseManager=class{constructor(e){var i;this._isDisposed=!1,this._disposed=new t.Signal(this),this.serverSettings=null!==(i=e.serverSettings)&&void 0!==i?i:n.ServerConnection.makeSettings()}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}get isActive(){return!0}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(void 0),t.Signal.clearData(this))}}})),fr=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigWithDefaults=e.ConfigSection=e.ConfigSectionManager=void 0;var t,n=J(),i=je();e.ConfigSectionManager=class{constructor(e){var t;this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings()}async create(e){let t=new s({...e,serverSettings:this.serverSettings});return await t.load(),t}},function(e){let t;e.create=async function(e){if(!t){let t=new s(e);return await t.load(),t}return await t.create(e)},e._setConfigSectionManager=function(e){if(t)throw new Error("ConfigSectionManager already set. If you would like to create a config section, use the `IConfigSectionManager` token in a plugin.");t=e}}(t||(e.ConfigSection=t={}));var s=class{constructor(e){var t;this._url="unknown";let s=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings();this._url=n.URLExt.join(s.baseUrl,"api/config",encodeURIComponent(e.name))}get data(){return this._data}async load(){let e=await i.ServerConnection.makeRequest(this._url,{},this.serverSettings);if(200!==e.status)throw await i.ServerConnection.ResponseError.create(e);this._data=await e.json()}async update(e){this._data={...this._data,...e};let t={method:"PATCH",body:JSON.stringify(e)},n=await i.ServerConnection.makeRequest(this._url,t,this.serverSettings);if(200!==n.status)throw await i.ServerConnection.ResponseError.create(n);return this._data=await n.json(),this._data}};e.ConfigWithDefaults=class{constructor(e){var t,n;this._className="",this._section=e.section,this._defaults=null!==(t=e.defaults)&&void 0!==t?t:{},this._className=null!==(n=e.className)&&void 0!==n?n:""}get(e){let t=this._classData();return e in t?t[e]:this._defaults[e]}set(e,t){let n={};if(n[e]=t,this._className){let e={};return e[this._className]=n,this._section.update(e)}return this._section.update(n)}_classData(){let e=this._section.data;return this._className&&this._className in e?e[this._className]:e}}})),mr=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionStatus=void 0,e.ConnectionStatus=class{constructor(){this.isConnected=!0}}})),dn=E(((e,t)=>{var n,i;n=e,i=function(e,t){class n{constructor(e){this._fn=e}get isDisposed(){return!this._fn}dispose(){if(!this._fn)return;let e=this._fn;this._fn=null,e()}}class i{constructor(){this._isDisposed=!1,this._items=new Set}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._items.forEach((e=>{e.dispose()})),this._items.clear())}contains(e){return this._items.has(e)}add(e){this._items.add(e)}remove(e){this._items.delete(e)}clear(){this._items.clear()}}var s;(s=i||(i={})).from=function(e){let t=new s;for(let n of e)t.add(n);return t};class a extends i{constructor(){super(...arguments),this._disposed=new t.Signal(this)}get disposed(){return this._disposed}dispose(){this.isDisposed||(super.dispose(),this._disposed.emit(void 0),t.Signal.clearData(this))}}(function(e){e.from=function(t){let n=new e;for(let e of t)n.add(e);return n}})(a||(a={})),e.DisposableDelegate=n,e.DisposableSet=i,e.ObservableDisposableDelegate=class extends n{constructor(){super(...arguments),this._disposed=new t.Signal(this)}get disposed(){return this._disposed}dispose(){this.isDisposed||(super.dispose(),this._disposed.emit(void 0),t.Signal.clearData(this))}},e.ObservableDisposableSet=a},"object"==typeof e&&void 0!==t?i(e,Z()):"function"==typeof define&&__webpack_require__.amdO?define(["exports","@lumino/signaling"],i):i((n="undefined"!=typeof globalThis?globalThis:n||self).lumino_disposable={},n.lumino_signaling)})),ht=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateProperty=function(e,t,n,i=[]){if(!e.hasOwnProperty(t))throw Error(`Missing property '${t}'`);let s=e[t];if(void 0!==n){let e=!0;switch(n){case"array":e=Array.isArray(s);break;case"object":e=void 0!==s;break;default:e=typeof s===n}if(!e)throw new Error(`Property '${t}' is not of type '${n}'`);if(i.length>0){let e=!0;switch(n){case"string":case"number":case"boolean":e=i.includes(s);break;default:e=i.findIndex((e=>e===s))>=0}if(!e)throw new Error(`Property '${t}' is not one of the valid values ${JSON.stringify(i)}`)}}}})),_r=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateContentsModel=function(e){(0,t.validateProperty)(e,"name","string"),(0,t.validateProperty)(e,"path","string"),(0,t.validateProperty)(e,"type","string"),(0,t.validateProperty)(e,"created","string"),(0,t.validateProperty)(e,"last_modified","string"),(0,t.validateProperty)(e,"mimetype","object"),(0,t.validateProperty)(e,"content","object"),(0,t.validateProperty)(e,"format","object")},e.validateCheckpointModel=function(e){(0,t.validateProperty)(e,"id","string"),(0,t.validateProperty)(e,"last_modified","string")};var t=ht()})),yi=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&t(i,e,s);return n(i,e),i};Object.defineProperty(e,"__esModule",{value:!0}),e.RestContentProvider=e.Drive=e.ContentsManager=e.Contents=void 0;var s,a,r=J(),o=dn(),l=Z(),c=je(),d=i(_r());(a=s||(e.Contents=s={})).validateContentsModel=function(e){d.validateContentsModel(e)},a.validateCheckpointModel=function(e){d.validateCheckpointModel(e)},e.ContentsManager=class{constructor(e={}){var t,n;this._isDisposed=!1,this._additionalDrives=new Map,this._fileChanged=new l.Signal(this);let i=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:c.ServerConnection.makeSettings();this._defaultDrive=null!==(n=e.defaultDrive)&&void 0!==n?n:new h({serverSettings:i}),this._defaultDrive.fileChanged.connect(this._onFileChanged,this)}get defaultDrive(){return this._defaultDrive}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,l.Signal.clearData(this))}addDrive(e){this._additionalDrives.set(e.name,e),e.fileChanged.connect(this._onFileChanged,this)}getSharedModelFactory(e,t){var n,i;let[s]=this._driveForPath(e),a=null===(n=s.contentProviderRegistry)||void 0===n?void 0:n.getProvider(null==t?void 0:t.contentProviderId);return null!=a&&a.sharedModelFactory?a.sharedModelFactory:null!==(i=s.sharedModelFactory)&&void 0!==i?i:null}localPath(e){let t=e.split("/"),n=t[0].split(":");return 1!==n.length&&this._additionalDrives.has(n[0])?r.PathExt.join(n.slice(1).join(":"),...t.slice(1)):r.PathExt.removeSlash(e)}normalize(e){let t=e.split(":");return 1===t.length?r.PathExt.normalize(e):`${t[0]}:${r.PathExt.normalize(t.slice(1).join(":"))}`}resolvePath(e,t){let n=this.driveName(e),i=this.localPath(e),s=r.PathExt.resolve("/",i,t);return n?`${n}:${s}`:s}driveName(e){let t=e.split("/")[0].split(":");return 1===t.length?"":this._additionalDrives.has(t[0])?t[0]:""}get(e,t){let[n,i]=this._driveForPath(e);return n.get(i,t).then((e=>{let t=[];if("directory"===e.type&&e.content){for(let i of e.content)t.push({...i,path:this._toGlobalPath(n,i.path)});return{...e,path:this._toGlobalPath(n,i),content:t,serverPath:e.path}}return{...e,path:this._toGlobalPath(n,i),serverPath:e.path}}))}getDownloadUrl(e){let[t,n]=this._driveForPath(e);return t.getDownloadUrl(n)}newUntitled(e={}){if(e.path){let t=this.normalize(e.path),[n,i]=this._driveForPath(t);return n.newUntitled({...e,path:i}).then((e=>({...e,path:r.PathExt.join(t,e.name),serverPath:e.path})))}return this._defaultDrive.newUntitled(e)}delete(e){let[t,n]=this._driveForPath(e);return t.delete(n)}rename(e,t){let[n,i]=this._driveForPath(e),[s,a]=this._driveForPath(t);if(n!==s)throw Error("ContentsManager: renaming files must occur within a Drive");return n.rename(i,a).then((e=>({...e,path:this._toGlobalPath(n,a),serverPath:e.path})))}save(e,t={}){let n=this.normalize(e),[i,s]=this._driveForPath(e);return i.save(s,{...t,path:s}).then((e=>({...e,path:n,serverPath:e.path})))}copy(e,t){let[n,i]=this._driveForPath(e),[s,a]=this._driveForPath(t);if(n===s)return n.copy(i,a).then((e=>({...e,path:this._toGlobalPath(n,e.path),serverPath:e.path})));throw Error("Copying files between drives is not currently implemented")}createCheckpoint(e){let[t,n]=this._driveForPath(e);return t.createCheckpoint(n)}listCheckpoints(e){let[t,n]=this._driveForPath(e);return t.listCheckpoints(n)}restoreCheckpoint(e,t){let[n,i]=this._driveForPath(e);return n.restoreCheckpoint(i,t)}deleteCheckpoint(e,t){let[n,i]=this._driveForPath(e);return n.deleteCheckpoint(i,t)}_toGlobalPath(e,t){return e===this._defaultDrive?r.PathExt.removeSlash(t):`${e.name}:${r.PathExt.removeSlash(t)}`}_driveForPath(e){let t=this.driveName(e),n=this.localPath(e);return t?[this._additionalDrives.get(t),n]:[this._defaultDrive,n]}_onFileChanged(e,t){var n,i;if(e===this._defaultDrive)this._fileChanged.emit(t);else{let s=null,a=null;!(null===(n=t.newValue)||void 0===n)&&n.path&&(s={...t.newValue,path:this._toGlobalPath(e,t.newValue.path)}),!(null===(i=t.oldValue)||void 0===i)&&i.path&&(a={...t.oldValue,path:this._toGlobalPath(e,t.oldValue.path)}),this._fileChanged.emit({type:t.type,newValue:s,oldValue:a})}}};var p,h=class{constructor(e={}){var t,n,i;this._isDisposed=!1,this._fileChanged=new l.Signal(this),this.name=null!==(t=e.name)&&void 0!==t?t:"Default",this._apiEndpoint=null!==(n=e.apiEndpoint)&&void 0!==n?n:"api/contents",this.serverSettings=null!==(i=e.serverSettings)&&void 0!==i?i:c.ServerConnection.makeSettings();let s=new m({apiEndpoint:this._apiEndpoint,serverSettings:this.serverSettings});this.contentProviderRegistry=new u({defaultProvider:s}),this.contentProviderRegistry.fileChanged.connect(((e,t)=>{this._fileChanged.emit(t)}))}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,l.Signal.clearData(this))}async get(e,t){return this.contentProviderRegistry.getProvider(null==t?void 0:t.contentProviderId).get(e,t)}getDownloadUrl(e){let t=this.serverSettings.baseUrl,n=r.URLExt.join(t,"files",r.URLExt.encodeParts(e)),i="";try{i=document.cookie}catch{}let s=i.match("\\b_xsrf=([^;]*)\\b");if(s){let e=new URL(n);e.searchParams.append("_xsrf",s[1]),n=e.toString()}return Promise.resolve(n)}async newUntitled(e={}){var t;let n="{}";e&&(e.ext&&(e.ext=p.normalizeExtension(e.ext)),n=JSON.stringify(e));let i=this.serverSettings,s=this._getUrl(null!==(t=e.path)&&void 0!==t?t:""),a={method:"POST",body:n},r=await c.ServerConnection.makeRequest(s,a,i);if(201!==r.status)throw await c.ServerConnection.ResponseError.create(r);let o=await r.json();return d.validateContentsModel(o),this._fileChanged.emit({type:"new",oldValue:null,newValue:o}),o}async delete(e){let t=this._getUrl(e),n=this.serverSettings,i=await c.ServerConnection.makeRequest(t,{method:"DELETE"},n);if(204!==i.status)throw await c.ServerConnection.ResponseError.create(i);this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async rename(e,t){let n=this.serverSettings,i=this._getUrl(e),s={method:"PATCH",body:JSON.stringify({path:t})},a=await c.ServerConnection.makeRequest(i,s,n);if(200!==a.status)throw await c.ServerConnection.ResponseError.create(a);let r=await a.json();return d.validateContentsModel(r),this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:r}),r}async save(e,t={}){let n=await this.contentProviderRegistry.getProvider(null==t?void 0:t.contentProviderId).save(e,t);return this._fileChanged.emit({type:"save",oldValue:null,newValue:n}),n}async copy(e,t){let n=this.serverSettings,i=this._getUrl(t),s={method:"POST",body:JSON.stringify({copy_from:e})},a=await c.ServerConnection.makeRequest(i,s,n);if(201!==a.status)throw await c.ServerConnection.ResponseError.create(a);let r=await a.json();return d.validateContentsModel(r),this._fileChanged.emit({type:"new",oldValue:null,newValue:r}),r}async createCheckpoint(e){let t=this._getUrl(e,"checkpoints"),n=await c.ServerConnection.makeRequest(t,{method:"POST"},this.serverSettings);if(201!==n.status)throw await c.ServerConnection.ResponseError.create(n);let i=await n.json();return d.validateCheckpointModel(i),i}async listCheckpoints(e){let t=this._getUrl(e,"checkpoints"),n=await c.ServerConnection.makeRequest(t,{},this.serverSettings);if(200!==n.status)throw await c.ServerConnection.ResponseError.create(n);let i=await n.json();if(!Array.isArray(i))throw new Error("Invalid Checkpoint list");for(let e=0;e<i.length;e++)d.validateCheckpointModel(i[e]);return i}async restoreCheckpoint(e,t){let n=this._getUrl(e,"checkpoints",t),i=await c.ServerConnection.makeRequest(n,{method:"POST"},this.serverSettings);if(204!==i.status)throw await c.ServerConnection.ResponseError.create(i)}async deleteCheckpoint(e,t){let n=this._getUrl(e,"checkpoints",t),i=await c.ServerConnection.makeRequest(n,{method:"DELETE"},this.serverSettings);if(204!==i.status)throw await c.ServerConnection.ResponseError.create(i)}_getUrl(...e){let t=e.map((e=>r.URLExt.encodeParts(e))),n=this.serverSettings.baseUrl;return r.URLExt.join(n,this._apiEndpoint,...t)}};e.Drive=h,function(e){e.normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e}}(p||(p={}));var u=class{constructor(e){this._providers=new Map,this._fileChanged=new l.Signal(this),this.register("default",e.defaultProvider),this._defaultProvider=e.defaultProvider}register(e,t){if(this._providers.has(e))throw Error(`Provider with ${e} identifier was already registered on this drive`);this._providers.set(e,t);let n=(e,t)=>{this._fileChanged.emit(t)};return t.fileChanged&&t.fileChanged.connect(n),new o.DisposableDelegate((()=>{t.fileChanged&&t.fileChanged.disconnect(n),this._providers.has(e)&&this._providers.delete(e)}))}getProvider(e){if(!e)return this._defaultProvider;let t=this._providers.get(e);if(!t)throw Error(`Provider ${e} is not registered`);return t}get fileChanged(){return this._fileChanged}},m=class{constructor(e){this._options=e}async get(e,t){let n=this._getUrl(e);if(t){"notebook"===t.type&&delete t.format;let e=t.content?"1":"0",i=t.hash?"1":"0",s={...t,content:e,hash:i};n+=r.URLExt.objectToQueryString(s)}let i=this._options.serverSettings,s=await c.ServerConnection.makeRequest(n,{},i);if(200!==s.status)throw await c.ServerConnection.ResponseError.create(s);let a=await s.json();return d.validateContentsModel(a),a}async save(e,t={}){let n=this._options.serverSettings,i=this._getUrl(e),s={method:"PUT",body:JSON.stringify(t)},a=await c.ServerConnection.makeRequest(i,s,n);if(200!==a.status&&201!==a.status)throw await c.ServerConnection.ResponseError.create(a);let r=await a.json();return d.validateContentsModel(r),r}_getUrl(...e){let t=e.map((e=>r.URLExt.encodeParts(e))),n=this._options.serverSettings.baseUrl;return r.URLExt.join(n,this._options.apiEndpoint,...t)}};e.RestContentProvider=m})),Xe=E(((e,t)=>{var n,i;n=e,i=function(e,t,n){class i{constructor(e){var i;this._disposed=new n.Signal(this),this._lingered=0,this._tick=new t.PromiseDelegate,this._ticked=new n.Signal(this),this._factory=e.factory,this._linger=null!==(i=e.linger)&&void 0!==i?i:a.DEFAULT_LINGER,this._standby=e.standby||a.DEFAULT_STANDBY,this._state={...a.DEFAULT_STATE,timestamp:(new Date).getTime()};let s=e.frequency||{},r=Math.max(s.interval||0,s.max||0,a.DEFAULT_FREQUENCY.max);this.frequency={...a.DEFAULT_FREQUENCY,...s,max:r},this.name=e.name||a.DEFAULT_NAME,(!("auto"in e)||e.auto)&&setTimeout((()=>this.start()))}get disposed(){return this._disposed}get frequency(){return this._frequency}set frequency(e){if(this.isDisposed||t.JSONExt.deepEqual(e,this.frequency||{}))return;let{backoff:n,interval:s,max:a}=e;if(s=Math.round(s),a=Math.round(a),"number"==typeof n&&n<1)throw new Error("Poll backoff growth factor must be at least 1");if((s<0||s>a)&&s!==i.NEVER)throw new Error("Poll interval must be between 0 and max");if(a>i.MAX_INTERVAL&&a!==i.NEVER)throw new Error(`Max interval must be less than ${i.MAX_INTERVAL}`);this._frequency={backoff:n,interval:s,max:a}}get isDisposed(){return"disposed"===this.state.phase}get standby(){return this._standby}set standby(e){this.isDisposed||this.standby===e||(this._standby=e)}get state(){return this._state}get tick(){return this._tick.promise}get ticked(){return this._ticked}async*[Symbol.asyncIterator](){for(;!this.isDisposed;)yield this.state,await this.tick.catch((()=>{}))}dispose(){this.isDisposed||(this._state={...a.DISPOSED_STATE,timestamp:(new Date).getTime()},this._tick.promise.catch((e=>{})),this._tick.reject(new Error(`Poll (${this.name}) is disposed.`)),this._disposed.emit(void 0),n.Signal.clearData(this))}refresh(){return this.schedule({cancel:({phase:e})=>"refreshed"===e,interval:i.IMMEDIATE,phase:"refreshed"})}async schedule(e={}){if(this.isDisposed||e.cancel&&e.cancel(this.state))return;let n=this._tick,s=new t.PromiseDelegate,a={interval:this.frequency.interval,payload:null,phase:"standby",timestamp:(new Date).getTime(),...e};this._state=a,this._tick=s,clearTimeout(this._timeout),this._ticked.emit(this.state),n.resolve(this),await n.promise,a.interval!==i.NEVER?this._timeout=setTimeout((()=>{this.isDisposed||this.tick!==s.promise||this._execute()}),a.interval):this._timeout=void 0}start(){return this.schedule({cancel:({phase:e})=>"constructed"!==e&&"standby"!==e&&"stopped"!==e,interval:i.IMMEDIATE,phase:"started"})}stop(){return this.schedule({cancel:({phase:e})=>"stopped"===e,interval:i.NEVER,phase:"stopped"})}get hidden(){return a.hidden}_execute(){let e="function"==typeof this.standby?this.standby():this.standby;if("never"===e?e=!1:"when-hidden"===e&&(this.hidden?e=++this._lingered>this._linger:(this._lingered=0,e=!1)),e)return void this.schedule();let t=this.tick;this._factory(this.state).then((e=>{this.isDisposed||this.tick!==t||this.schedule({payload:e,phase:"rejected"===this.state.phase?"reconnected":"resolved"})})).catch((e=>{this.isDisposed||this.tick!==t||this.schedule({interval:a.sleep(this.frequency,this.state),payload:e,phase:"rejected"})}))}}var s,a;(s=i||(i={})).IMMEDIATE=0,s.MAX_INTERVAL=2147483647,s.NEVER=1/0,function(e){e.DEFAULT_BACKOFF=3,e.DEFAULT_FREQUENCY={backoff:!0,interval:1e3,max:3e4},e.DEFAULT_LINGER=1,e.DEFAULT_NAME="unknown",e.DEFAULT_STANDBY="when-hidden",e.DEFAULT_STATE={interval:i.NEVER,payload:null,phase:"constructed",timestamp:new Date(0).getTime()},e.DISPOSED_STATE={interval:i.NEVER,payload:null,phase:"disposed",timestamp:new Date(0).getTime()},e.sleep=function(t,n){let{backoff:s,interval:a,max:r}=t;if(a===i.NEVER)return a;let o=!0===s?e.DEFAULT_BACKOFF:!1===s?1:s,l=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}(a,n.interval*o);return Math.min(r,l)},e.hidden="undefined"!=typeof document&&(document.addEventListener("visibilitychange",(()=>{e.hidden="hidden"===document.visibilityState})),document.addEventListener("pagehide",(()=>{e.hidden="hidden"===document.visibilityState})),"hidden"===document.visibilityState)}(a||(a={}));class r{constructor(e,n=500){this.args=void 0,this.payload=null,this.limit=n,this.poll=new i({auto:!1,factory:async()=>{let{args:t}=this;return this.args=void 0,e(...t)},frequency:{backoff:!1,interval:i.NEVER,max:i.NEVER},standby:"never"}),this.payload=new t.PromiseDelegate,this.poll.ticked.connect(((e,n)=>{let{payload:i}=this;return"resolved"===n.phase?(this.payload=new t.PromiseDelegate,void i.resolve(n.payload)):"rejected"===n.phase||"stopped"===n.phase?(this.payload=new t.PromiseDelegate,i.promise.catch((e=>{})),void i.reject(n.payload)):void 0}),this)}get isDisposed(){return null===this.payload}dispose(){this.isDisposed||(this.args=void 0,this.payload=null,this.poll.dispose())}async stop(){return this.poll.stop()}}e.Debouncer=class extends r{invoke(...e){return this.args=e,this.poll.schedule({interval:this.limit,phase:"invoked"}),this.payload.promise}},e.Poll=i,e.RateLimiter=r,e.Throttler=class extends r{constructor(e,t){super(e,"number"==typeof t?t:t&&t.limit),this._trailing=!1,"number"!=typeof t&&t&&"trailing"===t.edge&&(this._trailing=!0),this._interval=this._trailing?this.limit:i.IMMEDIATE}invoke(...e){let t="invoked"!==this.poll.state.phase;return(t||this._trailing)&&(this.args=e),t&&this.poll.schedule({interval:this._interval,phase:"invoked"}),this.payload.promise}}},"object"==typeof e&&void 0!==t?i(e,te(),Z()):"function"==typeof define&&__webpack_require__.amdO?define(["exports","@lumino/coreutils","@lumino/signaling"],i):i((n="undefined"!=typeof globalThis?globalThis:n||self).lumino_polling={},n.lumino_coreutils,n.lumino_signaling)})),bi=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EventManager=void 0;var t=J(),n=Xe(),i=Z(),s=de(),a="api/events";e.EventManager=class{constructor(e={}){var t,a;this._socket=null,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:s.ServerConnection.makeSettings(),this._poll=new n.Poll({factory:()=>this._subscribe(),standby:null!==(a=e.standby)&&void 0!==a?a:"when-hidden"}),this._stream=new i.Stream(this),this._poll.start()}get isDisposed(){return this._poll.isDisposed}get stream(){return this._stream}dispose(){if(this.isDisposed)return;this._poll.dispose();let e=this._socket;e&&(this._socket=null,e.onopen=()=>{},e.onerror=()=>{},e.onmessage=()=>{},e.onclose=()=>{},e.close()),i.Signal.clearData(this),this._stream.stop()}async emit(e){let{serverSettings:n}=this,{baseUrl:i}=n,{makeRequest:r,ResponseError:o}=s.ServerConnection,l=t.URLExt.join(i,a),c={body:JSON.stringify(e),method:"POST"},d=await r(l,c,n);if(204!==d.status)throw new o(d)}_subscribe(){return new Promise(((e,n)=>{if(this.isDisposed)return;let{appendToken:i,token:s,WebSocket:r,wsUrl:o}=this.serverSettings,l=t.URLExt.join(o,a,"subscribe");i&&""!==s&&(l+=`?token=${encodeURIComponent(s)}`);let c=this._socket=new r(l),d=this._stream;c.onclose=()=>n(new Error("EventManager socket closed")),c.onmessage=e=>e.data&&d.emit(JSON.parse(e.data))}))}}})),Si=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&t(i,e,s);return n(i,e),i};Object.defineProperty(e,"__esModule",{value:!0}),e.CommHandler=e.CommsOverSubshells=void 0;var s,a,r=te(),o=dn(),l=i(st());(a=s||(e.CommsOverSubshells=s={})).Disabled="disabled",a.PerComm="perComm",a.PerCommTarget="perCommTarget";var c=class e extends o.DisposableDelegate{constructor(e,t,n,i,a){super(i),this._subshellStarted=new r.PromiseDelegate,this._subshellId=null,this._target="",this._id="",this._id=t,this._target=e,this._kernel=n,this._kernel.statusChanged.connect((()=>{"restarting"===this._kernel.status&&this._cleanSubshells()})),this.commsOverSubshells=null!=a?a:s.PerCommTarget}get commId(){return this._id}get targetName(){return this._target}get subshellId(){return this._subshellId}get subshellStarted(){return this._subshellStarted.promise}get commsOverSubshells(){return this._commsOverSubshells}set commsOverSubshells(e){this._commsOverSubshells=e,this._commsOverSubshells===s.Disabled?this._maybeCloseSubshell():this._maybeStartSubshell()}get onClose(){return this._onClose}set onClose(e){this._onClose=e}get onMsg(){return this._onMsg}set onMsg(e){this._onMsg=e}open(e,t,n=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot open");let i=l.createMessage({msgType:"comm_open",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,subshellId:this._subshellId||this._kernel.subshellId,content:{comm_id:this._id,target_name:this._target,data:null!=e?e:{}},metadata:t,buffers:n});return this._kernel.sendShellMessage(i,!1,!0)}send(e,t,n=[],i=!0){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot send");let s=l.createMessage({msgType:"comm_msg",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,subshellId:this._subshellId||this._kernel.subshellId,content:{comm_id:this._id,data:e},metadata:t,buffers:n});return this._kernel.sendShellMessage(s,!1,i)}close(e,t,n=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot close");let i=l.createMessage({msgType:"comm_close",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,subshellId:this._subshellId||this._kernel.subshellId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:n}),s=this._kernel.sendShellMessage(i,!1,!0),a=this._onClose;return a&&a(l.createMessage({msgType:"comm_close",channel:"iopub",username:this._kernel.username,session:this._kernel.clientId,subshellId:this._subshellId||this._kernel.subshellId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:n})),this.dispose(),s}dispose(){this._maybeCloseSubshell(),super.dispose()}_cleanSubshells(){e._commTargetSubShellsId={}}async _maybeStartSubshell(){if(await this._kernel.info,this._kernel.supportsSubshells){if(this._commsOverSubshells===s.PerComm){let e=await this._kernel.requestCreateSubshell({}).done;return this._subshellId=e.content.subshell_id,void this._subshellStarted.resolve()}e._commTargetSubShellsId[this._target]?(this._subshellId=await e._commTargetSubShellsId[this._target],this._subshellStarted.resolve()):(e._commTargetSubShellsId[this._target]=this._kernel.requestCreateSubshell({}).done.then((e=>(this._subshellId=e.content.subshell_id,this._subshellId))),await e._commTargetSubShellsId[this._target],this._subshellStarted.resolve())}}_maybeCloseSubshell(){this._commsOverSubshells===s.PerComm?(this._subshellId&&"dead"!==this._kernel.status&&this._kernel.requestDeleteSubshell({subshell_id:this._subshellId},!0),this._subshellId=null):this._subshellId=null}};e.CommHandler=c,c._commTargetSubShellsId={}})),kr=E((e=>{Object.defineProperty(e,"__esModule",{value:!0})})),vn=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateMessage=function(e){(0,t.validateProperty)(e,"metadata","object"),(0,t.validateProperty)(e,"content","object"),(0,t.validateProperty)(e,"channel","string"),function(e){for(let i=0;i<n.length;i++)(0,t.validateProperty)(e,n[i],"string")}(e.header),"iopub"===e.channel&&function(e){if("iopub"===e.channel){let n=i[e.header.msg_type];if(void 0===n)return;let s=Object.keys(n),a=e.content;for(let e=0;e<s.length;e++){let i=n[s[e]];Array.isArray(i)||(i=[i]),(0,t.validateProperty)(a,s[e],...i)}}}(e)},e.validateModel=s,e.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid kernel list");e.forEach((e=>s(e)))};var t=ht(),n=["username","version","session","msg_id","msg_type"],i={stream:{name:"string",text:"string"},display_data:{data:"object",metadata:"object"},execute_input:{code:"string",execution_count:"number"},execute_result:{execution_count:"number",data:"object",metadata:"object"},error:{ename:"string",evalue:"string",traceback:"object"},status:{execution_state:["string",["starting","idle","busy","restarting","dead"]]},clear_output:{wait:"boolean"},comm_open:{comm_id:"string",target_name:"string",data:"object"},comm_msg:{comm_id:"string",data:"object"},comm_close:{comm_id:"string"},shutdown_reply:{restart:"boolean"}};function s(e){(0,t.validateProperty)(e,"name","string"),(0,t.validateProperty)(e,"id","string")}})),wn=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KernelAPIClient=e.KERNEL_SERVICE_URL=void 0,e.listRunning=s,e.startNew=a,e.restartKernel=r,e.interruptKernel=o,e.shutdownKernel=l,e.getKernelModel=c;var t=de(),n=J(),i=vn();async function s(s=t.ServerConnection.makeSettings()){let a=n.URLExt.join(s.baseUrl,e.KERNEL_SERVICE_URL),r=await t.ServerConnection.makeRequest(a,{},s);if(200!==r.status)throw await t.ServerConnection.ResponseError.create(r);let o=await r.json();return(0,i.validateModels)(o),o}async function a(s={},a=t.ServerConnection.makeSettings()){let r=n.URLExt.join(a.baseUrl,e.KERNEL_SERVICE_URL),o={method:"POST",body:JSON.stringify(s)},l=await t.ServerConnection.makeRequest(r,o,a);if(201!==l.status)throw await t.ServerConnection.ResponseError.create(l);let c=await l.json();return(0,i.validateModel)(c),c}async function r(s,a=t.ServerConnection.makeSettings()){let r=n.URLExt.join(a.baseUrl,e.KERNEL_SERVICE_URL,encodeURIComponent(s),"restart"),o=await t.ServerConnection.makeRequest(r,{method:"POST"},a);if(200!==o.status)throw await t.ServerConnection.ResponseError.create(o);let l=await o.json();(0,i.validateModel)(l)}async function o(i,s=t.ServerConnection.makeSettings()){let a=n.URLExt.join(s.baseUrl,e.KERNEL_SERVICE_URL,encodeURIComponent(i),"interrupt"),r=await t.ServerConnection.makeRequest(a,{method:"POST"},s);if(204!==r.status)throw await t.ServerConnection.ResponseError.create(r)}async function l(i,s=t.ServerConnection.makeSettings()){let a=n.URLExt.join(s.baseUrl,e.KERNEL_SERVICE_URL,encodeURIComponent(i)),r=await t.ServerConnection.makeRequest(a,{method:"DELETE"},s);if(404===r.status){let e=`The kernel "${i}" does not exist on the server`;console.warn(e)}else if(204!==r.status)throw await t.ServerConnection.ResponseError.create(r)}async function c(s,a=t.ServerConnection.makeSettings()){let r=n.URLExt.join(a.baseUrl,e.KERNEL_SERVICE_URL,encodeURIComponent(s)),o=await t.ServerConnection.makeRequest(r,{},a);if(404===o.status)return;if(200!==o.status)throw await t.ServerConnection.ResponseError.create(o);let l=await o.json();return(0,i.validateModel)(l),l}e.KERNEL_SERVICE_URL="api/kernels",e.KernelAPIClient=class{constructor(e={}){var n;this.serverSettings=null!==(n=e.serverSettings)&&void 0!==n?n:t.ServerConnection.makeSettings()}async listRunning(){return s(this.serverSettings)}async getModel(e){return c(e,this.serverSettings)}async startNew(e={}){return a(e,this.serverSettings)}async restart(e){return r(e,this.serverSettings)}async interrupt(e){return o(e,this.serverSettings)}async shutdown(e){return l(e,this.serverSettings)}}})),Tr=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&t(i,e,s);return n(i,e),i};Object.defineProperty(e,"__esModule",{value:!0}),e.KernelShellFutureHandler=e.KernelControlFutureHandler=e.KernelFutureHandler=void 0;var s,a=te(),r=dn(),o=i(st()),l=class extends r.DisposableDelegate{constructor(e,t,n,i,r){super(e),this._status=0,this._stdin=s.noOp,this._iopub=s.noOp,this._reply=s.noOp,this._done=new a.PromiseDelegate,this._hooks=new s.HookList,this._disposeOnDone=!0,this._msg=t,n||this._setFlag(s.KernelFutureFlag.GotReply),this._disposeOnDone=i,this._kernel=r}get msg(){return this._msg}get done(){return this._done.promise}get onReply(){return this._reply}set onReply(e){this._reply=e}get onIOPub(){return this._iopub}set onIOPub(e){this._iopub=e}get onStdin(){return this._stdin}set onStdin(e){this._stdin=e}registerMessageHook(e){if(this.isDisposed)throw new Error("Kernel future is disposed");this._hooks.add(e)}removeMessageHook(e){this.isDisposed||this._hooks.remove(e)}sendInputReply(e,t){this._kernel.sendInputReply(e,t)}dispose(){this._stdin=s.noOp,this._iopub=s.noOp,this._reply=s.noOp,this._hooks=null,this._testFlag(s.KernelFutureFlag.IsDone)||(this._done.promise.catch((()=>{})),this._done.reject(new Error(`Canceled future for ${this.msg.header.msg_type} message before replies were done`))),super.dispose()}async handleMsg(e){switch(e.channel){case"control":case"shell":e.channel===this.msg.channel&&e.parent_header.msg_id===this.msg.header.msg_id&&await this._handleReply(e);break;case"stdin":await this._handleStdin(e);break;case"iopub":await this._handleIOPub(e)}}async _handleReply(e){let t=this._reply;t&&await t(e),this._replyMsg=e,this._setFlag(s.KernelFutureFlag.GotReply),this._testFlag(s.KernelFutureFlag.GotIdle)&&this._handleDone()}async _handleStdin(e){this._kernel.hasPendingInput=!0;let t=this._stdin;t&&await t(e)}async _handleIOPub(e){let t=await this._hooks.process(e),n=this._iopub;t&&n&&await n(e),o.isStatusMsg(e)&&"idle"===e.content.execution_state&&(this._setFlag(s.KernelFutureFlag.GotIdle),this._testFlag(s.KernelFutureFlag.GotReply)&&this._handleDone())}_handleDone(){this._testFlag(s.KernelFutureFlag.IsDone)||(this._setFlag(s.KernelFutureFlag.IsDone),this._done.resolve(this._replyMsg),this._disposeOnDone&&this.dispose())}_testFlag(e){return 0!=(this._status&e)}_setFlag(e){this._status|=e}};e.KernelFutureHandler=l,e.KernelControlFutureHandler=class extends l{},e.KernelShellFutureHandler=class extends l{},function(e){e.noOp=()=>{};let t,n="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;var i;e.HookList=class{constructor(){this._hooks=[]}add(e){this.remove(e),this._hooks.push(e)}remove(e){let t=this._hooks.indexOf(e);t>=0&&(this._hooks[t]=null,this._scheduleCompact())}async process(e){await this._processing;let t,n=new a.PromiseDelegate;this._processing=n.promise;for(let i=this._hooks.length-1;i>=0;i--){let s=this._hooks[i];if(null!==s){try{t=await s(e)}catch(e){t=!0,console.error(e)}if(!1===t)return n.resolve(void 0),!1}}return n.resolve(void 0),!0}_scheduleCompact(){this._compactScheduled||(this._compactScheduled=!0,n((()=>{this._processing=this._processing.then((()=>{this._compactScheduled=!1,this._compact()}))})))}_compact(){let e=0;for(let t=0,n=this._hooks.length;t<n;t++){let n=this._hooks[t];null===this._hooks[t]?e++:this._hooks[t-e]=n}this._hooks.length-=e}},(i=t=e.KernelFutureFlag||(e.KernelFutureFlag={}))[i.GotReply=1]="GotReply",i[i.GotIdle=2]="GotIdle",i[i.IsDone=4]="IsDone",i[i.DisposeOnDone=8]="DisposeOnDone"}(s||(s={}))})),Ar=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateSpecModel=n,e.validateSpecModels=function(e){if(!e.hasOwnProperty("kernelspecs"))throw new Error("No kernelspecs found");let t=Object.keys(e.kernelspecs),i=Object.create(null),s=e.default;for(let s=0;s<t.length;s++){let a=e.kernelspecs[t[s]];try{i[t[s]]=n(a)}catch{console.warn(`Removing errant kernel spec: ${t[s]}`)}}if(t=Object.keys(i),!t.length)throw new Error("No valid kernelspecs found");return(!s||"string"!=typeof s||!(s in i))&&(s=t[0],console.warn(`Default kernel not found, using '${t[0]}'`)),{default:s,kernelspecs:i}};var t=ht();function n(e){let n=e.spec;if(!n)throw new Error("Invalid kernel spec");(0,t.validateProperty)(e,"name","string"),(0,t.validateProperty)(e,"resources","object"),(0,t.validateProperty)(n,"language","string"),(0,t.validateProperty)(n,"display_name","string"),(0,t.validateProperty)(n,"argv","array");let i=null;n.hasOwnProperty("metadata")&&((0,t.validateProperty)(n,"metadata","object"),i=n.metadata);let s=null;return n.hasOwnProperty("env")&&((0,t.validateProperty)(n,"env","object"),s=n.env),{name:e.name,resources:e.resources,language:n.language,display_name:n.display_name,argv:n.argv,metadata:i,env:s}}})),vt=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KernelSpecAPIClient=void 0,e.getSpecs=a;var t=de(),n=Ar(),i=J(),s="api/kernelspecs";async function a(e=t.ServerConnection.makeSettings()){let a=i.URLExt.join(e.baseUrl,s),r=await t.ServerConnection.makeRequest(a,{},e);if(200!==r.status)throw await t.ServerConnection.ResponseError.create(r);let o=await r.json();return(0,n.validateSpecModels)(o)}e.KernelSpecAPIClient=class{constructor(e={}){var n;this.serverSettings=null!==(n=e.serverSettings)&&void 0!==n?n:t.ServerConnection.makeSettings()}async get(){return a(this.serverSettings)}}})),Ei=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&t(i,e,s);return n(i,e),i};Object.defineProperty(e,"__esModule",{value:!0}),e.KernelConnection=void 0;var s,a,r=J(),o=te(),l=Z(),c=je(),d=Si(),p=i(st()),h=Tr(),u=i(vn()),m=wn(),g=vt(),f="_RESTARTING_";e.KernelConnection=class e{constructor(e){var t,n,i,a,d,h,f,v;this._createSocket=(e=!0)=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");let t=this.serverSettings,n=r.URLExt.join(t.wsUrl,m.KERNEL_SERVICE_URL,encodeURIComponent(this._id)),i=n.replace(/^((?:\w+:)?\/\/)(?:[^@\/]+@)/,"$1");console.debug(`Starting WebSocket: ${i}`);let a=r.URLExt.join(n,"channels?session_id="+encodeURIComponent(this._clientId)),o=t.token;t.appendToken&&""!==o&&(a+=`&token=${encodeURIComponent(o)}`);let l=e?this._supportedProtocols:[];this._ws=new t.WebSocket(a,l),this._ws.binaryType="arraybuffer";let d=!1,p=async e=>{var t,n;if(!this._isDisposed){this._reason="",this._model=void 0;try{let t=await this._kernelAPIClient.getModel(this._id);this._model=t,"dead"===(null==t?void 0:t.execution_state)?this._updateStatus("dead"):this._onWSClose(e)}catch(i){if(i instanceof c.ServerConnection.NetworkError||503===(null===(t=i.response)||void 0===t?void 0:t.status)||424===(null===(n=i.response)||void 0===n?void 0:n.status)){let t=1e3*s.getRandomIntInclusive(10,30);setTimeout(p,t,e)}else this._reason="Kernel died unexpectedly",this._updateStatus("dead")}}},h=async e=>{d||(d=!0,await p(e))};this._ws.onmessage=this._onWSMessage,this._ws.onopen=this._onWSOpen,this._ws.onclose=h,this._ws.onerror=h},this._onWSOpen=e=>{if(""!==this._ws.protocol&&!this._supportedProtocols.includes(this._ws.protocol))throw console.log("Server selected unknown kernel wire protocol:",this._ws.protocol),this._updateStatus("dead"),new Error(`Unknown kernel wire protocol:  ${this._ws.protocol}`);this._selectedProtocol=this._ws.protocol,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose,this._updateConnectionStatus("connected")},this._onWSMessage=e=>{let t;try{t=this.serverSettings.serializer.deserialize(e.data,this._ws.protocol),u.validateMessage(t)}catch(e){throw e.message=`Kernel message validation error: ${e.message}`,e}this._kernelSession=t.header.session,this._msgChain=this._msgChain.then((()=>this._handleMessage(t))).catch((e=>{e.message.startsWith("Canceled future for ")&&console.error(e)})),this._anyMessage.emit({msg:t,direction:"recv"})},this._onWSClose=e=>{this.isDisposed||this._reconnect()},this._id="",this._name="",this._status="unknown",this._connectionStatus="connecting",this._kernelSession="",this._isDisposed=!1,this._ws=null,this._username="",this._reconnectLimit=7,this._reconnectAttempt=0,this._reconnectTimeout=null,this._supportedProtocols=Object.values(p.supportedKernelWebSocketProtocols),this._selectedProtocol="",this._commsOverSubshells=c.CommsOverSubshells.PerCommTarget,this._futures=new Map,this._comms=new Map,this._targetRegistry=Object.create(null),this._info=new o.PromiseDelegate,this._pendingMessages=[],this._statusChanged=new l.Signal(this),this._connectionStatusChanged=new l.Signal(this),this._disposed=new l.Signal(this),this._iopubMessage=new l.Signal(this),this._anyMessage=new l.Signal(this),this._pendingInput=new l.Signal(this),this._unhandledMessage=new l.Signal(this),this._displayIdToParentIds=new Map,this._msgIdToDisplayIds=new Map,this._msgChain=Promise.resolve(),this._hasPendingInput=!1,this._reason="",this._noOp=()=>{},this._supportsSubshells=!1,this._name=e.model.name,this._id=e.model.id,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:c.ServerConnection.makeSettings(),this._kernelAPIClient=null!==(n=e.kernelAPIClient)&&void 0!==n?n:new m.KernelAPIClient({serverSettings:this.serverSettings}),this._kernelSpecAPIClient=null!==(i=e.kernelSpecAPIClient)&&void 0!==i?i:new g.KernelSpecAPIClient({serverSettings:this.serverSettings}),this._clientId=null!==(a=e.clientId)&&void 0!==a?a:o.UUID.uuid4(),this._username=null!==(d=e.username)&&void 0!==d?d:"",this.handleComms=null===(h=e.handleComms)||void 0===h||h,this._commsOverSubshells=null!==(f=e.commsOverSubshells)&&void 0!==f?f:c.CommsOverSubshells.PerCommTarget,this._subshellId=null!==(v=e.subshellId)&&void 0!==v?v:null,this._createSocket()}get disposed(){return this._disposed}get commsOverSubshells(){return this._commsOverSubshells}set commsOverSubshells(e){this._commsOverSubshells=e;for(let[t,n]of this._comms)n.commsOverSubshells=e}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get model(){return this._model||{id:this.id,name:this.name,reason:this._reason}}get anyMessage(){return this._anyMessage}get pendingInput(){return this._pendingInput}get id(){return this._id}get name(){return this._name}get username(){return this._username}get clientId(){return this._clientId}get subshellId(){return this._subshellId}set subshellId(e){this._subshellId=e}get status(){return this._status}get connectionStatus(){return this._connectionStatus}get isDisposed(){return this._isDisposed}get info(){return this._info.promise}get spec(){return this._specPromise||(this._specPromise=this._kernelSpecAPIClient.get().then((e=>e.kernelspecs[this._name]))),this._specPromise}get supportsSubshells(){return this._supportsSubshells}clone(t={}){return new e({model:this.model,username:this.username,serverSettings:this.serverSettings,handleComms:!1,kernelAPIClient:this._kernelAPIClient,commsOverSubshells:c.CommsOverSubshells.Disabled,...t})}dispose(){if(this.isDisposed)return;let e=()=>{this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearKernelState(),this._pendingMessages=[],this._clearSocket(),l.Signal.clearData(this)};null!==this._subshellId?this.requestDeleteSubshell({subshell_id:this._subshellId},!0).onReply=t=>{e()}:e()}sendShellMessage(e,t=!1,n=!0){return this._sendKernelShellControl(h.KernelShellFutureHandler,e,t,n)}sendControlMessage(e,t=!1,n=!0){return this._sendKernelShellControl(h.KernelControlFutureHandler,e,t,n)}_sendKernelShellControl(e,t,n=!1,i=!0){this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"});let s=new e((()=>{let e=t.header.msg_id;this._futures.delete(e);let n=this._msgIdToDisplayIds.get(e);n&&(n.forEach((t=>{let n=this._displayIdToParentIds.get(t);if(n){let i=n.indexOf(e);if(-1===i)return;1===n.length?this._displayIdToParentIds.delete(t):(n.splice(i,1),this._displayIdToParentIds.set(t,n))}})),this._msgIdToDisplayIds.delete(e))}),t,n,i,this);return this._futures.set(t.header.msg_id,s),s}_sendMessage(e,t=!0){if("dead"===this.status)throw new Error("Kernel is dead");if((""===this._kernelSession||this._kernelSession===f)&&p.isInfoRequestMsg(e)){if("connected"===this.connectionStatus)return void this._ws.send(this.serverSettings.serializer.serialize(e,this._ws.protocol));throw new Error("Could not send message: status is not connected")}if(t&&this._pendingMessages.length>0)this._pendingMessages.push(e);else if("connected"===this.connectionStatus&&this._kernelSession!==f)this._ws.send(this.serverSettings.serializer.serialize(e,this._ws.protocol));else{if(!t)throw new Error("Could not send message");this._pendingMessages.push(e)}}async interrupt(){if(this.hasPendingInput=!1,"dead"===this.status)throw new Error("Kernel is dead");return this._kernelAPIClient.interrupt(this.id)}async restart(){if("dead"===this.status)throw new Error("Kernel is dead");this._updateStatus("restarting"),this._clearKernelState(),this._kernelSession=f,await this._kernelAPIClient.restart(this.id),await this.reconnect(),this.hasPendingInput=!1}reconnect(){this._errorIfDisposed();let e=new o.PromiseDelegate,t=(n,i)=>{"connected"===i?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===i&&(e.reject(new Error("Kernel connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}async shutdown(){"dead"!==this.status&&await this._kernelAPIClient.shutdown(this.id),this.handleShutdown()}handleShutdown(){this._updateStatus("dead"),this.dispose()}async requestKernelInfo(){let e,t=p.createMessage({msgType:"kernel_info_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:{}});try{e=await s.handleShellMessage(this,t)}catch(e){if(this.isDisposed)return;throw e}if(this._errorIfDisposed(),!e)return;if(void 0===e.content.status&&(e.content.status="ok"),"ok"!==e.content.status)return this._info.reject("Kernel info reply errored"),e;this._info.resolve(e.content),this._kernelSession=e.header.session;let n=e.content.supported_features;return this._supportsSubshells=void 0!==n&&n.includes("kernel subshells"),e}requestComplete(e){let t=p.createMessage({msgType:"complete_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:e});return s.handleShellMessage(this,t)}requestInspect(e){let t=p.createMessage({msgType:"inspect_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:e});return s.handleShellMessage(this,t)}requestHistory(e){let t=p.createMessage({msgType:"history_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:e});return s.handleShellMessage(this,t)}requestExecute(e,t=!0,n){let i=p.createMessage({msgType:"execute_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1,...e},metadata:n});return this.sendShellMessage(i,!0,t)}requestDebug(e,t=!0){let n=p.createMessage({msgType:"debug_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(n,!0,t)}requestCreateSubshell(e,t=!0){if(!this.supportsSubshells)throw new Error("Kernel subshells are not supported");let n=p.createMessage({msgType:"create_subshell_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(n,!0,t)}requestDeleteSubshell(e,t=!0){if(!this.supportsSubshells)throw new Error("Kernel subshells are not supported");let n=p.createMessage({msgType:"delete_subshell_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(n,!0,t)}requestListSubshell(e,t=!0){if(!this.supportsSubshells)throw new Error("Kernel subshells are not supported");let n=p.createMessage({msgType:"list_subshell_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(n,!0,t)}requestIsComplete(e){let t=p.createMessage({msgType:"is_complete_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:e});return s.handleShellMessage(this,t)}requestCommInfo(e){let t=p.createMessage({msgType:"comm_info_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:e});return s.handleShellMessage(this,t)}sendInputReply(e,t){let n=p.createMessage({msgType:"input_reply",channel:"stdin",username:this._username,session:this._clientId,content:e});n.parent_header=t,this._sendMessage(n),this._anyMessage.emit({msg:n,direction:"send"}),this.hasPendingInput=!1}createComm(e,t=o.UUID.uuid4()){if(!this.handleComms)throw new Error("Comms are disabled on this kernel connection");if(this._comms.has(t))throw new Error("Comm is already created");let n=new d.CommHandler(e,t,this,(()=>{this._unregisterComm(t)}),this._commsOverSubshells);return this._comms.set(t,n),n}hasComm(e){return this._comms.has(e)}registerCommTarget(e,t){this.handleComms&&(this._targetRegistry[e]=t)}removeCommTarget(e,t){this.handleComms&&!this.isDisposed&&this._targetRegistry[e]===t&&delete this._targetRegistry[e]}registerMessageHook(e,t){var n;let i=null===(n=this._futures)||void 0===n?void 0:n.get(e);i&&i.registerMessageHook(t)}removeMessageHook(e,t){var n;let i=null===(n=this._futures)||void 0===n?void 0:n.get(e);i&&i.removeMessageHook(t)}removeInputGuard(){this.hasPendingInput=!1}async _handleDisplayId(e,t){var n,i;let s=t.parent_header.msg_id,a=this._displayIdToParentIds.get(e);if(a){let e={header:o.JSONExt.deepCopy(t.header),parent_header:o.JSONExt.deepCopy(t.parent_header),metadata:o.JSONExt.deepCopy(t.metadata),content:o.JSONExt.deepCopy(t.content),channel:t.channel,buffers:t.buffers?t.buffers.slice():[]};e.header.msg_type="update_display_data",await Promise.all(a.map((async t=>{let n=this._futures&&this._futures.get(t);n&&await n.handleMsg(e)})))}if("update_display_data"===t.header.msg_type)return!0;a=null!==(n=this._displayIdToParentIds.get(e))&&void 0!==n?n:[],-1===a.indexOf(s)&&a.push(s),this._displayIdToParentIds.set(e,a);let r=null!==(i=this._msgIdToDisplayIds.get(s))&&void 0!==i?i:[];return-1===r.indexOf(s)&&r.push(s),this._msgIdToDisplayIds.set(s,r),!1}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}_updateStatus(e){this._status===e||"dead"===this._status||(this._status=e,s.logKernelStatus(this),this._statusChanged.emit(e),"dead"===e&&this.dispose())}_sendPending(){for(;"connected"===this.connectionStatus&&this._kernelSession!==f&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}_clearKernelState(){this._kernelSession="",this._pendingMessages=[],this._futures.forEach((e=>{e.dispose()})),this._comms.forEach((e=>{e.dispose()})),this._msgChain=Promise.resolve(),this._futures=new Map,this._comms=new Map,this._displayIdToParentIds.clear(),this._msgIdToDisplayIds.clear()}_assertCurrentMessage(e){if(this._errorIfDisposed(),e.header.session!==this._kernelSession)throw new Error(`Canceling handling of old message: ${e.header.msg_type}`)}async _handleCommOpen(e){this._assertCurrentMessage(e);let t=e.content,n=new d.CommHandler(t.target_name,t.comm_id,this,(()=>{this._unregisterComm(t.comm_id)}),this.commsOverSubshells);this._comms.set(t.comm_id,n);try{await(await s.loadObject(t.target_name,t.target_module,this._targetRegistry))(n,e)}catch(e){throw n.close(),console.error("Exception opening new comm"),e}}async _handleCommClose(e){this._assertCurrentMessage(e);let t=e.content,n=this._comms.get(t.comm_id);if(!n)return void console.error("Comm not found for comm id "+t.comm_id);this._unregisterComm(n.commId);let i=n.onClose;i&&await i(e),n.dispose()}async _handleCommMsg(e){this._assertCurrentMessage(e);let t=e.content,n=this._comms.get(t.comm_id);if(!n)return;let i=n.onMsg;i&&await i(e)}_unregisterComm(e){this._comms.delete(e)}_updateConnectionStatus(e){if(this._connectionStatus!==e){if(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"dead"!==this.status)if("connected"===e){let e=this._kernelSession===f,t=this.requestKernelInfo(),n=!1,i=()=>{n||(n=!0,e&&this._kernelSession===f&&(this._kernelSession=""),clearTimeout(s),this._pendingMessages.length>0&&this._sendPending())};t.then(i);let s=setTimeout(i,3e3)}else this._updateStatus("unknown");this._connectionStatusChanged.emit(e)}}async _handleMessage(e){var t,n;let i=!1;if(e.parent_header&&"iopub"===e.channel&&(p.isDisplayDataMsg(e)||p.isUpdateDisplayDataMsg(e)||p.isExecuteResultMsg(e))){let n=(null!==(t=e.content.transient)&&void 0!==t?t:{}).display_id;n&&(i=await this._handleDisplayId(n,e),this._assertCurrentMessage(e))}if(!i&&e.parent_header){let t=e.parent_header,i=null===(n=this._futures)||void 0===n?void 0:n.get(t.msg_id);if(i)await i.handleMsg(e),this._assertCurrentMessage(e);else{let n=t.session===this.clientId;"iopub"!==e.channel&&n&&this._unhandledMessage.emit(e)}}if("iopub"===e.channel){switch(e.header.msg_type){case"status":{let t=e.content.execution_state;"restarting"===t&&Promise.resolve().then((async()=>{this._updateStatus("autorestarting"),this._clearKernelState(),await this.reconnect()})),this._updateStatus(t);break}case"comm_open":this.handleComms&&await this._handleCommOpen(e);break;case"comm_msg":this.handleComms&&await this._handleCommMsg(e);break;case"comm_close":this.handleComms&&await this._handleCommClose(e)}this.isDisposed||(this._assertCurrentMessage(e),this._iopubMessage.emit(e))}}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");let e=s.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.warn(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`);let t=""!==this._selectedProtocol;this._reconnectTimeout=setTimeout(this._createSocket,e,t),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_errorIfDisposed(){if(this.isDisposed)throw new Error("Kernel connection is disposed")}get hasPendingInput(){return this._hasPendingInput}set hasPendingInput(e){this._hasPendingInput=e,this._pendingInput.emit(e)}},(a=s||(s={})).logKernelStatus=function(e){switch(e.status){case"idle":case"busy":case"unknown":return;default:console.debug(`Kernel: ${e.status} (${e.id})`)}},a.handleShellMessage=async function(e,t){return e.sendShellMessage(t,!0).done},a.loadObject=function(e,t,n){return new Promise(((i,s)=>{if(t){if("undefined"==typeof requirejs)throw new Error("requirejs not found");requirejs([t],(n=>{void 0===n[e]?s(new Error(`Object '${e}' not found in module '${t}'`)):i(n[e])}),s)}else null!=n&&n[e]?i(n[e]):s(new Error(`Object '${e}' not found in registry`))}))},a.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}})),Wr=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KernelManager=void 0;var t,n=Xe(),i=Z(),s=je(),a=Ye(),r=wn(),o=Ei(),l=vt(),c=class extends a.BaseManager{constructor(e={}){var t,a,o;super(e),this._commsOverSubshells=s.CommsOverSubshells.PerCommTarget,this._isReady=!1,this._kernelConnections=new Set,this._models=new Map,this._runningChanged=new i.Signal(this),this._connectionFailure=new i.Signal(this),this._kernelAPIClient=null!==(t=e.kernelAPIClient)&&void 0!==t?t:new r.KernelAPIClient({serverSettings:this.serverSettings}),this._kernelSpecAPIClient=null!==(a=e.kernelSpecAPIClient)&&void 0!==a?a:new l.KernelSpecAPIClient({serverSettings:this.serverSettings}),this._pollModels=new n.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelManager#models",standby:null!==(o=e.standby)&&void 0!==o?o:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._kernelConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){var t;let{id:n}=e.model,i=null===(t=e.handleComms)||void 0===t||t;if(void 0===e.handleComms)for(let e of this._kernelConnections)if(e.id===n&&e.handleComms){i=!1;break}e.commsOverSubshells=this._commsOverSubshells;let s=new o.KernelConnection({handleComms:i,...e,serverSettings:this.serverSettings,kernelAPIClient:this._kernelAPIClient,kernelSpecAPIClient:this._kernelSpecAPIClient});return this._onStarted(s),this._models.has(n)||this.refreshRunning().catch((()=>{})),s}running(){return this._models.values()}get runningCount(){return this._models.size}get commsOverSubshells(){return this._commsOverSubshells}set commsOverSubshells(e){this._commsOverSubshells=e;for(let t of this._kernelConnections)t.commsOverSubshells=e}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e={},t={}){let n=await this._kernelAPIClient.startNew(e);return this.connectTo({...t,model:n})}async shutdown(e){await this._kernelAPIClient.shutdown(e),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>this._kernelAPIClient.shutdown(e)))),await this.refreshRunning()}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async requestRunning(){var e,t;let n;try{n=await this._kernelAPIClient.listRunning()}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===n.length&&n.every((e=>{let t=this._models.get(e.id);return!!t&&t.connections===e.connections&&t.execution_state===e.execution_state&&t.last_activity===e.last_activity&&t.name===e.name&&t.reason===e.reason&&t.traceback===e.traceback}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._kernelConnections.forEach((e=>{this._models.has(e.id)||e.handleShutdown()})),this._runningChanged.emit(n))}_onStarted(e){this._kernelConnections.add(e),e.statusChanged.connect(this._onStatusChanged,this),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._kernelConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onStatusChanged(e,t){"dead"===t&&this.refreshRunning().catch((()=>{}))}};e.KernelManager=c,(t=c||(e.KernelManager=c={})).NoopManager=class extends t{constructor(){super(...arguments),this._readyPromise=new Promise((()=>{}))}get isActive(){return!1}get parentReady(){return super.ready}async startNew(e={},t={}){return Promise.reject(new Error("Not implemented in no-op Kernel Manager"))}connectTo(e){throw new Error("Not implemented in no-op Kernel Manager")}async shutdown(e){return Promise.reject(new Error("Not implemented in no-op Kernel Manager"))}get ready(){return this.parentReady.then((()=>this._readyPromise))}async requestRunning(){return Promise.resolve()}}})),Ri=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&t(i,e,s);return n(i,e),i},s=e&&e.__exportStar||function(e,n){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(n,i)&&t(n,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.CommsOverSubshells=e.KernelConnection=e.KernelAPI=e.KernelMessage=e.Kernel=void 0;var a=Si();Object.defineProperty(e,"CommsOverSubshells",{enumerable:!0,get:function(){return a.CommsOverSubshells}});var r=i(kr());e.Kernel=r;var o=i(st());e.KernelMessage=o;var l=i(wn());e.KernelAPI=l;var c=Ei();Object.defineProperty(e,"KernelConnection",{enumerable:!0,get:function(){return c.KernelConnection}}),s(Wr(),e)})),Gr=E((e=>{Object.defineProperty(e,"__esModule",{value:!0})})),Xr=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KernelSpecManager=void 0;var t=te(),n=Xe(),i=Z(),s=Ye(),a=vt(),r=class extends s.BaseManager{constructor(e={}){var t,s;super(e),this._isReady=!1,this._connectionFailure=new i.Signal(this),this._specs=null,this._specsChanged=new i.Signal(this),this._kernelSpecAPIClient=null!==(t=e.kernelSpecAPIClient)&&void 0!==t?t:new a.KernelSpecAPIClient({serverSettings:this.serverSettings}),this._ready=Promise.all([this.requestSpecs()]).then((e=>{})).catch((e=>{})).then((()=>{this.isDisposed||(this._isReady=!0)})),this._pollSpecs=new n.Poll({auto:!1,factory:()=>this.requestSpecs(),frequency:{interval:61e3,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelSpecManager#specs",standby:null!==(s=e.standby)&&void 0!==s?s:"when-hidden"}),this.ready.then((()=>{this._pollSpecs.start()}))}get isReady(){return this._isReady}get ready(){return this._ready}get specs(){return this._specs}get specsChanged(){return this._specsChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshSpecs(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestSpecs(){let e=await this._kernelSpecAPIClient.get();this.isDisposed||t.JSONExt.deepEqual(e,this._specs)||(this._specs=e,this._specsChanged.emit(e))}};e.KernelSpecManager=r})),Di=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&t(i,e,s);return n(i,e),i},s=e&&e.__exportStar||function(e,n){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(n,i)&&t(n,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.KernelSpecAPI=e.KernelSpec=void 0;var a=i(Gr());e.KernelSpec=a;var r=i(vt());e.KernelSpecAPI=r,s(Xr(),e)})),ea=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BuildManager=void 0;var t=J(),n=de();e.BuildManager=class{constructor(e={}){var i;this._url="",this.serverSettings=null!==(i=e.serverSettings)&&void 0!==i?i:n.ServerConnection.makeSettings();let{baseUrl:s,appUrl:a}=this.serverSettings;this._url=t.URLExt.join(s,a,"api/build")}get isAvailable(){return"true"===t.PageConfig.getOption("buildAvailable").toLowerCase()}get shouldCheck(){return"true"===t.PageConfig.getOption("buildCheck").toLowerCase()}getStatus(){let{_url:e,serverSettings:t}=this;return n.ServerConnection.makeRequest(e,{},t).then((e=>{if(200!==e.status)throw new n.ServerConnection.ResponseError(e);return e.json()})).then((e=>{if("string"!=typeof e.status)throw new Error("Invalid data");if("string"!=typeof e.message)throw new Error("Invalid data");return e}))}build(){let{_url:e,serverSettings:t}=this;return n.ServerConnection.makeRequest(e,{method:"POST"},t).then((e=>{if(400===e.status)throw new n.ServerConnection.ResponseError(e,"Build aborted");if(200!==e.status){let t=`Build failed with ${e.status}.\n\n        If you are experiencing the build failure after installing an extension (or trying to include previously installed extension after updating JupyterLab) please check the extension repository for new installation instructions as many extensions migrated to the prebuilt extensions system which no longer requires rebuilding JupyterLab (but uses a different installation procedure, typically involving a package manager such as 'pip' or 'conda').\n\n        If you specifically intended to install a source extension, please run 'jupyter lab build' on the server for full output.`;throw new n.ServerConnection.ResponseError(e,t)}}))}cancel(){let{_url:e,serverSettings:t}=this;return n.ServerConnection.makeRequest(e,{method:"DELETE"},t).then((e=>{if(204!==e.status)throw new n.ServerConnection.ResponseError(e)}))}}})),Ai=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NbConvertManager=void 0;var t=J(),n=de(),i=te();e.NbConvertManager=class{constructor(e={}){var t;this._exportFormats=null,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:n.ServerConnection.makeSettings()}async fetchExportFormats(){this._requestingFormats=new i.PromiseDelegate,this._exportFormats=null;let e=this.serverSettings.baseUrl,s=t.URLExt.join(e,"api/nbconvert"),{serverSettings:a}=this,r=await n.ServerConnection.makeRequest(s,{},a);if(200!==r.status)throw await n.ServerConnection.ResponseError.create(r);let o=await r.json(),l={};return Object.keys(o).forEach((function(e){let t=o[e].output_mimetype;l[e]={output_mimetype:t}})),this._exportFormats=l,this._requestingFormats.resolve(l),l}async getExportFormats(e=!0){return this._requestingFormats?this._requestingFormats.promise:e||!this._exportFormats?await this.fetchExportFormats():this._exportFormats}}})),na=E((e=>{Object.defineProperty(e,"__esModule",{value:!0})})),sa=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateModel=i,e.updateLegacySessionModel=function(e){void 0===e.path&&void 0!==e.notebook&&(e.path=e.notebook.path,e.type="notebook",e.name="")},e.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid session list");e.forEach((e=>i(e)))};var t=vn(),n=ht();function i(e){(0,n.validateProperty)(e,"id","string"),(0,n.validateProperty)(e,"type","string"),(0,n.validateProperty)(e,"name","string"),(0,n.validateProperty)(e,"path","string"),(0,n.validateProperty)(e,"kernel","object"),(0,t.validateModel)(e.kernel)}})),En=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SessionAPIClient=e.SESSION_SERVICE_URL=void 0,e.listRunning=s,e.getSessionUrl=a,e.shutdownSession=r,e.getSessionModel=o,e.startSession=l,e.updateSession=c;var t=de(),n=J(),i=sa();async function s(s=t.ServerConnection.makeSettings()){let a=n.URLExt.join(s.baseUrl,e.SESSION_SERVICE_URL),r=await t.ServerConnection.makeRequest(a,{},s);if(200!==r.status)throw await t.ServerConnection.ResponseError.create(r);let o=await r.json();if(!Array.isArray(o))throw new Error("Invalid Session list");return o.forEach((e=>{(0,i.updateLegacySessionModel)(e),(0,i.validateModel)(e)})),o}function a(t,i){let s=n.URLExt.join(t,e.SESSION_SERVICE_URL),a=n.URLExt.join(s,i);if(!a.startsWith(s))throw new Error("Can only be used for services requests");return a}async function r(e,n=t.ServerConnection.makeSettings()){var i;let s=a(n.baseUrl,e),r=await t.ServerConnection.makeRequest(s,{method:"DELETE"},n);if(404===r.status){let t=null!==(i=(await r.json()).message)&&void 0!==i?i:`The session "${e}"" does not exist on the server`;console.warn(t)}else{if(410===r.status)throw new t.ServerConnection.ResponseError(r,"The kernel was deleted but the session was not");if(204!==r.status)throw await t.ServerConnection.ResponseError.create(r)}}async function o(e,n=t.ServerConnection.makeSettings()){let s=a(n.baseUrl,e),r=await t.ServerConnection.makeRequest(s,{},n);if(200!==r.status)throw await t.ServerConnection.ResponseError.create(r);let o=await r.json();return(0,i.updateLegacySessionModel)(o),(0,i.validateModel)(o),o}async function l(s,a=t.ServerConnection.makeSettings()){let r=n.URLExt.join(a.baseUrl,e.SESSION_SERVICE_URL),o={method:"POST",body:JSON.stringify(s)},l=await t.ServerConnection.makeRequest(r,o,a);if(201!==l.status)throw await t.ServerConnection.ResponseError.create(l);let c=await l.json();return(0,i.updateLegacySessionModel)(c),(0,i.validateModel)(c),c}async function c(e,n=t.ServerConnection.makeSettings()){let s=a(n.baseUrl,e.id),r={method:"PATCH",body:JSON.stringify(e)},o=await t.ServerConnection.makeRequest(s,r,n);if(200!==o.status)throw await t.ServerConnection.ResponseError.create(o);let l=await o.json();return(0,i.updateLegacySessionModel)(l),(0,i.validateModel)(l),l}e.SESSION_SERVICE_URL="api/sessions",e.SessionAPIClient=class{constructor(e){var n;this.serverSettings=null!==(n=e.serverSettings)&&void 0!==n?n:t.ServerConnection.makeSettings()}async listRunning(){return s(this.serverSettings)}async getModel(e){return o(e,this.serverSettings)}async startNew(e){return l(e,this.serverSettings)}async shutdown(e){return r(e,this.serverSettings)}async update(e){return c(e,this.serverSettings)}}})),da=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SessionConnection=void 0;var t=Z(),n=je(),i=te(),s=En();e.SessionConnection=class{constructor(e){var a,r,o,l,c;this._id="",this._path="",this._name="",this._type="",this._kernel=null,this._isDisposed=!1,this._disposed=new t.Signal(this),this._kernelChanged=new t.Signal(this),this._statusChanged=new t.Signal(this),this._connectionStatusChanged=new t.Signal(this),this._pendingInput=new t.Signal(this),this._iopubMessage=new t.Signal(this),this._unhandledMessage=new t.Signal(this),this._anyMessage=new t.Signal(this),this._propertyChanged=new t.Signal(this),this._id=e.model.id,this._name=e.model.name,this._path=e.model.path,this._type=e.model.type,this._username=null!==(a=e.username)&&void 0!==a?a:"",this._clientId=null!==(r=e.clientId)&&void 0!==r?r:i.UUID.uuid4(),this._connectToKernel=e.connectToKernel,this._kernelConnectionOptions=null!==(o=e.kernelConnectionOptions)&&void 0!==o?o:{},this.serverSettings=null!==(l=e.serverSettings)&&void 0!==l?l:n.ServerConnection.makeSettings(),this._sessionAPIClient=null!==(c=e.sessionAPIClient)&&void 0!==c?c:new s.SessionAPIClient({serverSettings:this.serverSettings}),this.setupKernel(e.model.kernel)}get disposed(){return this._disposed}get kernelChanged(){return this._kernelChanged}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get pendingInput(){return this._pendingInput}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get anyMessage(){return this._anyMessage}get propertyChanged(){return this._propertyChanged}get id(){return this._id}get kernel(){return this._kernel}get path(){return this._path}get type(){return this._type}get name(){return this._name}get model(){return{id:this.id,kernel:this.kernel&&{id:this.kernel.id,name:this.kernel.name},path:this._path,type:this._type,name:this._name}}get isDisposed(){return this._isDisposed}update(e){let t=this.model;if(this._path=e.path,this._name=e.name,this._type=e.type,null===this._kernel&&null!==e.kernel||null!==this._kernel&&null===e.kernel||null!==this._kernel&&null!==e.kernel&&this._kernel.id!==e.kernel.id){null!==this._kernel&&this._kernel.dispose();let t=this._kernel||null;this.setupKernel(e.kernel);let n=this._kernel||null;this._kernelChanged.emit({name:"kernel",oldValue:t,newValue:n})}this._handleModelChange(t)}dispose(){if(!this.isDisposed){if(this._isDisposed=!0,this._disposed.emit(),this._kernel){this._kernel.dispose();let e=this._kernel;this._kernel=null;let t=this._kernel;this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:t})}t.Signal.clearData(this)}}async setPath(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({path:e})}async setName(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({name:e})}async setType(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({type:e})}async changeKernel(e){if(this.isDisposed)throw new Error("Session is disposed");return await this._patch({kernel:e}),this.kernel}async shutdown(){if(this.isDisposed)throw new Error("Session is disposed");await this._sessionAPIClient.shutdown(this.id),this.dispose()}setupKernel(e){if(null===e)return void(this._kernel=null);let t=this._connectToKernel({...this._kernelConnectionOptions,model:e,username:this._username,clientId:this._clientId,serverSettings:this.serverSettings});this._kernel=t,t.statusChanged.connect(this.onKernelStatus,this),t.connectionStatusChanged.connect(this.onKernelConnectionStatus,this),t.pendingInput.connect(this.onPendingInput,this),t.unhandledMessage.connect(this.onUnhandledMessage,this),t.iopubMessage.connect(this.onIOPubMessage,this),t.anyMessage.connect(this.onAnyMessage,this)}onKernelStatus(e,t){this._statusChanged.emit(t)}onKernelConnectionStatus(e,t){this._connectionStatusChanged.emit(t)}onPendingInput(e,t){this._pendingInput.emit(t)}onIOPubMessage(e,t){this._iopubMessage.emit(t)}onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}onAnyMessage(e,t){this._anyMessage.emit(t)}async _patch(e){let t=await this._sessionAPIClient.update({...e,id:this._id});return this.update(t),t}_handleModelChange(e){e.name!==this._name&&this._propertyChanged.emit("name"),e.type!==this._type&&this._propertyChanged.emit("type"),e.path!==this._path&&this._propertyChanged.emit("path")}}})),pa=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SessionManager=void 0;var t,n=Xe(),i=Z(),s=de(),a=Ye(),r=da(),o=En(),l=class extends a.BaseManager{constructor(e){var t,s;super(e),this._isReady=!1,this._sessionConnections=new Set,this._models=new Map,this._runningChanged=new i.Signal(this),this._connectionFailure=new i.Signal(this),this._connectToKernel=e=>this._kernelManager.connectTo(e),this._kernelManager=e.kernelManager,this._sessionAPIClient=null!==(t=e.sessionAPIClient)&&void 0!==t?t:new o.SessionAPIClient({serverSettings:e.serverSettings}),this._pollModels=new n.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:SessionManager#models",standby:null!==(s=e.standby)&&void 0!==s?s:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._kernelManager.isActive&&await this._kernelManager.ready,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._sessionConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){let t=new r.SessionConnection({...e,connectToKernel:this._connectToKernel,serverSettings:this.serverSettings,sessionAPIClient:this._sessionAPIClient});return this._onStarted(t),this._models.has(e.model.id)||this.refreshRunning().catch((()=>{})),t}running(){return this._models.values()}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e,t={}){let n=await this._sessionAPIClient.startNew(e);return await this.refreshRunning(),this.connectTo({...t,model:n})}async shutdown(e){await this._sessionAPIClient.shutdown(e),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>this._sessionAPIClient.shutdown(e)))),await this.refreshRunning()}async stopIfNeeded(e){try{let t=(await this._sessionAPIClient.listRunning()).filter((t=>t.path===e));if(1===t.length){let e=t[0].id;await this.shutdown(e)}}catch{}}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async findByPath(e){for(let t of this._models.values())if(t.path===e)return t;await this.refreshRunning();for(let t of this._models.values())if(t.path===e)return t}async requestRunning(){var e,t;let n;try{n=await this._sessionAPIClient.listRunning()}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===n.length&&n.every((e=>{var t,n,i,s;let a=this._models.get(e.id);return!!a&&(null===(t=a.kernel)||void 0===t?void 0:t.id)===(null===(n=e.kernel)||void 0===n?void 0:n.id)&&(null===(i=a.kernel)||void 0===i?void 0:i.name)===(null===(s=e.kernel)||void 0===s?void 0:s.name)&&a.name===e.name&&a.path===e.path&&a.type===e.type}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._sessionConnections.forEach((e=>{this._models.has(e.id)?e.update(this._models.get(e.id)):e.dispose()})),this._runningChanged.emit(n))}_onStarted(e){this._sessionConnections.add(e),e.disposed.connect(this._onDisposed,this),e.propertyChanged.connect(this._onChanged,this),e.kernelChanged.connect(this._onChanged,this)}_onDisposed(e){this._sessionConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onChanged(){this.refreshRunning().catch((()=>{}))}};e.SessionManager=l,(t=l||(e.SessionManager=l={})).NoopManager=class extends t{constructor(){super(...arguments),this._readyPromise=new Promise((()=>{}))}get isActive(){return!1}get parentReady(){return super.ready}async startNew(e,t={}){return Promise.reject(new Error("Not implemented in no-op Session Manager"))}connectTo(e){throw Error("Not implemented in no-op Session Manager")}get ready(){return this.parentReady.then((()=>this._readyPromise))}async shutdown(e){return Promise.reject(new Error("Not implemented in no-op Session Manager"))}async requestRunning(){return Promise.resolve()}}})),zi=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&t(i,e,s);return n(i,e),i},s=e&&e.__exportStar||function(e,n){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(n,i)&&t(n,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.SessionAPI=e.Session=void 0;var a=i(na());e.Session=a;var r=i(En());e.SessionAPI=r,s(pa(),e)})),ma=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataConnector=void 0,e.DataConnector=class{async list(e){throw new Error("DataConnector#list method has not been implemented.")}async remove(e){throw new Error("DataConnector#remove method has not been implemented.")}async save(e,t){throw new Error("DataConnector#save method has not been implemented.")}}})),_a=E((e=>{Object.defineProperty(e,"__esModule",{value:!0})})),ya=E(((e,t)=>{var n,i;n=e,i=function(e){class t{constructor(e){this._pid=n.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}get(e){let t,i=n.ensureMap(e);return t=this._pid in i?i[this._pid]:i[this._pid]=this._createValue(e),t}set(e,t){let i,s=n.ensureMap(e);i=this._pid in s?s[this._pid]:s[this._pid]=this._createValue(e);let a=this._coerceValue(e,t);this._maybeNotify(e,i,s[this._pid]=a)}coerce(e){let t,i=n.ensureMap(e);t=this._pid in i?i[this._pid]:i[this._pid]=this._createValue(e);let s=this._coerceValue(e,t);this._maybeNotify(e,t,i[this._pid]=s)}_createValue(e){return(0,this._create)(e)}_coerceValue(e,t){let n=this._coerce;return n?n(e,t):t}_compareValue(e,t){let n=this._compare;return n?n(e,t):e===t}_maybeNotify(e,t,n){let i=this._changed;i&&!this._compareValue(t,n)&&i(e,t,n)}}var n,i;(t||(t={})).clearData=function(e){n.ownerData.delete(e)},(i=n||(n={})).ownerData=new WeakMap,i.nextPID=(()=>{let e=0;return()=>`pid-${`${Math.random()}`.slice(2)}-${e++}`})(),i.ensureMap=function(e){let t=i.ownerData.get(e);return t||(t=Object.create(null),i.ownerData.set(e,t),t)},e.AttachedProperty=t},"object"==typeof e&&void 0!==t?i(e):"function"==typeof define&&__webpack_require__.amdO?define(["exports"],i):i((n="undefined"!=typeof globalThis?globalThis:n||self).lumino_properties={})})),ba=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RestorablePool=void 0;var t,n,i=te(),s=ya(),a=Z();e.RestorablePool=class{constructor(e){this._added=new a.Signal(this),this._current=null,this._currentChanged=new a.Signal(this),this._hasRestored=!1,this._isDisposed=!1,this._objects=new Set,this._restore=null,this._restored=new i.PromiseDelegate,this._updated=new a.Signal(this),this.namespace=e.namespace}get added(){return this._added}get current(){return this._current}set current(e){this._current!==e&&null!==e&&this._objects.has(e)&&(this._current=e,this._currentChanged.emit(this._current))}get currentChanged(){return this._currentChanged}get isDisposed(){return this._isDisposed}get restored(){return this._restored.promise}get size(){return this._objects.size}get updated(){return this._updated}async add(e){var n,i;if(e.isDisposed){let t="A disposed object cannot be added.";throw console.warn(t,e),new Error(t)}if(this._objects.has(e)){let t="This object already exists in the pool.";throw console.warn(t,e),new Error(t)}if(this._objects.add(e),e.disposed.connect(this._onInstanceDisposed,this),!t.injectedProperty.get(e)){if(this._restore){let{connector:s}=this._restore,a=this._restore.name(e);if(a){let r=`${this.namespace}:${a}`,o=null===(i=(n=this._restore).args)||void 0===i?void 0:i.call(n,e);t.nameProperty.set(e,r),await s.save(r,{data:o})}}this._added.emit(e)}}dispose(){this.isDisposed||(this._current=null,this._isDisposed=!0,this._objects.clear(),a.Signal.clearData(this))}find(e){let t=this._objects.values();for(let n of t)if(e(n))return n}forEach(e){this._objects.forEach(e)}filter(e){let t=[];return this.forEach((n=>{e(n)&&t.push(n)})),t}inject(e){return t.injectedProperty.set(e,!0),this.add(e)}has(e){return this._objects.has(e)}async restore(e){if(this._hasRestored)throw new Error("This pool has already been restored.");this._hasRestored=!0;let{command:t,connector:n,registry:i,when:s}=e,a=this.namespace,r=s?[n.list(a)].concat(s):[n.list(a)];this._restore=e;let[o]=await Promise.all(r),l=await Promise.all(o.ids.map((async(e,s)=>{let a=o.values[s],r=a&&a.data;return void 0===r?n.remove(e):i.execute(t,r).catch((()=>n.remove(e)))})));return this._restored.resolve(),l}async save(e){var n,i;let s=t.injectedProperty.get(e);if(!this._restore||!this.has(e)||s)return;let{connector:a}=this._restore,r=this._restore.name(e),o=t.nameProperty.get(e),l=r?`${this.namespace}:${r}`:"";if(o&&o!==l&&await a.remove(o),t.nameProperty.set(e,l),l){let t=null===(i=(n=this._restore).args)||void 0===i?void 0:i.call(n,e);await a.save(l,{data:t})}o!==l&&this._updated.emit(e)}_onInstanceDisposed(e){if(this._objects.delete(e),e===this._current&&(this._current=null,this._currentChanged.emit(this._current)),t.injectedProperty.get(e)||!this._restore)return;let{connector:n}=this._restore,i=t.nameProperty.get(e);i&&n.remove(i)}},(n=t||(t={})).injectedProperty=new s.AttachedProperty({name:"injected",create:()=>!1}),n.nameProperty=new s.AttachedProperty({name:"name",create:()=>""})})),Sa=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StateDB=void 0;var t=Z(),n=class e{constructor(n={}){this._changed=new t.Signal(this);let{connector:i,transform:s}=n;this._connector=i||new e.Connector,this._ready=s?s.then((e=>{let{contents:t,type:n}=e;switch(n){case"cancel":default:return;case"clear":return this._clear();case"merge":return this._merge(t||{});case"overwrite":return this._overwrite(t||{})}})):Promise.resolve(void 0)}get changed(){return this._changed}async clear(){await this._ready,await this._clear()}async fetch(e){return await this._ready,this._fetch(e)}async list(e){return await this._ready,this._list(e)}async remove(e){await this._ready,await this._remove(e),this._changed.emit({id:e,type:"remove"})}async save(e,t){await this._ready,await this._save(e,t),this._changed.emit({id:e,type:"save"})}async toJSON(){await this._ready;let{ids:e,values:t}=await this._list();return t.reduce(((t,n,i)=>(t[e[i]]=n,t)),{})}async _clear(){await Promise.all((await this._list()).ids.map((e=>this._remove(e))))}async _fetch(e){let t=await this._connector.fetch(e);if(t)return JSON.parse(t).v}async _list(e=""){let{ids:t,values:n}=await this._connector.list(e);return{ids:t,values:n.map((e=>JSON.parse(e).v))}}async _merge(e){await Promise.all(Object.keys(e).map((t=>e[t]&&this._save(t,e[t]))))}async _overwrite(e){await this._clear(),await this._merge(e)}async _remove(e){return this._connector.remove(e)}async _save(e,t){return this._connector.save(e,JSON.stringify({v:t}))}};e.StateDB=n,(n||(e.StateDB=n={})).Connector=class{constructor(){this._storage={}}async fetch(e){return this._storage[e]}async list(e=""){return Object.keys(this._storage).reduce(((t,n)=>((""===e||e===n.split(":")[0])&&(t.ids.push(n),t.values.push(this._storage[n])),t)),{ids:[],values:[]})}async remove(e){delete this._storage[e]}async save(e,t){this._storage[e]=t}}})),xa=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IStateDB=void 0;var t=te();e.IStateDB=new t.Token("@jupyterlab/coreutils:IStateDB",'A service for the JupyterLab state database.\n  Use this if you want to store data that will persist across page loads.\n  See "state database" for more information.')})),Bi=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(n,i)&&t(n,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(ma(),e),n(_a(),e),n(ba(),e),n(Sa(),e),n(xa(),e)})),Wi=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SettingManager=void 0;var t,n=J(),i=Bi(),s=de(),a=class extends i.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:s.ServerConnection.makeSettings()}async fetch(e){if(!e)throw new Error("Plugin `id` parameter is required for settings fetch.");let{serverSettings:n}=this,{baseUrl:i,appUrl:a}=n,{makeRequest:r,ResponseError:o}=s.ServerConnection,l=i+a,c=t.url(l,e),d=await r(c,{},n);if(200!==d.status)throw await o.create(d);return d.json()}async list(e){var n,i,a,r;let{serverSettings:o}=this,{baseUrl:l,appUrl:c}=o,{makeRequest:d,ResponseError:p}=s.ServerConnection,h=l+c,u=t.url(h,"","ids"===e),m=await d(u,{},o);if(200!==m.status)throw new p(m);let g=await m.json(),f=null!==(i=null===(n=null==g?void 0:g.settings)||void 0===n?void 0:n.map((e=>e.id)))&&void 0!==i?i:[],v=[];return e||(v=null!==(r=null===(a=null==g?void 0:g.settings)||void 0===a?void 0:a.map((e=>(e.data={composite:{},user:{}},e))))&&void 0!==r?r:[]),{ids:f,values:v}}async save(e,n){let{serverSettings:i}=this,{baseUrl:a,appUrl:r}=i,{makeRequest:o,ResponseError:l}=s.ServerConnection,c=a+r,d=t.url(c,e),p={body:JSON.stringify({raw:n}),method:"PUT"},h=await o(d,p,i);if(204!==h.status)throw new l(h)}};e.SettingManager=a,(t||(t={})).url=function(e,t,i){let s=i?n.URLExt.objectToQueryString({ids_only:!0}):"",a=n.URLExt.join(e,"api/settings"),r=n.URLExt.join(a,t);if(!r.startsWith(a))throw new Error("Can only be used for workspaces requests");return`${r}${s}`}})),Dt=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TerminalAPIClient=e.TERMINAL_SERVICE_URL=void 0,e.isAvailable=s,e.startNew=a,e.listRunning=r,e.shutdownTerminal=o;var t,n=J(),i=de();function s(){return"true"===String(n.PageConfig.getOption("terminalsAvailable")).toLowerCase()}async function a(s=i.ServerConnection.makeSettings(),a,r){t.errorIfNotAvailable();let o=n.URLExt.join(s.baseUrl,e.TERMINAL_SERVICE_URL),l={method:"POST",body:JSON.stringify({name:a,cwd:r})},c=await i.ServerConnection.makeRequest(o,l,s);if(200!==c.status)throw await i.ServerConnection.ResponseError.create(c);return await c.json()}async function r(s=i.ServerConnection.makeSettings()){t.errorIfNotAvailable();let a=n.URLExt.join(s.baseUrl,e.TERMINAL_SERVICE_URL),r=await i.ServerConnection.makeRequest(a,{},s);if(200!==r.status)throw await i.ServerConnection.ResponseError.create(r);let o=await r.json();if(!Array.isArray(o))throw new Error("Invalid terminal list");return o}async function o(s,a=i.ServerConnection.makeSettings()){var r;t.errorIfNotAvailable();let o=n.URLExt.join(a.baseUrl,e.TERMINAL_SERVICE_URL),l=n.URLExt.join(o,s);if(!l.startsWith(o))throw new Error("Can only be used for terminal requests");let c=await i.ServerConnection.makeRequest(l,{method:"DELETE"},a);if(404===c.status){let e=null!==(r=(await c.json()).message)&&void 0!==r?r:`The terminal session "${s}"" does not exist on the server`;console.warn(e)}else if(204!==c.status)throw await i.ServerConnection.ResponseError.create(c)}e.TERMINAL_SERVICE_URL="api/terminals",e.TerminalAPIClient=class{constructor(e={}){var t;this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings()}get isAvailable(){return s()}async startNew(e={}){let{name:t,cwd:n}=e;return a(this.serverSettings,t,n)}async listRunning(){return r(this.serverSettings)}async shutdown(e){return o(e,this.serverSettings)}},(t||(t={})).errorIfNotAvailable=function(){if(!s())throw new Error("Terminals Unavailable")}})),Ma=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isAvailable=void 0;var t=Dt();Object.defineProperty(e,"isAvailable",{enumerable:!0,get:function(){return t.isAvailable}})})),Ea=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TerminalConnection=void 0;var t,n=J(),i=te(),s=Z(),a=je(),r=Dt();e.TerminalConnection=class e{constructor(e){var t,i;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");let e=this._name,t=this.serverSettings,i=n.URLExt.join(t.wsUrl,"terminals","websocket",encodeURIComponent(e)),s=t.token;t.appendToken&&""!==s&&(i+=`?token=${encodeURIComponent(s)}`),this._ws=new t.WebSocket(i),this._ws.onmessage=this._onWSMessage,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSMessage=e=>{if(this._isDisposed)return;let t=JSON.parse(e.data);"disconnect"===t[0]&&this.dispose(),"connecting"!==this._connectionStatus?this._messageReceived.emit({type:t[0],content:t.slice(1)}):"setup"===t[0]&&this._updateConnectionStatus("connected")},this._onWSClose=e=>{console.warn(`Terminal websocket closed: ${e.code}`),this.isDisposed||this._reconnect()},this._connectionStatus="connecting",this._connectionStatusChanged=new s.Signal(this),this._isDisposed=!1,this._disposed=new s.Signal(this),this._messageReceived=new s.Signal(this),this._reconnectTimeout=null,this._ws=null,this._noOp=()=>{},this._reconnectLimit=7,this._reconnectAttempt=0,this._pendingMessages=[],this._name=e.model.name,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:a.ServerConnection.makeSettings(),this._terminalAPIClient=null!==(i=e.terminalAPIClient)&&void 0!==i?i:new r.TerminalAPIClient({serverSettings:this.serverSettings}),this._createSocket()}get disposed(){return this._disposed}get messageReceived(){return this._messageReceived}get name(){return this._name}get model(){return{name:this._name}}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearSocket(),s.Signal.clearData(this))}send(e){this._sendMessage(e)}_sendMessage(e,t=!0){if(!this._isDisposed&&e.content)if("connected"===this.connectionStatus&&this._ws){let t=[e.type,...e.content];this._ws.send(JSON.stringify(t))}else{if(!t)throw new Error(`Could not send message: ${JSON.stringify(e)}`);this._pendingMessages.push(e)}}_sendPending(){for(;"connected"===this.connectionStatus&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}reconnect(){this._errorIfDisposed();let e=new i.PromiseDelegate,t=(n,i)=>{"connected"===i?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===i&&(e.reject(new Error("Terminal connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");let e=t.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.error(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}async shutdown(){await this._terminalAPIClient.shutdown(this.name),this.dispose()}clone(){return new e({model:this.model,serverSettings:this.serverSettings,terminalAPIClient:this._terminalAPIClient})}_updateConnectionStatus(e){this._connectionStatus!==e&&(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"connected"===e&&this._sendPending(),this._connectionStatusChanged.emit(e))}_errorIfDisposed(){if(this.isDisposed)throw new Error("Terminal connection is disposed")}get connectionStatusChanged(){return this._connectionStatusChanged}get connectionStatus(){return this._connectionStatus}},(t||(t={})).getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}})),Ra=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TerminalManager=void 0;var t,n=Xe(),i=Z(),s=je(),a=Ye(),r=Dt(),o=Ea(),l=class extends a.BaseManager{constructor(e={}){var t,s;if(super(e),this._isReady=!1,this._names=[],this._terminalConnections=new Set,this._runningChanged=new i.Signal(this),this._connectionFailure=new i.Signal(this),this._terminalAPIClient=null!==(t=e.terminalAPIClient)&&void 0!==t?t:new r.TerminalAPIClient({serverSettings:this.serverSettings}),!this.isAvailable())return this._ready=Promise.reject("Terminals unavailable"),void this._ready.catch((e=>{}));this._pollModels=new n.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:TerminalManager#models",standby:null!==(s=e.standby)&&void 0!==s?s:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._names.length=0,this._terminalConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}isAvailable(){return this._terminalAPIClient.isAvailable}connectTo(e){let t=new o.TerminalConnection({...e,serverSettings:this.serverSettings,terminalAPIClient:this._terminalAPIClient});return this._onStarted(t),this._names.includes(e.model.name)||this.refreshRunning().catch((()=>{})),t}running(){return this._models[Symbol.iterator]()}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e={}){let{name:t,cwd:n}=e,i=await this._terminalAPIClient.startNew({name:t,cwd:n});return await this.refreshRunning(),this.connectTo({model:i})}async shutdown(e){await this._terminalAPIClient.shutdown(e),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all(this._names.map((e=>this._terminalAPIClient.shutdown(e)))),await this.refreshRunning()}async requestRunning(){var e,t;let n;try{n=await this._terminalAPIClient.listRunning()}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}if(this.isDisposed)return;let i=n.map((({name:e})=>e)).sort();i!==this._names&&(this._names=i,this._terminalConnections.forEach((e=>{i.includes(e.name)||e.dispose()})),this._runningChanged.emit(this._models))}_onStarted(e){this._terminalConnections.add(e),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._terminalConnections.delete(e),this.refreshRunning().catch((()=>{}))}get _models(){return this._names.map((e=>({name:e})))}};e.TerminalManager=l,(t=l||(e.TerminalManager=l={})).NoopManager=class extends t{constructor(){super(...arguments),this._readyPromise=new Promise((()=>{}))}get isActive(){return!1}get parentReady(){return super.ready}get ready(){return this.parentReady.then((()=>this._readyPromise))}async startNew(e){return Promise.reject(new Error("Not implemented in no-op Terminal Manager"))}connectTo(e){throw Error("Not implemented in no-op Terminal Manager")}async shutdown(e){return Promise.reject(new Error("Not implemented in no-op Terminal Manager"))}async requestRunning(){return Promise.resolve()}}})),Xi=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&t(i,e,s);return n(i,e),i},s=e&&e.__exportStar||function(e,n){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(n,i)&&t(n,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.TerminalAPI=e.Terminal=void 0;var a=i(Ma());e.Terminal=a;var r=i(Dt());e.TerminalAPI=r,s(Ra(),e)})),ts=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UserManager=void 0;var t,n=J(),i=te(),s=Xe(),a=Z(),r=de(),o=Ye(),l="@jupyterlab/services:UserManager#user",c=class extends o.BaseManager{constructor(e={}){var t;super(e),this._isReady=!1,this._userChanged=new a.Signal(this),this._connectionFailure=new a.Signal(this),this._ready=this.requestUser().then((()=>{this.isDisposed||(this._isReady=!0)})).catch((e=>new Promise((()=>{})))),this._pollSpecs=new s.Poll({auto:!1,factory:()=>this.requestUser(),frequency:{interval:61e3,backoff:!0,max:3e5},name:l,standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this.ready.then((()=>{this._pollSpecs.start()}))}get isReady(){return this._isReady}get ready(){return this._ready}get identity(){return this._identity}get permissions(){return this._permissions}get userChanged(){return this._userChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshUser(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestUser(){if(this.isDisposed)return;let{baseUrl:e}=this.serverSettings,{makeRequest:s,ResponseError:a}=r.ServerConnection,o=n.URLExt.join(e,"api/me"),c=await s(o,{},this.serverSettings);if(200!==c.status)throw await a.create(c);let d={identity:this._identity,permissions:this._permissions},p=await c.json(),h=p.identity,{localStorage:u}=window,m=u.getItem(l);if(m&&(!h.initials||!h.color)){let e=JSON.parse(m);h.initials=h.initials||e.initials||h.name.substring(0,1),h.color=h.color||e.color||t.getRandomColor()}i.JSONExt.deepEqual(p,d)||(this._identity=h,this._permissions=p.permissions,u.setItem(l,JSON.stringify(h)),this._userChanged.emit(p))}};e.UserManager=c,function(e){let t=["var(--jp-collaborator-color1)","var(--jp-collaborator-color2)","var(--jp-collaborator-color3)","var(--jp-collaborator-color4)","var(--jp-collaborator-color5)","var(--jp-collaborator-color6)","var(--jp-collaborator-color7)"];e.getRandomColor=()=>t[Math.floor(Math.random()*t.length)]}(t||(t={}))})),is=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceManager=void 0;var t,n=J(),i=Bi(),s=de(),a=class extends i.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:s.ServerConnection.makeSettings()}async fetch(e){let{serverSettings:n}=this,{baseUrl:i,appUrl:a}=n,{makeRequest:r,ResponseError:o}=s.ServerConnection,l=i+a,c=t.url(l,e),d=await r(c,{},n);if(200!==d.status)throw await o.create(d);return d.json()}async list(){let{serverSettings:e}=this,{baseUrl:n,appUrl:i}=e,{makeRequest:a,ResponseError:r}=s.ServerConnection,o=n+i,l=t.url(o,""),c=await a(l,{},e);if(200!==c.status)throw await r.create(c);return(await c.json()).workspaces}async remove(e){let{serverSettings:n}=this,{baseUrl:i,appUrl:a}=n,{makeRequest:r,ResponseError:o}=s.ServerConnection,l=i+a,c=t.url(l,e),d=await r(c,{method:"DELETE"},n);if(204!==d.status)throw await o.create(d)}async save(e,n){let{serverSettings:i}=this,{baseUrl:a,appUrl:r}=i,{makeRequest:o,ResponseError:l}=s.ServerConnection,c=a+r,d=t.url(c,e),p={body:JSON.stringify(n),method:"PUT"},h=await o(d,p,i);if(204!==h.status)throw await l.create(h)}};e.WorkspaceManager=a,(t||(t={})).url=function(e,t){let i=n.URLExt.join(e,"api/workspaces"),s=n.URLExt.join(i,t);if(!s.startsWith(i))throw new Error("Can only be used for workspaces requests");return s}})),Ua=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceManager=void 0;var t=Z(),n=ea(),i=yi(),s=bi(),a=Ri(),r=Di(),o=Ai(),l=de(),c=zi(),d=Wi(),p=Xi(),h=ts(),u=is();e.ServiceManager=class{constructor(e={}){var m,g;this._isDisposed=!1,this._connectionFailure=new t.Signal(this),this._isReady=!1;let f=e.defaultDrive,v=null!==(m=e.serverSettings)&&void 0!==m?m:l.ServerConnection.makeSettings(),_={defaultDrive:f,serverSettings:v,standby:null!==(g=e.standby)&&void 0!==g?g:"when-hidden"};this.serverSettings=v,this.contents=e.contents||new i.ContentsManager(_),this.events=e.events||new s.EventManager(_),this.kernels=e.kernels||new a.KernelManager(_),this.sessions=e.sessions||new c.SessionManager({..._,kernelManager:this.kernels}),this.settings=e.settings||new d.SettingManager(_),this.terminals=e.terminals||new p.TerminalManager(_),this.builder=e.builder||new n.BuildManager(_),this.workspaces=e.workspaces||new u.WorkspaceManager(_),this.nbconvert=e.nbconvert||new o.NbConvertManager(_),this.kernelspecs=e.kernelspecs||new r.KernelSpecManager(_),this.user=e.user||new h.UserManager(_),this.kernelspecs.connectionFailure.connect(this._onConnectionFailure,this),this.sessions.connectionFailure.connect(this._onConnectionFailure,this),this.terminals.connectionFailure.connect(this._onConnectionFailure,this);let y=[this.sessions.ready,this.kernelspecs.ready];this.terminals.isAvailable()&&y.push(this.terminals.ready),this._readyPromise=Promise.all(y).then((()=>{this._isReady=!0}))}get connectionFailure(){return this._connectionFailure}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,t.Signal.clearData(this),this.contents.dispose(),this.events.dispose(),this.sessions.dispose(),this.terminals.dispose())}get isReady(){return this._isReady}get ready(){return this._readyPromise}_onConnectionFailure(e,t){this._connectionFailure.emit(t)}}})),Aa=E((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IWorkspaceManager=e.IUserManager=e.ITerminalManager=e.IServiceManager=e.ISettingManager=e.ISessionManager=e.IServerSettings=e.INbConvertManager=e.IKernelSpecManager=e.IKernelManager=e.IEventManager=e.IDefaultDrive=e.IContentsManager=e.IConfigSectionManager=e.IConnectionStatus=void 0;var t=te();e.IConnectionStatus=new t.Token("@jupyterlab/application:IConnectionStatus","A service providing the application connection status."),e.IConfigSectionManager=new t.Token("@jupyterlab/services:IConfigSectionManager","A service providing the config section manager."),e.IContentsManager=new t.Token("@jupyterlab/services:IContentsManager","The contents manager token."),e.IDefaultDrive=new t.Token("@jupyterlab/services:IDefaultDrive","The default drive for the contents manager."),e.IEventManager=new t.Token("@jupyterlab/services:IEventManager","The event manager token."),e.IKernelManager=new t.Token("@jupyterlab/services:IKernelManager","The kernel manager token."),e.IKernelSpecManager=new t.Token("@jupyterlab/services:IKernelSpecManager","The kernel spec manager token."),e.INbConvertManager=new t.Token("@jupyterlab/services:INbConvertManager","The nbconvert manager token."),e.IServerSettings=new t.Token("@jupyterlab/services:IServerSettings","The server settings for the application."),e.ISessionManager=new t.Token("@jupyterlab/services:ISessionManager","The session manager token."),e.ISettingManager=new t.Token("@jupyterlab/services:ISettingManager","The setting manager token."),e.IServiceManager=new t.Token("@jupyterlab/services:IServiceManager","The service manager for the application."),e.ITerminalManager=new t.Token("@jupyterlab/services:ITerminalManager","The terminal manager token."),e.IUserManager=new t.Token("@jupyterlab/services:IUserManager","The user manager token."),e.IWorkspaceManager=new t.Token("@jupyterlab/services:IWorkspaceManager","The workspace manager token.")})),je=E((e=>{var t=e&&e.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(n,i)&&t(n,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ye(),e),n(fr(),e),n(mr(),e),n(yi(),e),n(bi(),e),n(Ri(),e),n(Di(),e),n(Ua(),e),n(de(),e),n(zi(),e),n(Wi(),e),n(Xi(),e),n(Aa(),e),n(ts(),e),n(is(),e),n(Ai(),e)})),La=E(((e,t)=>{function n(){this._types=Object.create(null),this._extensions=Object.create(null);for(let e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}n.prototype.define=function(e,t){for(let n in e){let i=e[n].map((function(e){return e.toLowerCase()}));n=n.toLowerCase();for(let e=0;e<i.length;e++){let s=i[e];if("*"!==s[0]){if(!t&&s in this._types)throw new Error('Attempt to change mapping for "'+s+'" extension from "'+this._types[s]+'" to "'+n+'". Pass `force=true` to allow this, otherwise remove "'+s+'" from the list of extensions for "'+n+'".');this._types[s]=n}}if(t||!this._extensions[n]){let e=i[0];this._extensions[n]="*"!==e[0]?e:e.substr(1)}}},n.prototype.getType=function(e){let t=(e=String(e)).replace(/^.*[/\\]/,"").toLowerCase(),n=t.replace(/^.*\./,"").toLowerCase(),i=t.length<e.length;return(n.length<t.length-1||!i)&&this._types[n]||null},n.prototype.getExtension=function(e){return(e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1)&&this._extensions[e.toLowerCase()]||null},t.exports=n})),Fa=E(((e,t)=>{t.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}})),Ba=E(((e,t)=>{t.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}})),Va=E(((e,t)=>{var n=La();t.exports=new n(Fa(),Ba())})),Wa,Ja,ye,Le,rs=et((()=>{var e;Wa=Me(J()),Ja=Me(Va()),(e=ye||(ye={})).JSON="application/json",e.PLAIN_TEXT="text/plain",e.OCTET_STREAM="octet/stream",function(e){let t=JSON.parse(Wa.PageConfig.getOption("fileTypes")||"{}");e.getType=function(e,n=null){e=e.toLowerCase();for(let n of Object.values(t))for(let t of n.extensions||[])if(t===e&&n.mimeTypes&&n.mimeTypes.length)return n.mimeTypes[0];return Ja.default.getType(e)||n||ye.OCTET_STREAM},e.hasFormat=function(e,n){e=e.toLowerCase();for(let i of Object.values(t))if(i.fileFormat===n)for(let t of i.extensions||[])if(t===e)return!0;return!1}}(Le||(Le={}))})),Fe,Ya,xe,Xa,os,Ha,Za,Ga,Ut,as,ls,$n,Qa=et((()=>{Fe=Me(J()),Ya=Me(je()),xe=Me(J()),Xa=Me(te()),os=Me(Z()),rs(),Ha="JupyterLite Storage",Za="BrowserStorage",Ga=5,Ut=new TextEncoder,as=new TextDecoder("utf-8"),ls=class{constructor(e){var t;this.reduceBytesToString=(e,t)=>e+String.fromCharCode(t),this._serverContents=new Map,this._isDisposed=!1,this._fileChanged=new os.Signal(this),this._storageName=Ha,this._storageDrivers=null,this._localforage=e.localforage,this._storageName=e.storageName||Ha,this._storageDrivers=e.storageDrivers||null,this._serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:Ya.ServerConnection.makeSettings(),this._ready=new Xa.PromiseDelegate,this.initialize().catch(console.warn)}dispose(){this.isDisposed||(this._isDisposed=!0,os.Signal.clearData(this))}get isDisposed(){return this._isDisposed}get name(){return Za}get serverSettings(){return this._serverSettings}get fileChanged(){return this._fileChanged}async getDownloadUrl(e){throw new Error("Method not implemented.")}async initialize(){await this.initStorage(),this._ready.resolve(void 0)}async initStorage(){this._storage=this.createDefaultStorage(),this._counters=this.createDefaultCounters(),this._checkpoints=this.createDefaultCheckpoints()}get ready(){return this._ready.promise}get storage(){return this.ready.then((()=>this._storage))}get counters(){return this.ready.then((()=>this._counters))}get checkpoints(){return this.ready.then((()=>this._checkpoints))}get defaultStorageOptions(){let e=this._storageDrivers&&this._storageDrivers.length?this._storageDrivers:null;return{version:1,name:this._storageName,...e?{driver:e}:{}}}createDefaultStorage(){return this._localforage.createInstance({description:"Offline Storage for Notebooks and Files",storeName:"files",...this.defaultStorageOptions})}createDefaultCounters(){return this._localforage.createInstance({description:"Store the current file suffix counters",storeName:"counters",...this.defaultStorageOptions})}createDefaultCheckpoints(){return this._localforage.createInstance({description:"Offline Storage for Checkpoints",storeName:"checkpoints",...this.defaultStorageOptions})}async clearStorage(){await Promise.all([(await this.storage).clear(),(await this.counters).clear(),(await this.checkpoints).clear()])}async newUntitled(e){var t,n,i;let s,a=null!==(t=null==e?void 0:e.path)&&void 0!==t?t:"",r=null!==(n=null==e?void 0:e.type)&&void 0!==n?n:"notebook",o=(new Date).toISOString(),l=xe.PathExt.dirname(a),c=xe.PathExt.basename(a),d=xe.PathExt.extname(a),p=await this.get(l).catch((()=>null)),h="";switch(a&&!d&&p?(l=`${a}/`,h=""):l&&c?(l=`${l}/`,h=c):(l="",h=a),r){case"directory":h=`Untitled Folder${await this._incrementCounter("directory")||""}`,s={name:h,path:`${l}${h}`,last_modified:o,created:o,format:"json",mimetype:"",content:null,size:0,writable:!0,type:"directory"};break;case"notebook":{let e=await this._incrementCounter("notebook");h=h||`Untitled${e||""}.ipynb`,s={name:h,path:`${l}${h}`,last_modified:o,created:o,format:"json",mimetype:ye.JSON,content:$n.EMPTY_NB,size:Ut.encode(JSON.stringify($n.EMPTY_NB)).length,writable:!0,type:"notebook"};break}default:{let t=null!==(i=null==e?void 0:e.ext)&&void 0!==i?i:".txt";t.startsWith(".")||(t=`.${t}`);let n,a=await this._incrementCounter("file"),r=Le.getType(t)||ye.OCTET_STREAM;n=Le.hasFormat(t,"text")||-1!==r.indexOf("text")?"text":-1!==t.indexOf("json")||-1!==t.indexOf("ipynb")?"json":"base64",h=h||`untitled${a||""}${t}`,s={name:h,path:`${l}${h}`,last_modified:o,created:o,format:n,mimetype:r,content:"",size:0,writable:!0,type:"file"};break}}let u=s.path;return await(await this.storage).setItem(u,s),this._fileChanged.emit({type:"new",oldValue:null,newValue:s}),s}async copy(e,t){let n=xe.PathExt.basename(e);for(t=""===t?"":`${xe.PathExt.removeSlash(t)}/`;await this.get(`${t}${n}`,{content:!0}).then((()=>!0)).catch((()=>!1));){let e=xe.PathExt.extname(n);n=`${n.replace(e,"")} (copy)${e}`}let i=`${t}${n}`,s=await this.get(e,{content:!0}).catch((()=>null));if(!s)throw Error(`Could not find file with path ${e}`);return s={...s,name:n,path:i},await(await this.storage).setItem(i,s),this._fileChanged.emit({type:"new",oldValue:null,newValue:s}),s}async get(e,t){if(""===(e=decodeURIComponent(e.replace(/^\//,"")))){let t=await this._getFolder(e);if(null===t)throw Error(`Could not find file with path ${e}`);return t}let n=await this.storage,i=await n.getItem(e),s=await this._getServerContents(e,t),a=i||s;if(!a)throw Error(`Could not find content with path ${e}`);if(null==t||!t.content)return{size:0,...a,content:null};if("directory"===a.type){let t=new Map;await n.iterate(((n,i)=>{i===`${e}/${n.name}`&&t.set(n.name,n)}));let i=s?s.content:Array.from((await this._getServerDirectory(e)).values());for(let e of i)t.has(e.name)||t.set(e.name,e);let r=[...t.values()];return{name:xe.PathExt.basename(e),path:e,last_modified:a.last_modified,created:a.created,format:"json",mimetype:ye.JSON,content:r,size:0,writable:!0,type:"directory"}}return a}async rename(e,t){let n=decodeURIComponent(e),i=await this.get(n,{content:!0}).catch((()=>null));if(!i)throw Error(`Could not find file with path ${n}`);let s=(new Date).toISOString(),a=xe.PathExt.basename(t),r={...i,name:a,path:t,last_modified:s},o=await this.storage;if(await o.setItem(t,r),await o.removeItem(n),await(await this.checkpoints).removeItem(n),"directory"===i.type){let n;for(n of i.content)await this.rename(Fe.URLExt.join(e,n.name),Fe.URLExt.join(t,n.name))}return this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:r}),r}async save(e,t={}){var n;e=decodeURIComponent(e);let i=xe.PathExt.extname(null!==(n=t.name)&&void 0!==n?n:""),s=t.chunk,a=!!s&&(s>1||-1===s),r=await this.get(e,{content:a}).catch((()=>null));if(r||(r=await this.newUntitled({path:e,ext:i,type:"file"})),!r)throw Error(`Could not find file with path ${e}`);let o=r.content,l=(new Date).toISOString();if(r={...r,...t,last_modified:l},t.content&&"base64"===t.format){let e=!s||-1===s,n=this._handleUploadChunk(t.content,o,a);if(".ipynb"===i){let t=e?JSON.parse(as.decode(this._binaryStringToBytes(n))):n;r={...r,content:t,format:"json",type:"notebook",size:n.length}}else if(Le.hasFormat(i,"json")){let t=e?JSON.parse(as.decode(this._binaryStringToBytes(n))):n;r={...r,content:t,format:"json",type:"file",size:n.length}}else if(Le.hasFormat(i,"text")){let t=e?as.decode(this._binaryStringToBytes(n)):n;r={...r,content:t,format:"text",type:"file",size:n.length}}else{let t=e?btoa(n):n;r={...r,content:t,format:"base64",type:"file",size:n.length}}}if(r.content)switch(t.format){case"json":r={...r,size:Ut.encode(JSON.stringify(r.content)).length};break;case"text":r={...r,size:Ut.encode(r.content).length};break;case"base64":break;default:r={...r,size:0}}else r={...r,size:0};return await(await this.storage).setItem(e,r),this._fileChanged.emit({type:"save",oldValue:null,newValue:r}),r}async delete(e){let t=`${e=decodeURIComponent(e)}/`,n=(await(await this.storage).keys()).filter((n=>n===e||n.startsWith(t)));await Promise.all(n.map(this.forgetPath,this)),this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async forgetPath(e){await Promise.all([(await this.storage).removeItem(e),(await this.checkpoints).removeItem(e)])}async createCheckpoint(e){var t;let n=await this.checkpoints;e=decodeURIComponent(e);let i=await this.get(e,{content:!0}).catch((()=>null));if(!i)throw Error(`Could not find file with path ${e}`);let s=(null!==(t=await n.getItem(e))&&void 0!==t?t:[]).filter(Boolean);return s.push(i),s.length>Ga&&s.splice(0,s.length-Ga),await n.setItem(e,s),{id:""+(s.length-1),last_modified:i.last_modified}}async listCheckpoints(e){return(await(await this.checkpoints).getItem(e)||[]).filter(Boolean).map(this.normalizeCheckpoint,this)}normalizeCheckpoint(e,t){return{id:t.toString(),last_modified:e.last_modified}}async restoreCheckpoint(e,t){e=decodeURIComponent(e);let n=(await(await this.checkpoints).getItem(e)||[])[parseInt(t)];await(await this.storage).setItem(e,n)}async deleteCheckpoint(e,t){e=decodeURIComponent(e);let n=await(await this.checkpoints).getItem(e)||[],i=parseInt(t);n.splice(i,1),await(await this.checkpoints).setItem(e,n)}_handleUploadChunk(e,t,n){let i=atob(e);return n?t+i:i}_binaryStringToBytes(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}async _getFolder(e){let t=new Map;await(await this.storage).iterate(((e,n)=>{n.includes("/")||t.set(e.path,e)}));for(let n of(await this._getServerDirectory(e)).values())t.has(n.path)||t.set(n.path,n);return e&&0===t.size?null:{name:"",path:e,last_modified:new Date(0).toISOString(),created:new Date(0).toISOString(),format:"json",mimetype:ye.JSON,content:Array.from(t.values()),size:0,writable:!0,type:"directory"}}async _getServerContents(e,t){let n=xe.PathExt.basename(e),i=(await this._getServerDirectory(Fe.URLExt.join(e,".."))).get(n);if(!i)return null;if(i=i||{name:n,path:e,last_modified:new Date(0).toISOString(),created:new Date(0).toISOString(),format:"text",mimetype:ye.PLAIN_TEXT,type:"file",writable:!0,size:0,content:""},null!=t&&t.content)if("directory"===i.type){let t=await this._getServerDirectory(e);i={...i,content:Array.from(t.values())}}else{let t=Fe.URLExt.join(Fe.PageConfig.getBaseUrl(),"files",e),s=await fetch(t);if(!s.ok)return null;let a=i.mimetype||s.headers.get("Content-Type"),r=xe.PathExt.extname(n);if("notebook"===i.type||Le.hasFormat(r,"json")||-1!==(null==a?void 0:a.indexOf("json"))||e.match(/\.(ipynb|[^/]*json[^/]*)$/)){let e=await s.text();i={...i,content:JSON.parse(e),format:"json",mimetype:i.mimetype||ye.JSON,size:Ut.encode(e).length}}else if(Le.hasFormat(r,"text")||-1!==a.indexOf("text")){let e=await s.text();i={...i,content:e,format:"text",mimetype:a||ye.PLAIN_TEXT,size:Ut.encode(e).length}}else{let e=await s.arrayBuffer(),t=new Uint8Array(e);i={...i,content:btoa(t.reduce(this.reduceBytesToString,"")),format:"base64",mimetype:a||ye.OCTET_STREAM,size:t.length}}}return i}async _getServerDirectory(e){let t=this._serverContents.get(e)||new Map;if(!this._serverContents.has(e)){let n=Fe.URLExt.join(Fe.PageConfig.getBaseUrl(),"api/contents",e,"all.json");try{let e=await fetch(n),i=JSON.parse(await e.text());for(let e of i.content)t.set(e.name,e)}catch(e){console.warn(`don't worry, about ${e}... nothing's broken. If there had been a\n          file at ${n}, you might see some more files.`)}this._serverContents.set(e,t)}return t}async _incrementCounter(e){var t;let n=await this.counters,i=(null!==(t=await n.getItem(e))&&void 0!==t?t:-1)+1;return await n.setItem(e,i),i}},($n||($n={})).EMPTY_NB={metadata:{orig_nbformat:4},nbformat_minor:5,nbformat:4,cells:[]}}));function cs(e){return"node"in e}var At,eo,to,no,ds=et((()=>{At=16895,eo=33206,to=1,no=2})),so,Gn,Ld,zd,io,Vn,Wn,Jn,Hn,Nt,us=et((()=>{ds(),so=":",Gn=4096,Ld=new TextEncoder,zd=new TextDecoder("utf-8"),io={0:!1,1:!0,2:!0,64:!0,65:!0,66:!0,129:!0,193:!0,514:!0,577:!0,578:!0,705:!0,706:!0,1024:!0,1025:!0,1026:!0,1089:!0,1090:!0,1153:!0,1154:!0,1217:!0,1218:!0,4096:!0,4098:!0},Vn=class{constructor(e){this.fs=e}open(e){let t=this.fs.realPath(e.node);this.fs.FS.isFile(e.node.mode)&&(e.file=this.fs.API.get(t))}close(e){if(!this.fs.FS.isFile(e.node.mode)||!e.file)return;let t=this.fs.realPath(e.node),n=e.flags,i="string"==typeof n?parseInt(n,10):n;i&=8191;let s=!0;i in io&&(s=io[i]),s&&this.fs.API.put(t,e.file),e.file=void 0}read(e,t,n,i,s){if(i<=0||void 0===e.file||s>=(e.file.data.length||0))return 0;let a=Math.min(e.file.data.length-s,i);return t.set(e.file.data.subarray(s,s+a),n),a}write(e,t,n,i,s){var a;if(i<=0||void 0===e.file)return 0;if(e.node.timestamp=Date.now(),s+i>((null===(a=e.file)||void 0===a?void 0:a.data.length)||0)){let t=e.file.data?e.file.data:new Uint8Array;e.file.data=new Uint8Array(s+i),e.file.data.set(t)}return e.file.data.set(t.subarray(n,n+i),s),i}llseek(e,t,n){let i=t;if(1===n)i+=e.position;else if(2===n&&this.fs.FS.isFile(e.node.mode)){if(void 0===e.file)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM);i+=e.file.data.length}if(i<0)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EINVAL);return i}},Wn=class{constructor(e){this.fs=e}node(e){return cs(e)?e.node:e}getattr(e){let t=this.node(e);return{...this.fs.API.getattr(this.fs.realPath(t)),mode:t.mode,ino:t.id}}setattr(e,t){let n=this.node(e);for(let[e,i]of Object.entries(t))switch(e){case"mode":n.mode=i;break;case"timestamp":n.timestamp=i;break;case"size":{let e=i,t=this.fs.realPath(n);if(this.fs.FS.isFile(n.mode)&&e>=0){let n=this.fs.API.get(t),i=n.data?n.data:new Uint8Array;e!==i.length&&(e<i.length?n.data=n.data.slice(0,e):(n.data=new Uint8Array(e),n.data.set(i)),this.fs.API.put(t,n))}else console.warn("setattr size of",e,"on",n,"not yet implemented");break}default:console.warn("setattr",e,"of",i,"on",n,"not yet implemented")}}lookup(e,t){let n=this.node(e),i=this.fs.PATH.join2(this.fs.realPath(n),t),s=this.fs.API.lookup(i);if(!s.ok)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.ENOENT);return this.fs.createNode(n,t,s.mode,0)}mknod(e,t,n,i){let s=this.node(e),a=this.fs.PATH.join2(this.fs.realPath(s),t);return this.fs.API.mknod(a,n),this.fs.createNode(s,t,n,i)}rename(e,t,n){let i=this.node(e),s=this.node(t);this.fs.API.rename(i.parent?this.fs.PATH.join2(this.fs.realPath(i.parent),i.name):i.name,this.fs.PATH.join2(this.fs.realPath(s),n)),i.name=n,i.parent=s}unlink(e,t){this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(e)),t))}rmdir(e,t){this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(e)),t))}readdir(e){return this.fs.API.readdir(this.fs.realPath(this.node(e)))}symlink(e,t,n){throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM)}readlink(e){throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM)}},Jn=class{constructor(e){this._driveName=e.driveName,this._mountpoint=e.mountpoint,this.FS=e.FS,this.ERRNO_CODES=e.ERRNO_CODES}lookup(e){return this.request({method:"lookup",path:this.normalizePath(e)})}getmode(e){return this.request({method:"getmode",path:this.normalizePath(e)})}mknod(e,t){return this.request({method:"mknod",path:this.normalizePath(e),data:{mode:t}})}rename(e,t){return this.request({method:"rename",path:this.normalizePath(e),data:{newPath:this.normalizePath(t)}})}readdir(e){let t=this.request({method:"readdir",path:this.normalizePath(e)});return t.push("."),t.push(".."),t}rmdir(e){return this.request({method:"rmdir",path:this.normalizePath(e)})}get(e){let t=this.request({method:"get",path:this.normalizePath(e)});if(!t)throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT);let n=t.content,i=t.format;switch(i){case"json":case"text":return{data:Ld.encode(n),format:i};case"base64":{let e=atob(n),t=e.length,s=new Uint8Array(t);for(let n=0;n<t;n++)s[n]=e.charCodeAt(n);return{data:s,format:i}}default:throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT)}}put(e,t){switch(t.format){case"json":case"text":return this.request({method:"put",path:this.normalizePath(e),data:{format:t.format,data:zd.decode(t.data)}});case"base64":{let n="";for(let e=0;e<t.data.byteLength;e++)n+=String.fromCharCode(t.data[e]);return this.request({method:"put",path:this.normalizePath(e),data:{format:t.format,data:btoa(n)}})}}}getattr(e){let t=this.request({method:"getattr",path:this.normalizePath(e)});return t.atime&&(t.atime=new Date(t.atime)),t.mtime&&(t.mtime=new Date(t.mtime)),t.ctime&&(t.ctime=new Date(t.ctime)),t.size=t.size||0,t}normalizePath(e){return e.startsWith(this._mountpoint)&&(e=e.slice(this._mountpoint.length)),this._driveName&&(e=`${this._driveName}${so}${e}`),e}},Hn=class extends Jn{constructor(e){super(e),this._baseUrl=e.baseUrl,this._browsingContextId=e.browsingContextId||""}request(e){let t=new XMLHttpRequest;t.open("POST",encodeURI(this.endpoint),!1);let n={data:e,browsingContextId:this._browsingContextId};try{t.send(JSON.stringify(n))}catch(e){console.error(e)}if(t.status>=400)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return JSON.parse(t.responseText)}get endpoint(){return`${this._baseUrl}api/drive`}},Nt=class{constructor(e){this.FS=e.FS,this.PATH=e.PATH,this.ERRNO_CODES=e.ERRNO_CODES,this.API=this.createAPI(e),this.driveName=e.driveName,this.node_ops=new Wn(this),this.stream_ops=new Vn(this)}createAPI(e){if(!e.browsingContextId||!e.baseUrl)throw new Error("Cannot create service-worker API without current browsingContextId");return new Hn(e)}mount(e){return this.createNode(null,e.mountpoint,16895,0)}createNode(e,t,n,i){let s=this.FS;if(!s.isDir(n)&&!s.isFile(n))throw new s.ErrnoError(this.ERRNO_CODES.EINVAL);let a=s.createNode(e,t,n,i);return a.node_ops=this.node_ops,a.stream_ops=this.stream_ops,a}getMode(e){return this.API.getmode(e)}realPath(e){let t=[],n=e;for(t.push(n.name);n.parent!==n;)n=n.parent,t.push(n.name);return t.reverse(),this.PATH.join.apply(null,t)}}})),ps,hs,ro=et((()=>{ps=Me(J()),us(),hs=class{constructor(e){this.contentsManager=e.contentsManager}async processDriveRequest(e){switch(e.method){case"readdir":return this.readdir(e);case"rmdir":return this.rmdir(e);case"rename":return this.rename(e);case"getmode":return this.getmode(e);case"lookup":return this.lookup(e);case"mknod":return this.mknod(e);case"getattr":return this.getattr(e);case"get":return this.get(e);case"put":return this.put(e)}throw`Drive request ${e.method} does not exist.`}async readdir(e){let t=await this.contentsManager.get(e.path,{content:!0}),n=[];return"directory"===t.type&&t.content&&(n=t.content.map((e=>e.name))),n}async rmdir(e){return await this.contentsManager.delete(e.path),null}async rename(e){return await this.contentsManager.rename(e.path,e.data.newPath),null}async getmode(e){let t;return t="directory"===(await this.contentsManager.get(e.path)).type?16895:33206,t}async lookup(e){let t;try{t={ok:!0,mode:"directory"===(await this.contentsManager.get(e.path)).type?16895:33206}}catch{t={ok:!1}}return t}async mknod(e){let t=await this.contentsManager.newUntitled({path:ps.PathExt.dirname(e.path),type:16895===e.data.mode?"directory":"file",ext:ps.PathExt.extname(e.path)});return await this.contentsManager.rename(t.path,e.path),null}async getattr(e){let t=await this.contentsManager.get(e.path),n=new Date(0).toISOString();return{dev:1,nlink:1,uid:0,gid:0,rdev:0,size:t.size||0,blksize:Gn,blocks:Math.ceil(t.size||0/Gn),atime:t.last_modified||n,mtime:t.last_modified||n,ctime:t.created||n,timestamp:0}}async get(e){let t,n=await this.contentsManager.get(e.path,{content:!0});return"directory"!==n.type&&(t={content:"json"===n.format?JSON.stringify(n.content):n.content,format:n.format}),t}async put(e){return await this.contentsManager.save(e.path,{content:"json"===e.data.format?JSON.parse(e.data.data):e.data.data,type:"file",format:e.data.format}),null}}})),ao={};So(ao,{BLOCK_SIZE:()=>Gn,BrowserStorageDrive:()=>ls,ContentsAPI:()=>Jn,DIR_MODE:()=>At,DRIVE_NAME:()=>Za,DRIVE_SEPARATOR:()=>so,DriveContentsProcessor:()=>hs,DriveFS:()=>Nt,DriveFSEmscriptenNodeOps:()=>Wn,DriveFSEmscriptenStreamOps:()=>Vn,FILE:()=>Le,FILE_MODE:()=>eo,MIME:()=>ye,SEEK_CUR:()=>to,SEEK_END:()=>no,ServiceWorkerContentsAPI:()=>Hn,instanceOfStream:()=>cs});var fs=et((()=>{Qa(),us(),rs(),ds(),ro()})),_s=Symbol("Comlink.proxy"),Co=Symbol("Comlink.endpoint"),ko=Symbol("Comlink.releaseProxy"),Zn=Symbol("Comlink.finalizer"),zt=Symbol("Comlink.thrown"),vs=e=>"object"==typeof e&&null!==e||"function"==typeof e,Po={canHandle:e=>vs(e)&&e[_s],serialize(e){let{port1:t,port2:n}=new MessageChannel;return $t(e,t),[n,[n]]},deserialize:e=>(e.start(),Ro(e))},Mo={canHandle:e=>vs(e)&&zt in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},ys=new Map([["proxy",Po],["throw",Mo]]);function Eo(e,t){for(let n of e)if(t===n||"*"===n||n instanceof RegExp&&n.test(t))return!0;return!1}function $t(e,t=globalThis,n=["*"]){t.addEventListener("message",(function i(s){if(!s||!s.data)return;if(!Eo(n,s.origin))return void console.warn(`Invalid origin '${s.origin}' for comlink proxy`);let a,{id:r,type:o,path:l}=Object.assign({path:[]},s.data),c=(s.data.argumentList||[]).map(Ge);try{let t=l.slice(0,-1).reduce(((e,t)=>e[t]),e),n=l.reduce(((e,t)=>e[t]),e);switch(o){case"GET":a=n;break;case"SET":t[l.slice(-1)[0]]=Ge(s.data.value),a=!0;break;case"APPLY":a=n.apply(t,c);break;case"CONSTRUCT":a=To(new n(...c));break;case"ENDPOINT":{let{port1:t,port2:n}=new MessageChannel;$t(e,n),a=qo(t,[t])}break;case"RELEASE":a=void 0;break;default:return}}catch(e){a={value:e,[zt]:0}}Promise.resolve(a).catch((e=>({value:e,[zt]:0}))).then((n=>{let[s,a]=Bt(n);t.postMessage(Object.assign(Object.assign({},s),{id:r}),a),"RELEASE"===o&&(t.removeEventListener("message",i),ws(t),Zn in e&&"function"==typeof e[Zn]&&e[Zn]())})).catch((e=>{let[n,i]=Bt({value:new TypeError("Unserializable return value"),[zt]:0});t.postMessage(Object.assign(Object.assign({},n),{id:r}),i)}))})),t.start&&t.start()}function Io(e){return"MessagePort"===e.constructor.name}function ws(e){Io(e)&&e.close()}function Ro(e,t){let n=new Map;return e.addEventListener("message",(function(e){let{data:t}=e;if(!t||!t.id)return;let i=n.get(t.id);if(i)try{i(t)}finally{n.delete(t.id)}})),Qn(e,n,[],t)}function Lt(e){if(e)throw new Error("Proxy has been released and is not useable")}function bs(e){return tt(e,new Map,{type:"RELEASE"}).then((()=>{ws(e)}))}var Ft=new WeakMap,Kt="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{let t=(Ft.get(e)||0)-1;Ft.set(e,t),0===t&&bs(e)}));function Oo(e,t){let n=(Ft.get(t)||0)+1;Ft.set(t,n),Kt&&Kt.register(e,t,e)}function Do(e){Kt&&Kt.unregister(e)}function Qn(e,t,n=[],i=function(){}){let s=!1,a=new Proxy(i,{get(i,r){if(Lt(s),r===ko)return()=>{Do(a),bs(e),t.clear(),s=!0};if("then"===r){if(0===n.length)return{then:()=>a};let i=tt(e,t,{type:"GET",path:n.map((e=>e.toString()))}).then(Ge);return i.then.bind(i)}return Qn(e,t,[...n,r])},set(i,a,r){Lt(s);let[o,l]=Bt(r);return tt(e,t,{type:"SET",path:[...n,a].map((e=>e.toString())),value:o},l).then(Ge)},apply(i,a,r){Lt(s);let o=n[n.length-1];if(o===Co)return tt(e,t,{type:"ENDPOINT"}).then(Ge);if("bind"===o)return Qn(e,t,n.slice(0,-1));let[l,c]=gs(r);return tt(e,t,{type:"APPLY",path:n.map((e=>e.toString())),argumentList:l},c).then(Ge)},construct(i,a){Lt(s);let[r,o]=gs(a);return tt(e,t,{type:"CONSTRUCT",path:n.map((e=>e.toString())),argumentList:r},o).then(Ge)}});return Oo(a,e),a}function jo(e){return Array.prototype.concat.apply([],e)}function gs(e){let t=e.map(Bt);return[t.map((e=>e[0])),jo(t.map((e=>e[1])))]}var Ss=new WeakMap;function qo(e,t){return Ss.set(e,t),e}function To(e){return Object.assign(e,{[_s]:!0})}function Bt(e){for(let[t,n]of ys)if(n.canHandle(e)){let[i,s]=n.serialize(e);return[{type:"HANDLER",name:t,value:i},s]}return[{type:"RAW",value:e},Ss.get(e)||[]]}function Ge(e){switch(e.type){case"HANDLER":return ys.get(e.name).deserialize(e.value);case"RAW":return e.value}}function tt(e,t,n,i){return new Promise((s=>{let a=Uo();t.set(a,s),e.start&&e.start(),e.postMessage(Object.assign({id:a},n),i)}))}function Uo(){return new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-")}var oo=Me(J()),lo=Me(je());fs();var Yn=class{constructor(){this._options=null,this._initializer=null,this._pyodide=null,this._localPath="",this._driveName="",this._driveFS=null,this._sendWorkerMessage=()=>{},this._logMessage=()=>{},this._initialized=new Promise(((e,t)=>{this._initializer={resolve:e,reject:t}}))}async initialize(e){var t;if(this._options=e,e.location.includes(":")){let t=e.location.split(":");this._driveName=t[0],this._localPath=t[1]}else this._driveName="",this._localPath=e.location;await this.initRuntime(e),await this.initFilesystem(e),await this.initPackageManager(e),await this.initKernel(e),await this.initGlobals(e),null==(t=this._initializer)||t.resolve()}async initRuntime(e){let t,{pyodideUrl:n,indexUrl:i}=e;n.endsWith(".mjs")?t=(await __webpack_require__(476)(n)).loadPyodide:(importScripts(n),t=self.loadPyodide),this._pyodide=await t({indexURL:i,...e.loadPyodideOptions}),this._pyodide._api.on_fatal=async e=>{let t="";t="Exit"===e.name?"Pyodide has exited and can no longer be used.":`Pyodide has suffered a fatal error. Please report this to the Pyodide maintainers.\nThe cause of the error was: ${e.name}\n${e.message}\nStack trace:\n${e.stack}`,this._logMessage({type:"text",level:"critical",data:t})};let s=e=>{console.log(e),this._logMessage({type:"text",level:"info",data:e})},a=e=>{console.error(e),this._logMessage({type:"text",level:"critical",data:e})},r=this._pyodide.loadPackage;this._pyodide.loadPackage=(e,t)=>r(e,{messageCallback:e=>s(e),errorCallback:e=>{a(e)},...t})}async initPackageManager(e){if(!this._options)throw new Error("Uninitialized");let{pipliteWheelUrl:t,disablePyPIFallback:n,pipliteUrls:i,loadPyodideOptions:s}=this._options,a=(s||{}).packages||[];a.includes("micropip")||await this._pyodide.loadPackage(["micropip"]),a.includes("piplite")||await this._pyodide.runPythonAsync(`\n      import micropip\n      await micropip.install('${t}', keep_going=True)\n    `),await this._pyodide.runPythonAsync(`\n      import piplite.piplite\n      piplite.piplite._PIPLITE_DISABLE_PYPI = ${n?"True":"False"}\n      piplite.piplite._PIPLITE_URLS = ${JSON.stringify(i)}\n    `)}async initKernel(e){let t=(e.loadPyodideOptions||{}).packages||[],n=["ssl","sqlite3","ipykernel","comm","pyodide_kernel","jedi","ipython"],i=[];for(let e of n)t.includes(e)||i.push(`await piplite.install('${e}', keep_going=True)`);i.push("import pyodide_kernel"),e.mountDrive&&this._localPath&&i.push("import os",`os.chdir("${this._localPath}")`),await this._pyodide.runPythonAsync(i.join("\n"))}async initGlobals(e){let{globals:t}=this._pyodide;this._kernel=t.get("pyodide_kernel").kernel_instance.copy(),this._stdout_stream=t.get("pyodide_kernel").stdout_stream.copy(),this._stderr_stream=t.get("pyodide_kernel").stderr_stream.copy(),this._interpreter=this._kernel.interpreter.copy(),this._interpreter.send_comm=this.sendComm.bind(this)}async initFilesystem(e){if(e.mountDrive){let t="/drive",{FS:n,PATH:i,ERRNO_CODES:s}=this._pyodide,{baseUrl:a}=e,{DriveFS:r}=await Promise.resolve().then((()=>(fs(),ao))),o=new r({FS:n,PATH:i,ERRNO_CODES:s,baseUrl:a,driveName:this._driveName,mountpoint:t,browsingContextId:this._browsingContextId});n.mkdirTree(t),n.mount(o,{},t),n.chdir(t),this._driveFS=o}}mapToObject(e){let t=e instanceof Array?[]:{};return e.forEach(((e,n)=>{t[n]=e instanceof Map||e instanceof Array?this.mapToObject(e):e})),t}formatResult(e){if(!(e instanceof this._pyodide.ffi.PyProxy))return e;let t=e.toJs();return this.mapToObject(t)}registerWorkerMessageCallback(e){this._sendWorkerMessage=e}registerLogMessageCallback(e){this._logMessage=e}async setup(e){await this._initialized,this._kernel._parent_header=this._pyodide.toPy(e)}async execute(e,t){await this.setup(t);let n=(e,t)=>{let n={name:this.formatResult(e),text:this.formatResult(t)};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:n,type:"stream"})};this._stdout_stream.publish_stream_callback=n,this._stderr_stream.publish_stream_callback=n,this._interpreter.display_pub.clear_output_callback=e=>{let t={wait:this.formatResult(e)};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:t,type:"clear_output"})},this._interpreter.display_pub.display_data_callback=(e,t,n)=>{let i={data:this.formatResult(e),metadata:this.formatResult(t),transient:this.formatResult(n)};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:i,type:"display_data"})},this._interpreter.display_pub.update_display_data_callback=(e,t,n)=>{let i={data:this.formatResult(e),metadata:this.formatResult(t),transient:this.formatResult(n)};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:i,type:"update_display_data"})},this._interpreter.displayhook.publish_execution_result=(e,t,n)=>{let i={execution_count:e,data:this.formatResult(t),metadata:this.formatResult(n)};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:i,type:"execute_result"})},this._interpreter.input=this.input.bind(this),this._interpreter.getpass=this.getpass.bind(this);let i=await this._kernel.run(e.code),s=this.formatResult(i);return"error"===s.status&&((e,t,n)=>{let i={ename:e,evalue:t,traceback:n};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:i,type:"execute_error"})})(s.ename,s.evalue,s.traceback),s}async complete(e,t){await this.setup(t);let n=this._kernel.complete(e.code,e.cursor_pos);return this.formatResult(n)}async inspect(e,t){await this.setup(t);let n=this._kernel.inspect(e.code,e.cursor_pos,e.detail_level);return this.formatResult(n)}async isComplete(e,t){await this.setup(t);let n=this._kernel.is_complete(e.code);return this.formatResult(n)}async commInfo(e,t){await this.setup(t);let n=this._kernel.comm_info(e.target_name);return{comms:this.formatResult(n),status:"ok"}}async commOpen(e,t){await this.setup(t);let n=this._kernel.comm_manager.comm_open(this._pyodide.toPy(null),this._pyodide.toPy(null),this._pyodide.toPy(e));return this.formatResult(n)}async commMsg(e,t){await this.setup(t);let n=this._kernel.comm_manager.comm_msg(this._pyodide.toPy(null),this._pyodide.toPy(null),this._pyodide.toPy(e));return this.formatResult(n)}async commClose(e,t){await this.setup(t);let n=this._kernel.comm_manager.comm_close(this._pyodide.toPy(null),this._pyodide.toPy(null),this._pyodide.toPy(e));return this.formatResult(n)}async inputReply(e,t){}getpass(e){return e=void 0===e?"":e,this.sendInputRequest(e,!0)}input(e){return e=void 0===e?"":e,this.sendInputRequest(e,!1)}async sendComm(e,t,n,i,s){this._sendWorkerMessage({type:e,content:this.formatResult(t),metadata:this.formatResult(n),ident:this.formatResult(i),buffers:this.formatResult(s),parentHeader:this.formatResult(this._kernel._parent_header).header})}},ms=class extends Yn{constructor(){super(),this._sendWorkerMessage=e=>{postMessage({_kernelMessage:e})},this._logMessage=e=>{postMessage({_logMessage:e})}}async initFilesystem(e){if(e.mountDrive){let t="/drive",{FS:n,PATH:i,ERRNO_CODES:s}=this._pyodide,{baseUrl:a,browsingContextId:r}=e,o=new Nt({FS:n,PATH:i,ERRNO_CODES:s,baseUrl:a,driveName:this._driveName,mountpoint:t,browsingContextId:r});n.mkdirTree(t),n.mount(o,{},t),n.chdir(t),this._driveFS=o}}sendInputRequest(e,t){var n,i;let s=this.formatResult(this._kernel._parent_header).header,a=lo.KernelMessage.createMessage({channel:"stdin",msgType:"input_request",session:null!=(n=null==s?void 0:s.session)?n:"",parentHeader:s,content:{prompt:e,password:t}});try{if(!this._options)throw new Error("Kernel options not set");let{baseUrl:e,browsingContextId:t}=this._options;if(!t)throw new Error("Kernel browsingContextId not set");let n=new XMLHttpRequest,s=oo.URLExt.join(e,"/api/stdin/kernel");n.open("POST",s,!1);let r=JSON.stringify({browsingContextId:t,data:a});n.send(r);let o=JSON.parse(n.response);if("error"in o)throw new Error(o.error);return null==(i=o.content)?void 0:i.value}catch(e){return void console.warn(`Failed to request stdin via service worker: ${e}`)}}},Fd=new ms;$t(Fd)},476:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=476,e.exports=t}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.c=__webpack_module_cache__,__webpack_require__.amdO={},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{__webpack_require__.S={};var e={},t={};__webpack_require__.I=(n,i)=>{i||(i=[]);var s=t[n];if(s||(s=t[n]={}),!(i.indexOf(s)>=0)){if(i.push(s),e[n])return e[n];__webpack_require__.o(__webpack_require__.S,n)||(__webpack_require__.S[n]={}),__webpack_require__.S[n];var a=[];return e[n]=a.length?Promise.all(a).then((()=>e[n]=1)):1}}})();var __webpack_exports__=__webpack_require__(352)})();
//# sourceMappingURL=352.cc74f63a8f779ace30b6.js.map?v=cc74f63a8f779ace30b6