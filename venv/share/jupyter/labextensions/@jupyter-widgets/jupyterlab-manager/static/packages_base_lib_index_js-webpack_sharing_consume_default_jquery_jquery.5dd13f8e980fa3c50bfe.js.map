{"version":3,"file":"packages_base_lib_index_js-webpack_sharing_consume_default_jquery_jquery.5dd13f8e980fa3c50bfe.js","mappings":"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","sources":["webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/backbone-patch.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/errorwidget.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/index.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/manager.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/nativeview.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/registry.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/services-shim.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/utils.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/version.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/viewlist.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/widget.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/widget_layout.ts","webpack://@jupyter-widgets/jupyterlab-manager/../../packages/base/src/widget_style.ts"],"sourcesContent":["// This file contains a modified version of the set function from the Backbone\n// (see\n// https://github.com/jashkenas/backbone/blob/05fde9e201f7e2137796663081105cd6dad12a98/backbone.js#L460,\n// with changes below marked with an EDIT comment). This file in Backbone has the following license.\n\n//     (c) 2010-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n// Backbone's full license is below (from https://github.com/jashkenas/backbone/blob/05fde9e201f7e2137796663081105cd6dad12a98/LICENSE)\n\n/*\nCopyright (c) 2010-2015 Jeremy Ashkenas, DocumentCloud\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport * as utils from './utils';\n\nimport { ModelSetOptions, ObjectHash } from 'backbone';\n\nimport { JSONExt } from '@lumino/coreutils';\n\n// Set a hash of model attributes on the object, firing `\"change\"`. This is\n// the core primitive operation of a model, updating the data and notifying\n// anyone who needs to know about the change in state. The heart of the beast.\n// This *MUST* be called with the model as the `this` context.\nexport function set(\n  key: string | {},\n  val: any,\n  options: ModelSetOptions & { unset?: boolean }\n): any {\n  if (key == null) {\n    return this;\n  }\n\n  // Handle both `\"key\", value` and `{key: value}` -style arguments.\n  let attrs: ObjectHash;\n  if (JSONExt.isObject(key)) {\n    attrs = key;\n    options = val;\n  } else {\n    (attrs = {} as ObjectHash)[key] = val;\n  }\n\n  options || (options = {});\n\n  // Run validation.\n  if (!this._validate(attrs, options)) {\n    return false;\n  }\n\n  // Extract attributes and options.\n  const unset = options.unset;\n  const silent = options.silent;\n  const changes = [];\n  const changing = this._changing;\n  this._changing = true;\n  try {\n    if (!changing) {\n      // EDIT: changed to use object spread instead of _.clone\n      this._previousAttributes = { ...this.attributes };\n      this.changed = {};\n    }\n\n    const current = this.attributes;\n    const changed = this.changed;\n    const prev = this._previousAttributes;\n\n    // For each `set` attribute, update or delete the current value.\n    for (const attr in attrs) {\n      val = attrs[attr];\n      // EDIT: the following two lines use our isEqual instead of _.isEqual\n      if (!utils.isEqual(current[attr], val)) {\n        changes.push(attr);\n      }\n      if (!utils.isEqual(prev[attr], val)) {\n        changed[attr] = val;\n      } else {\n        delete changed[attr];\n      }\n      unset ? delete current[attr] : (current[attr] = val);\n    }\n\n    // Update the `id`.\n    this.id = this.get(this.idAttribute);\n\n    // Trigger all relevant attribute changes.\n    if (!silent) {\n      if (changes.length) {\n        this._pending = options;\n      }\n      for (let i = 0; i < changes.length; i++) {\n        this.trigger(\n          'change:' + changes[i],\n          this,\n          current[changes[i]],\n          options\n        );\n      }\n    }\n\n    // You might be wondering why there's a `while` loop here. Changes can\n    // be recursively nested within `\"change\"` events.\n    if (changing) {\n      return this;\n    }\n    if (!silent) {\n      while (this._pending) {\n        options = this._pending;\n        this._pending = false;\n        this.trigger('change', this, options);\n      }\n    }\n  } finally {\n    this._pending = false;\n    this._changing = false;\n  }\n  return this;\n}\n","import {\n  WidgetModel,\n  DOMWidgetModel,\n  DOMWidgetView,\n  WidgetView,\n} from './widget';\nimport { JUPYTER_WIDGETS_VERSION } from './version';\nimport { BROKEN_FILE_SVG_ICON } from './utils';\n\n// create a Widget Model that captures an error object\nexport function createErrorWidgetModel(\n  error: unknown,\n  msg?: string\n): typeof WidgetModel {\n  class ErrorWidget extends DOMWidgetModel {\n    constructor(attributes: any, options: any) {\n      attributes = {\n        ...attributes,\n        _view_name: 'ErrorWidgetView',\n        _view_module: '@jupyter-widgets/base',\n        _model_module_version: JUPYTER_WIDGETS_VERSION,\n        _view_module_version: JUPYTER_WIDGETS_VERSION,\n        msg: msg,\n        error: error,\n      };\n      super(attributes, options);\n      this.comm_live = true;\n    }\n  }\n  return ErrorWidget;\n}\n\nexport class ErrorWidgetView extends DOMWidgetView {\n  generateErrorMessage(): { msg?: string; stack: string } {\n    return {\n      msg: this.model.get('msg'),\n      stack: String(this.model.get('error').stack),\n    };\n  }\n  render(): void {\n    const { msg, stack } = this.generateErrorMessage();\n    this.el.classList.add('jupyter-widgets');\n\n    const content = document.createElement('div');\n    content.classList.add('jupyter-widgets-error-widget', 'icon-error');\n    content.innerHTML = BROKEN_FILE_SVG_ICON;\n    const text = document.createElement('pre');\n    text.style.textAlign = 'center';\n    text.innerText = 'Click to show javascript error.';\n    content.append(text);\n\n    this.el.appendChild(content);\n\n    let width: number;\n    let height: number;\n    this.el.onclick = () => {\n      if (content.classList.contains('icon-error')) {\n        height = height || content.clientHeight;\n        width = width || content.clientWidth;\n        content.classList.remove('icon-error');\n        content.innerHTML = `\n        <pre>[Open Browser Console for more detailed log - Double click to close this message]\\n${msg}\\n${stack}</pre>\n        `;\n        content.style.height = `${height}px`;\n        content.style.width = `${width}px`;\n        content.classList.add('text-error');\n      }\n    };\n    this.el.ondblclick = () => {\n      if (content.classList.contains('text-error')) {\n        content.classList.remove('text-error');\n        content.innerHTML = BROKEN_FILE_SVG_ICON;\n        content.append(text);\n        content.classList.add('icon-error');\n      }\n    };\n  }\n}\n\nexport function createErrorWidgetView(\n  error?: unknown,\n  msg?: string\n): typeof WidgetView {\n  return class InnerErrorWidgetView extends ErrorWidgetView {\n    generateErrorMessage(): { msg?: string; stack: string } {\n      return {\n        msg,\n        stack: String(error instanceof Error ? error.stack : error),\n      };\n    }\n  };\n}\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nexport * from './widget';\nexport * from './manager';\nexport * from './widget_layout';\nexport * from './widget_style';\nexport * from './services-shim';\nexport * from './viewlist';\nexport * from './version';\nexport * from './utils';\nexport * from './registry';\nexport * from './errorwidget';\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nimport { JSONObject } from '@lumino/coreutils';\n\nimport { IClassicComm, ICallbacks } from './services-shim';\n\nimport {\n  DOMWidgetModel,\n  DOMWidgetView,\n  WidgetModel,\n  WidgetView,\n} from './widget';\n\n/**\n * The options for a model.\n *\n * #### Notes\n * Either a comm or a model_id must be provided.\n */\nexport interface IModelOptions {\n  /**\n   * Target name of the widget model to create.\n   */\n  model_name: string;\n\n  /**\n   * Module name of the widget model to create.\n   */\n  model_module: string;\n\n  /**\n   * Semver version requirement for the model module.\n   */\n  model_module_version: string;\n\n  /**\n   * Target name of the widget view to create.\n   */\n  view_name?: string | null;\n\n  /**\n   * Module name of the widget view to create.\n   */\n  view_module?: string | null;\n\n  /**\n   * Semver version requirement for the view module.\n   */\n  view_module_version?: string;\n\n  /**\n   * Comm object associated with the widget.\n   */\n  comm?: any;\n\n  /**\n   * The model id to use. If not provided, the comm id of the comm is used.\n   */\n  model_id?: string;\n}\n\n/**\n * The options for a connected model.\n *\n * This gives all of the information needed to instantiate a comm to a new\n * widget on the kernel side (so view information is mandatory).\n *\n * #### Notes\n * Either a comm or a model_id must be provided.\n */\nexport interface IWidgetOptions extends IModelOptions {\n  /**\n   * Target name of the widget model to create.\n   */\n  model_name: string;\n\n  /**\n   * Module name of the widget model to create.\n   */\n  model_module: string;\n\n  /**\n   * Semver version requirement for the model module.\n   */\n  model_module_version: string;\n\n  /**\n   * Target name of the widget view to create.\n   */\n  view_name: string | null;\n\n  /**\n   * Module name of the widget view to create.\n   */\n  view_module: string | null;\n\n  /**\n   * Semver version requirement for the view module.\n   */\n  view_module_version: string;\n\n  /**\n   * Comm object associated with the widget.\n   */\n  comm?: IClassicComm;\n\n  /**\n   * The model id to use. If not provided, the comm id of the comm is used.\n   */\n  model_id?: string;\n}\n\n/**\n * The widget manager interface exposed on the Widget instances\n */\nexport interface IWidgetManager {\n  /**\n   * Get a promise for a model by model id.\n   *\n   * #### Notes\n   * If a model is not found, undefined is returned (NOT a promise). However,\n   * the calling code should also deal with the case where a rejected promise\n   * is returned, and should treat that also as a model not found.\n   */\n  get_model(model_id: string): Promise<WidgetModel>;\n\n  /**\n   * Returns true if the given model is registered, otherwise false.\n   *\n   * #### Notes\n   * This is a synchronous way to check if a model is registered.\n   */\n  has_model(model_id: string): boolean;\n\n  /**\n   * Register a model instance promise with the manager.\n   *\n   * By registering the model, it can later be retrieved with `get_model`.\n   */\n  register_model(model_id: string, modelPromise: Promise<WidgetModel>): void;\n\n  /**\n   * Create a comm and new widget model.\n   * @param  options - same options as new_model but comm is not\n   *                          required and additional options are available.\n   * @param  serialized_state - serialized model attributes.\n   */\n  new_widget(\n    options: IWidgetOptions,\n    serialized_state?: JSONObject\n  ): Promise<WidgetModel>;\n\n  /**\n   * Create and return a promise for a new widget model\n   *\n   * @param options - the options for creating the model.\n   * @param serialized_state - attribute values for the model.\n   *\n   * @example\n   * widget_manager.new_model({\n   *      model_name: 'IntSlider',\n   *      model_module: '@jupyter-widgets/controls',\n   *      model_module_version: '1.0.0',\n   *      model_id: 'u-u-i-d'\n   * }).then((model) => { console.log('Create success!', model); },\n   *  (err) => {console.error(err)});\n   *\n   */\n  new_model(\n    options: IModelOptions,\n    serialized_state?: JSONObject\n  ): Promise<WidgetModel>;\n\n  /**\n   * Creates a promise for a view of a given model\n   *\n   * Make sure the view creation is not out of order with\n   * any state updates.\n   */\n  create_view<VT extends DOMWidgetView = DOMWidgetView>(\n    model: DOMWidgetModel,\n    options?: unknown\n  ): Promise<VT>;\n  create_view<VT extends WidgetView = WidgetView>(\n    model: WidgetModel,\n    options?: unknown\n  ): Promise<VT>;\n\n  /**\n   * callback handlers specific to a view\n   */\n  callbacks(view?: WidgetView): ICallbacks;\n\n  /**\n   * Resolve a URL relative to the current notebook location.\n   *\n   * The default implementation just returns the original url.\n   */\n  resolveUrl(url: string): Promise<string>;\n\n  inline_sanitize(s: string): string;\n}\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\n/*\n This file contains substantial portions of https://github.com/akre54/Backbone.NativeView/blob/521188d9554b53d95d70ed34f878d8ac9fc10df2/backbone.nativeview.js, which has the following license:\n\n(c) 2015 Adam Krebs, Jimmy Yuen Ho Wong\nBackbone.NativeView may be freely distributed under the MIT license.\n\nCopyright (c) 2014 Adam Krebs\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\nimport * as Backbone from 'backbone';\n\n// Caches a local reference to `Element.prototype` for faster access.\nconst ElementProto: any =\n  typeof Element !== 'undefined' ? Element.prototype : undefined;\n\n// Find the right `Element#matches` for IE>=9 and modern browsers.\nfunction matchesFallback(selector: string): boolean {\n  const matches = (this.document || this.ownerDocument).querySelectorAll(\n    selector\n  );\n  let i = matches.length;\n  while (--i >= 0 && matches.item(i) !== this) {\n    continue;\n  }\n  return i > -1;\n}\n\nconst matchesSelector = ElementProto\n  ? ElementProto.matches ||\n    ElementProto['webkitMatchesSelector'] ||\n    ElementProto['mozMatchesSelector'] ||\n    ElementProto['msMatchesSelector'] ||\n    ElementProto['oMatchesSelector'] ||\n    matchesFallback\n  : matchesFallback;\n\ninterface IDOMEvent {\n  eventName: string;\n  handler: any;\n  listener: any;\n  selector: string;\n}\n\nexport class NativeView<T extends Backbone.Model> extends Backbone.View<T> {\n  _removeElement(): void {\n    this.undelegateEvents();\n    if (this.el.parentNode) {\n      this.el.parentNode.removeChild(this.el);\n    }\n  }\n\n  // Apply the `element` to the view.\n  _setElement(element: HTMLElement): void {\n    this.el = element;\n  }\n\n  // Set a hash of attributes to the view's `el`. We use the \"prop\" version\n  // if available, falling back to `setAttribute` for the catch-all.\n  _setAttributes(attrs: Backbone.ObjectHash): void {\n    for (const attr in attrs) {\n      attr in this.el\n        ? ((this.el as any)[attr] = attrs[attr])\n        : this.el.setAttribute(attr, attrs[attr]);\n    }\n  }\n\n  /**\n   * Make an event delegation handler for the given `eventName` and `selector`\n   * and attach it to `this.el`.\n   * If selector is empty, the listener will be bound to `this.el`. If not, a\n   * new handler that will recursively traverse up the event target's DOM\n   * hierarchy looking for a node that matches the selector. If one is found,\n   * the event's `delegateTarget` property is set to it and the return the\n   * result of calling bound `listener` with the parameters given to the\n   * handler.\n   *\n   * This does not properly handle selectors for things like focus and blur (see\n   * https://github.com/jquery/jquery/blob/7d21f02b9ec9f655583e898350badf89165ed4d5/src/event.js#L442\n   * for some similar exceptional cases).\n   */\n  delegate(eventName: string, listener: Function): this;\n  delegate(eventName: string, selector: string, listener: Function): this;\n  delegate(\n    eventName: string,\n    selector: string | Function,\n    listener?: any\n  ): this {\n    if (typeof selector !== 'string') {\n      listener = selector;\n      selector = null!;\n    }\n\n    // We have to initialize this here, instead of in the constructor, because the\n    // super constructor eventually calls this method before we get a chance to initialize\n    // this._domEvents to an empty list.\n    if (this._domEvents === void 0) {\n      this._domEvents = [];\n    }\n\n    const root = this.el;\n    const handler = selector\n      ? function (e: Event): any {\n          let node = (e.target as HTMLElement) || (e.srcElement as HTMLElement);\n          for (; node && node !== root; node = node.parentNode as HTMLElement) {\n            if (matchesSelector.call(node, selector)) {\n              (e as any).delegateTarget = node;\n              if (listener.handleEvent) {\n                return listener.handleEvent(e);\n              } else {\n                return listener(e);\n              }\n            }\n          }\n        }\n      : listener;\n\n    this.el.addEventListener(eventName, handler, false);\n    this._domEvents.push({ eventName, handler, listener, selector });\n    return handler;\n  }\n\n  // Remove a single delegated event. Either `eventName` or `selector` must\n  // be included, `selector` and `listener` are optional.\n  undelegate(eventName: string, selector?: string, listener?: Function): this;\n  undelegate(selector: string, listener?: Function): this;\n  undelegate(\n    eventName: string,\n    selector?: string | Function,\n    listener?: Function\n  ): NativeView<T> {\n    if (typeof selector === 'function') {\n      listener = selector;\n      selector = null!;\n    }\n\n    if (this.el && this._domEvents) {\n      const handlers = this._domEvents.slice();\n      let i = handlers.length;\n      while (i--) {\n        const item = handlers[i];\n\n        const match =\n          item.eventName === eventName &&\n          (listener ? item.listener === listener : true) &&\n          (selector ? item.selector === selector : true);\n\n        if (!match) {\n          continue;\n        }\n\n        this.el.removeEventListener(item.eventName, item.handler, false);\n        this._domEvents.splice(i, 1);\n      }\n    }\n    return this;\n  }\n\n  // Remove all events created with `delegate` from `el`\n  undelegateEvents(): this {\n    if (this.el && this._domEvents) {\n      const len = this._domEvents.length;\n      for (let i = 0; i < len; i++) {\n        const item = this._domEvents[i];\n        this.el.removeEventListener(item.eventName, item.handler, false);\n      }\n      this._domEvents.length = 0;\n    }\n    return this;\n  }\n\n  private _domEvents: IDOMEvent[];\n}\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nimport { Token } from '@lumino/coreutils';\n\nimport { WidgetModel, WidgetView } from './widget';\n\n/**\n * A runtime interface token for a widget registry.\n */\nexport const IJupyterWidgetRegistry = new Token<IJupyterWidgetRegistry>(\n  'jupyter.extensions.jupyterWidgetRegistry'\n);\n\n/**\n * A registry of Jupyter Widgets.\n *\n * This is used by widget managers that support an external registry.\n */\nexport interface IJupyterWidgetRegistry {\n  /**\n   * Register a widget module.\n   */\n  registerWidget(data: IWidgetRegistryData): void;\n}\n\nexport type ExportMap = {\n  [key: string]: typeof WidgetModel | typeof WidgetView;\n};\n\nexport type ExportData =\n  | ExportMap\n  | Promise<ExportMap>\n  | (() => ExportMap)\n  | (() => Promise<ExportMap>);\n\nexport interface IWidgetRegistryData {\n  /**\n   * The widget module name.\n   */\n  name: string;\n\n  /**\n   * The widget module version.\n   */\n  version: string;\n\n  /**\n   * A map of object names to widget classes provided by the module, or a\n   * promise to such a map, or a function returning the same.\n   */\n  exports: ExportData;\n}\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\n/**\n * This module defines shims for @jupyterlab/services that allows you to use the\n * old comm API.  Use this, @jupyterlab/services, and the widget base manager to\n * embed live widgets in a context outside of the notebook.\n */\n\nimport { Kernel, KernelMessage } from '@jupyterlab/services';\nimport type { JSONValue, JSONObject } from '@lumino/coreutils';\n\n/**\n * Callbacks for services shim comms.\n */\nexport interface ICallbacks {\n  shell?: { [key: string]: (msg: KernelMessage.IShellMessage) => void };\n  iopub?: { [key: string]: (msg: KernelMessage.IIOPubMessage) => void };\n  input?: (msg: KernelMessage.IStdinMessage) => void;\n}\n\nexport interface IClassicComm {\n  /**\n   * Comm id\n   * @return {string}\n   */\n  comm_id: string;\n\n  /**\n   * Target name\n   * @return {string}\n   */\n  target_name: string;\n\n  /**\n   * Opens a sibling comm in the backend\n   * @param  data\n   * @param  callbacks\n   * @param  metadata\n   * @param  buffers\n   * @return msg id\n   */\n  open(\n    data: JSONValue,\n    callbacks?: ICallbacks,\n    metadata?: JSONObject,\n    buffers?: ArrayBuffer[] | ArrayBufferView[]\n  ): string;\n\n  /**\n   * Sends a message to the sibling comm in the backend\n   * @param  data\n   * @param  callbacks\n   * @param  metadata\n   * @param  buffers\n   * @return message id\n   */\n  send(\n    data: JSONValue,\n    callbacks?: ICallbacks,\n    metadata?: JSONObject,\n    buffers?: ArrayBuffer[] | ArrayBufferView[]\n  ): string;\n\n  /**\n   * Closes the sibling comm in the backend\n   * @param  data\n   * @param  callbacks\n   * @param  metadata\n   * @param  buffers\n   * @return msg id\n   */\n  close(\n    data?: JSONValue,\n    callbacks?: ICallbacks,\n    metadata?: JSONObject,\n    buffers?: ArrayBuffer[] | ArrayBufferView[]\n  ): string;\n\n  /**\n   * Register a message handler\n   * @param  callback, which is given a message\n   */\n  on_msg(callback: (x: any) => void): void;\n\n  /**\n   * Register a handler for when the comm is closed by the backend\n   * @param  callback, which is given a message\n   */\n  on_close(callback: (x: any) => void): void;\n}\n\nexport namespace shims {\n  export namespace services {\n    /**\n     * Public constructor\n     * @param jsServicesKernel - @jupyterlab/services Kernel.IKernel instance\n     */\n    export class CommManager {\n      constructor(jsServicesKernel: Kernel.IKernelConnection) {\n        this.init_kernel(jsServicesKernel);\n      }\n\n      /**\n       * Hookup kernel events.\n       * @param  {Kernel.IKernel} jsServicesKernel - @jupyterlab/services Kernel.IKernel instance\n       */\n      init_kernel(jsServicesKernel: Kernel.IKernelConnection): void {\n        this.kernel = jsServicesKernel; // These aren't really the same.\n        this.jsServicesKernel = jsServicesKernel;\n      }\n\n      /**\n       * Creates a new connected comm\n       */\n      async new_comm(\n        target_name: string,\n        data: any,\n        callbacks: any,\n        metadata: any,\n        comm_id: string,\n        buffers?: ArrayBuffer[] | ArrayBufferView[]\n      ): Promise<Comm> {\n        const c = this.jsServicesKernel.createComm(target_name, comm_id);\n        const comm = new Comm(c);\n        this.register_comm(comm);\n        comm.open(data, callbacks, metadata, buffers);\n        return comm;\n      }\n\n      /**\n       * Register a comm target\n       * @param  {string} target_name\n       * @param  {(Comm, object) => void} f - callback that is called when the\n       *                         comm is made.  Signature of f(comm, msg).\n       */\n      register_target(\n        target_name: string,\n        f: (comm: Comm, object: KernelMessage.IMessage) => void\n      ): void {\n        const handle = this.jsServicesKernel.registerCommTarget(\n          target_name,\n          (jsServicesComm, msg) => {\n            // Create the comm.\n            const comm = new Comm(jsServicesComm);\n            this.register_comm(comm);\n\n            // Call the callback for the comm.\n            try {\n              return f(comm, msg);\n            } catch (e) {\n              comm.close();\n              console.error(e);\n              console.error(new Error('Exception opening new comm'));\n            }\n          }\n        );\n        this.targets[target_name] = handle;\n      }\n\n      /**\n       * Unregisters a comm target\n       * @param  {string} target_name\n       */\n      unregister_target(\n        target_name: string,\n        f: (comm: Comm, object: KernelMessage.IMessage) => void\n      ): void {\n        const handle = this.targets[target_name];\n        handle.dispose();\n        delete this.targets[target_name];\n      }\n\n      /**\n       * Register a comm in the mapping\n       */\n      register_comm(comm: Comm): string {\n        this.comms[comm.comm_id] = Promise.resolve(comm);\n        comm.kernel = this.kernel;\n        return comm.comm_id;\n      }\n\n      targets = Object.create(null);\n      comms = Object.create(null);\n      kernel: Kernel.IKernelConnection;\n      jsServicesKernel: Kernel.IKernelConnection;\n    }\n\n    /**\n     * Public constructor\n     * @param  {IComm} jsServicesComm - @jupyterlab/services IComm instance\n     */\n    export class Comm implements IClassicComm {\n      constructor(jsServicesComm: Kernel.IComm) {\n        this.jsServicesComm = jsServicesComm;\n      }\n\n      /**\n       * Comm id\n       * @return {string}\n       */\n      get comm_id(): string {\n        return this.jsServicesComm.commId;\n      }\n\n      /**\n       * Target name\n       * @return {string}\n       */\n      get target_name(): string {\n        return this.jsServicesComm.targetName;\n      }\n\n      /**\n       * Opens a sibling comm in the backend\n       * @param  data\n       * @param  callbacks\n       * @param  metadata\n       * @return msg id\n       */\n      open(\n        data: JSONValue,\n        callbacks?: ICallbacks,\n        metadata?: JSONObject,\n        buffers?: ArrayBuffer[] | ArrayBufferView[]\n      ): string {\n        const future = this.jsServicesComm.open(data, metadata, buffers);\n        this._hookupCallbacks(future, callbacks);\n        return future.msg.header.msg_id;\n      }\n\n      /**\n       * Sends a message to the sibling comm in the backend\n       * @param  data\n       * @param  callbacks\n       * @param  metadata\n       * @param  buffers\n       * @return message id\n       */\n      send(\n        data: JSONValue,\n        callbacks?: ICallbacks,\n        metadata?: JSONObject,\n        buffers?: ArrayBuffer[] | ArrayBufferView[]\n      ): string {\n        const future = this.jsServicesComm.send(data, metadata, buffers);\n        this._hookupCallbacks(future, callbacks);\n        return future.msg.header.msg_id;\n      }\n\n      /**\n       * Closes the sibling comm in the backend\n       * @param  data\n       * @param  callbacks\n       * @param  metadata\n       * @return msg id\n       */\n      close(\n        data?: JSONValue,\n        callbacks?: ICallbacks,\n        metadata?: JSONObject,\n        buffers?: ArrayBuffer[] | ArrayBufferView[]\n      ): string {\n        const future = this.jsServicesComm.close(data, metadata, buffers);\n        this._hookupCallbacks(future, callbacks);\n        return future.msg.header.msg_id;\n      }\n\n      /**\n       * Register a message handler\n       * @param  callback, which is given a message\n       */\n      on_msg(callback: (x: any) => void): void {\n        this.jsServicesComm.onMsg = callback.bind(this);\n      }\n\n      /**\n       * Register a handler for when the comm is closed by the backend\n       * @param  callback, which is given a message\n       */\n      on_close(callback: (x: any) => void): void {\n        this.jsServicesComm.onClose = callback.bind(this);\n      }\n\n      /**\n       * Hooks callback object up with @jupyterlab/services IKernelFuture\n       * @param  @jupyterlab/services IKernelFuture instance\n       * @param  callbacks\n       */\n      _hookupCallbacks(\n        future: Kernel.IShellFuture,\n        callbacks?: ICallbacks\n      ): void {\n        if (callbacks) {\n          future.onReply = function (msg): void {\n            if (callbacks.shell && callbacks.shell.reply) {\n              callbacks.shell.reply(msg);\n            }\n          };\n\n          future.onStdin = function (msg): void {\n            if (callbacks.input) {\n              callbacks.input(msg);\n            }\n          };\n\n          future.onIOPub = function (msg): void {\n            if (callbacks.iopub) {\n              if (callbacks.iopub.status && msg.header.msg_type === 'status') {\n                callbacks.iopub.status(msg);\n              } else if (\n                callbacks.iopub.clear_output &&\n                msg.header.msg_type === 'clear_output'\n              ) {\n                callbacks.iopub.clear_output(msg);\n              } else if (callbacks.iopub.output) {\n                switch (msg.header.msg_type) {\n                  case 'display_data':\n                  case 'execute_result':\n                  case 'stream':\n                  case 'error':\n                    callbacks.iopub.output(msg);\n                    break;\n                  default:\n                    break;\n                }\n              }\n            }\n          };\n        }\n      }\n\n      jsServicesComm: Kernel.IComm;\n      kernel: Kernel.IKernelConnection;\n    }\n  }\n}\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nimport { JSONObject, JSONValue, UUID, JSONExt } from '@lumino/coreutils';\n\nimport _isEqual from 'lodash/isEqual';\n\n/**\n * Find all strings in the first argument that are not in the second.\n */\nexport function difference(a: string[], b: string[]): string[] {\n  return a.filter((v) => b.indexOf(v) === -1);\n}\n\n/**\n * Compare two objects deeply to see if they are equal.\n */\nexport function isEqual(a: unknown, b: unknown): boolean {\n  return _isEqual(a, b);\n}\n\n/**\n * A polyfill for Object.assign\n *\n * This is from code that Typescript 2.4 generates for a polyfill.\n */\nexport const assign =\n  (Object as any).assign ||\n  function (t: any, ...args: any[]): any {\n    for (let i = 1; i < args.length; i++) {\n      const s = args[i];\n      for (const p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) {\n          t[p] = s[p];\n        }\n      }\n    }\n    return t;\n  };\n\n/**\n * Generate a UUID\n *\n * http://www.ietf.org/rfc/rfc4122.txt\n */\nexport function uuid(): string {\n  return UUID.uuid4();\n}\n\n/**\n * A simple dictionary type.\n */\nexport type Dict<T> = { [keys: string]: T };\n\n/**\n * Resolve a promiseful dictionary.\n * Returns a single Promise.\n */\nexport function resolvePromisesDict<V>(\n  d: Dict<PromiseLike<V> | V>\n): Promise<Dict<V>> {\n  const keys = Object.keys(d);\n  const values: (PromiseLike<V> | V)[] = [];\n  keys.forEach(function (key) {\n    values.push(d[key]);\n  });\n  return Promise.all(values).then((v) => {\n    const d: Dict<V> = {};\n    for (let i = 0; i < keys.length; i++) {\n      d[keys[i]] = v[i];\n    }\n    return d;\n  });\n}\n\n/**\n * Creates a wrappable Promise rejection function.\n *\n * Creates a function that logs an error message before rethrowing\n * the original error that caused the promise to reject.\n */\nexport function reject(message: string, log: boolean) {\n  return function promiseRejection(error: Error): never {\n    if (log) {\n      console.error(new Error(message));\n    }\n    throw error;\n  };\n}\n\n/**\n * Takes an object 'state' and fills in buffer[i] at 'path' buffer_paths[i]\n * where buffer_paths[i] is a list indicating where in the object buffer[i] should\n * be placed\n * Example: state = {a: 1, b: {}, c: [0, null]}\n * buffers = [array1, array2]\n * buffer_paths = [['b', 'data'], ['c', 1]]\n * Will lead to {a: 1, b: {data: array1}, c: [0, array2]}\n */\nexport function put_buffers(\n  state: Dict<BufferJSON>,\n  buffer_paths: (string | number)[][],\n  buffers: (\n    | DataView\n    | ArrayBuffer\n    | ArrayBufferView\n    | { buffer: ArrayBuffer }\n  )[]\n): void {\n  for (let i = 0; i < buffer_paths.length; i++) {\n    const buffer_path = buffer_paths[i];\n    // make sure the buffers are DataViews\n    let buffer = buffers[i];\n    if (!(buffer instanceof DataView)) {\n      buffer = new DataView(\n        buffer instanceof ArrayBuffer ? buffer : buffer.buffer\n      );\n    }\n    // say we want to set state[x][y][z] = buffer\n    let obj = state as any;\n    // we first get obj = state[x][y]\n    for (let j = 0; j < buffer_path.length - 1; j++) {\n      obj = obj[buffer_path[j]];\n    }\n    // and then set: obj[z] = buffer\n    obj[buffer_path[buffer_path.length - 1]] = buffer;\n  }\n}\n\nexport interface ISerializedState {\n  state: JSONObject;\n  buffers: ArrayBuffer[];\n  buffer_paths: (string | number)[][];\n}\n\nexport interface ISerializeable {\n  toJSON(options?: {}): JSONObject;\n}\n\nexport type BufferJSON =\n  | { [property: string]: BufferJSON }\n  | BufferJSON[]\n  | string\n  | number\n  | boolean\n  | null\n  | ArrayBuffer\n  | DataView;\n\nexport function isSerializable(object: unknown): object is ISerializeable {\n  return (typeof object === 'object' && object && 'toJSON' in object) ?? false;\n}\n\nexport function isObject(data: BufferJSON): data is Dict<BufferJSON> {\n  return JSONExt.isObject(data as JSONValue);\n}\n\n/**\n * The inverse of put_buffers, return an objects with the new state where all buffers(ArrayBuffer)\n * are removed. If a buffer is a member of an object, that object is cloned, and the key removed. If a buffer\n * is an element of an array, that array is cloned, and the element is set to null.\n * See put_buffers for the meaning of buffer_paths\n * Returns an object with the new state (.state) an array with paths to the buffers (.buffer_paths),\n * and the buffers associated to those paths (.buffers).\n */\nexport function remove_buffers(\n  state: BufferJSON | ISerializeable\n): ISerializedState {\n  const buffers: ArrayBuffer[] = [];\n  const buffer_paths: (string | number)[][] = [];\n  // if we need to remove an object from a list, we need to clone that list, otherwise we may modify\n  // the internal state of the widget model\n  // however, we do not want to clone everything, for performance\n  function remove(\n    obj: BufferJSON | ISerializeable,\n    path: (string | number)[]\n  ): BufferJSON {\n    if (isSerializable(obj)) {\n      // We need to get the JSON form of the object before recursing.\n      // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON()_behavior\n      obj = obj.toJSON();\n    }\n    if (Array.isArray(obj)) {\n      let is_cloned = false;\n      for (let i = 0; i < obj.length; i++) {\n        const value = obj[i];\n        if (value) {\n          if (value instanceof ArrayBuffer || ArrayBuffer.isView(value)) {\n            if (!is_cloned) {\n              obj = obj.slice();\n              is_cloned = true;\n            }\n            buffers.push(ArrayBuffer.isView(value) ? value.buffer : value);\n            buffer_paths.push(path.concat([i]));\n            // easier to just keep the array, but clear the entry, otherwise we have to think\n            // about array length, much easier this way\n            obj[i] = null;\n          } else {\n            const new_value = remove(value, path.concat([i]));\n            // only assigned when the value changes, we may serialize objects that don't support assignment\n            if (new_value !== value) {\n              if (!is_cloned) {\n                obj = obj.slice();\n                is_cloned = true;\n              }\n              obj[i] = new_value;\n            }\n          }\n        }\n      }\n    } else if (isObject(obj)) {\n      for (const key in obj) {\n        let is_cloned = false;\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          const value = obj[key];\n          if (value) {\n            if (value instanceof ArrayBuffer || ArrayBuffer.isView(value)) {\n              if (!is_cloned) {\n                obj = { ...obj };\n                is_cloned = true;\n              }\n              buffers.push(ArrayBuffer.isView(value) ? value.buffer : value);\n              buffer_paths.push(path.concat([key]));\n              delete obj[key]; // for objects/dicts we just delete them\n            } else {\n              const new_value = remove(value, path.concat([key]));\n              // only assigned when the value changes, we may serialize objects that don't support assignment\n              if (new_value !== value) {\n                if (!is_cloned) {\n                  obj = { ...obj };\n                  is_cloned = true;\n                }\n                obj[key] = new_value;\n              }\n            }\n          }\n        }\n      }\n    }\n    return obj;\n  }\n  const new_state = remove(state, []) as JSONObject;\n  return { state: new_state, buffers: buffers, buffer_paths: buffer_paths };\n}\n\nexport const BROKEN_FILE_SVG_ICON = `<svg style=\"height:50%;max-height: 50px;\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\n<g >\n  <g transform=\"translate(0.24520123,0.93464292)\">\n    <path  d=\"M 8.2494641,21.074514 V 5.6225142 c 0,-0.314 0.254,-0.567 0.57,-0.567 H 29.978464 c 2.388,0 9.268,5.8269998 9.268,8.3029998 v 5.5835 l -3.585749,4.407396 -2.772971,-3.535534 -5.126524,3.414213 -5.944543,-3.237436 -5.722718,3.06066 z m 30.9969999,3.8675 v 15.5835 c 0,0.314 -0.254,0.567 -0.57,0.567 H 8.8194641 c -0.315,0.002 -0.57,-0.251 -0.57,-0.566 v -15.452 l 7.8444949,2.628449 5.656854,-2.65165 4.24264,3.005204 5.833631,-3.237437 3.712311,3.944543 z\" style=\"fill:url(#linearGradient3448);stroke:#888a85\"  />\n    <path d=\"m 30.383464,12.110514 c 4.108,0.159 7.304,-0.978 8.867,1.446 0.304,-3.9679998 -7.254,-8.8279998 -9.285,-8.4979998 0.813,0.498 0.418,7.0519998 0.418,7.0519998 z\" style=\"fill:url(#linearGradient3445);stroke:#868a84\" />\n    <path enable-background=\"new\" d=\"m 31.443464,11.086514 c 2.754,-0.019 4.106,-0.49 5.702,0.19 -1.299,-1.8809998 -4.358,-3.3439998 -5.728,-4.0279998 0.188,0.775 0.026,3.8379998 0.026,3.8379998 z\" style=\"opacity:0.36930003;fill:none;stroke:url(#linearGradient3442)\" />\n  </g>\n</g>\n</svg>`;\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nexport const JUPYTER_WIDGETS_VERSION = '2.0.0';\n\nexport const PROTOCOL_VERSION = '2.1.0';\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\n/**\n * - create_view and remove_view are default functions called when adding or removing views\n * - create_view takes a model and an index and returns a view or a promise for a view for that model\n * - remove_view takes a view and destroys it (including calling `view.remove()`)\n * - each time the update() function is called with a new list, the create and remove\n *   callbacks will be called in an order so that if you append the views created in the\n *   create callback and remove the views in the remove callback, you will duplicate\n *   the order of the list.\n * - the remove callback defaults to just removing the view (e.g., pass in null for the second parameter)\n * - the context defaults to the created ViewList.  If you pass another context, the create and remove\n *   will be called in that context.\n */\nexport class ViewList<T> {\n  constructor(\n    create_view: (model: any, index: any) => T | Promise<T>,\n    remove_view: ((view: T) => void) | null,\n    context: any\n  ) {\n    this.initialize(create_view, remove_view, context);\n  }\n\n  initialize(\n    create_view: (model: any, index: any) => T | Promise<T>,\n    remove_view: ((view: T) => void) | null,\n    context: any\n  ): void {\n    this._handler_context = context || this;\n    this._models = [];\n    this.views = []; // list of promises for views\n    this._create_view = create_view;\n    this._remove_view =\n      remove_view ||\n      function (view): void {\n        (view as any).remove();\n      };\n  }\n\n  /**\n   * the create_view, remove_view, and context arguments override the defaults\n   * specified when the list is created.\n   * after this function, the .views attribute is a list of promises for views\n   * if you want to perform some action on the list of views, do something like\n   * `Promise.all(myviewlist.views).then(function(views) {...});`\n   */\n  update(\n    new_models: any[],\n    create_view?: (model: any, index: any) => T | Promise<T>,\n    remove_view?: (view: T) => void,\n    context?: any\n  ): Promise<T[]> {\n    const remove = remove_view || this._remove_view;\n    const create = create_view || this._create_view;\n    context = context || this._handler_context;\n    let i = 0;\n    // first, skip past the beginning of the lists if they are identical\n    for (; i < new_models.length; i++) {\n      if (i >= this._models.length || new_models[i] !== this._models[i]) {\n        break;\n      }\n    }\n    const first_removed = i;\n    // Remove the non-matching items from the old list.\n    const removed = this.views.splice(\n      first_removed,\n      this.views.length - first_removed\n    );\n    for (let j = 0; j < removed.length; j++) {\n      removed[j].then(function (view) {\n        remove.call(context, view);\n      });\n    }\n\n    // Add the rest of the new list items.\n    for (; i < new_models.length; i++) {\n      this.views.push(Promise.resolve(create.call(context, new_models[i], i)));\n    }\n    // make a copy of the input array\n    this._models = new_models.slice();\n    // return a promise that resolves to all of the resolved views\n    return Promise.all(this.views);\n  }\n\n  /**\n   * removes every view in the list; convenience function for `.update([])`\n   * that should be faster\n   * returns a promise that resolves after this removal is done\n   */\n  remove(): Promise<void> {\n    return Promise.all(this.views).then((views) => {\n      views.forEach((value) =>\n        this._remove_view.call(this._handler_context, value)\n      );\n      this.views = [];\n      this._models = [];\n    });\n  }\n\n  /**\n   * Dispose this viewlist.\n   *\n   * A synchronous function which just deletes references to child views. This\n   * function does not call .remove() on child views because that is\n   * asynchronous. Use this in cases where child views will be removed in\n   * another way.\n   */\n  dispose(): void {\n    this.views = null!;\n    this._models = null!;\n  }\n\n  _handler_context: any;\n  _models: any[];\n  views: Promise<T>[];\n  _create_view: (model: any, index: any) => T | Promise<T>;\n  _remove_view: (view: T) => void;\n}\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nimport * as utils from './utils';\nimport * as backbonePatch from './backbone-patch';\n\nimport * as Backbone from 'backbone';\nimport $ from 'jquery';\n\nimport { NativeView } from './nativeview';\n\nimport { JSONObject, JSONValue, JSONExt } from '@lumino/coreutils';\n\nimport { Message, MessageLoop } from '@lumino/messaging';\n\nimport { Widget, Panel } from '@lumino/widgets';\n\nimport { LayoutModel } from './widget_layout';\n\nimport { StyleModel } from './widget_style';\n\nimport { IWidgetManager } from './manager';\n\nimport { IClassicComm, ICallbacks } from './services-shim';\n\nimport { JUPYTER_WIDGETS_VERSION } from './version';\n\nimport { BufferJSON, Dict } from './utils';\n\nimport { KernelMessage } from '@jupyterlab/services';\n\n/**\n * The magic key used in the widget graph serialization.\n */\nconst IPY_MODEL_ = 'IPY_MODEL_';\n\n/**\n * Replace model ids with models recursively.\n */\nexport function unpack_models(\n  value: any | Dict<unknown> | string | (Dict<unknown> | string)[],\n  manager?: IWidgetManager // actually required, but typed to be compatible with ISerializers\n): Promise<WidgetModel | Dict<WidgetModel> | WidgetModel[] | any> {\n  if (Array.isArray(value)) {\n    const unpacked: any[] = [];\n    for (const sub_value of value) {\n      unpacked.push(unpack_models(sub_value, manager));\n    }\n    return Promise.all(unpacked);\n  } else if (value instanceof Object && typeof value !== 'string') {\n    const unpacked: { [key: string]: any } = {};\n    for (const [key, sub_value] of Object.entries(value)) {\n      unpacked[key] = unpack_models(sub_value, manager);\n    }\n    return utils.resolvePromisesDict(unpacked);\n  } else if (typeof value === 'string' && value.slice(0, 10) === IPY_MODEL_) {\n    // get_model returns a promise already\n    return manager!.get_model(value.slice(10, value.length));\n  } else {\n    return Promise.resolve(value);\n  }\n}\n\n/** Replace models with ids recursively.\n *\n * If the commonly-used `unpack_models` is given as the `deseralize` method,\n * pack_models would be the appropriate `serialize`.\n * However, the default serialize method will have the same effect, when\n * `unpack_models` is used as the deserialize method.\n * This is to ensure backwards compatibility, see:\n *   https://github.com/jupyter-widgets/ipywidgets/pull/3738/commits/f9e27328bb631eb5247a7a6563595d3e655492c7#diff-efb19099381ae8911dd7f69b015a0138d08da7164512c1ee112aa75100bc9be2\n */\nexport function pack_models(\n  value: WidgetModel | Dict<WidgetModel> | WidgetModel[] | any,\n  widget?: WidgetModel\n): any | Dict<unknown> | string | (Dict<unknown> | string)[] {\n  if (Array.isArray(value)) {\n    const model_ids: string[] = [];\n    for (const model of value) {\n      model_ids.push(pack_models(model, widget));\n    }\n    return model_ids;\n  } else if (value instanceof WidgetModel) {\n    return `${IPY_MODEL_}${value.model_id}`;\n  } else if (value instanceof Object && typeof value !== 'string') {\n    const packed: { [key: string]: string } = {};\n    for (const [key, sub_value] of Object.entries(value)) {\n      packed[key] = pack_models(sub_value, widget);\n    }\n    return packed;\n  } else {\n    return value;\n  }\n}\n\n/**\n * Type declaration for general widget serializers.\n */\nexport interface ISerializers {\n  [key: string]: {\n    deserialize?: (value?: any, manager?: IWidgetManager) => any;\n    serialize?: (value?: any, widget?: WidgetModel) => any;\n  };\n}\n\nexport interface IBackboneModelOptions extends Backbone.ModelSetOptions {\n  model_id: string;\n  comm?: any;\n  widget_manager: any;\n}\n\nexport class WidgetModel extends Backbone.Model {\n  /**\n   * The default attributes.\n   */\n  defaults(): Backbone.ObjectHash {\n    return {\n      _model_module: '@jupyter-widgets/base',\n      _model_name: 'WidgetModel',\n      _model_module_version: JUPYTER_WIDGETS_VERSION,\n      _view_module: '@jupyter-widgets/base',\n      _view_name: null as string | null,\n      _view_module_version: JUPYTER_WIDGETS_VERSION,\n      _view_count: null as number | null,\n    };\n  }\n\n  /**\n   * Test to see if the model has been synced with the server.\n   *\n   * #### Notes\n   * As of backbone 1.1, backbone ignores `patch` if it thinks the\n   * model has never been pushed.\n   */\n  isNew(): boolean {\n    return false;\n  }\n\n  /**\n   * Constructor\n   *\n   * Initializes a WidgetModel instance. Called by the Backbone constructor.\n   *\n   * Parameters\n   * ----------\n   * widget_manager : WidgetManager instance\n   * model_id : string\n   *      An ID unique to this model.\n   * comm : Comm instance (optional)\n   */\n  initialize(\n    attributes: Backbone.ObjectHash,\n    options: IBackboneModelOptions\n  ): void {\n    this._expectedEchoMsgIds = new Map<string, string>();\n    this._attrsToUpdate = new Set<string>();\n\n    super.initialize(attributes, options);\n\n    // Attributes should be initialized here, since user initialization may depend on it\n    this.widget_manager = options.widget_manager;\n    this.model_id = options.model_id;\n    const comm = options.comm;\n\n    this.views = Object.create(null);\n    this.state_change = Promise.resolve();\n\n    this._closed = false;\n    this._state_lock = null;\n    this._msg_buffer = null;\n    this._msg_buffer_callbacks = null;\n    this._pending_msgs = 0;\n\n    // _buffered_state_diff must be created *after* the super.initialize\n    // call above. See the note in the set() method below.\n    this._buffered_state_diff = {};\n\n    if (comm) {\n      // Remember comm associated with the model.\n      this.comm = comm;\n\n      // Hook comm messages up to model.\n      comm.on_close(this._handle_comm_closed.bind(this));\n      comm.on_msg(this._handle_comm_msg.bind(this));\n\n      this.comm_live = true;\n    } else {\n      this.comm_live = false;\n    }\n  }\n\n  get comm_live(): boolean {\n    return this._comm_live;\n  }\n  set comm_live(x) {\n    this._comm_live = x;\n    this.trigger('comm_live_update');\n  }\n\n  /**\n   * Send a custom msg over the comm.\n   */\n  send(\n    content: JSONValue,\n    callbacks?: ICallbacks,\n    buffers?: ArrayBuffer[] | ArrayBufferView[]\n  ): void {\n    if (this.comm !== undefined) {\n      const data = { method: 'custom', content: content };\n      this.comm.send(data, callbacks, {}, buffers);\n    }\n  }\n\n  /**\n   * Close model\n   *\n   * @param comm_closed - true if the comm is already being closed. If false, the comm will be closed.\n   *\n   * @returns - a promise that is fulfilled when all the associated views have been removed.\n   */\n  close(comm_closed = false): Promise<void> {\n    // can only be closed once.\n    if (this._closed) {\n      return Promise.resolve();\n    }\n    this._closed = true;\n    if (this.comm && !comm_closed) {\n      this.comm.close();\n    }\n    this.stopListening();\n    this.trigger('destroy', this);\n    if (this.comm) {\n      delete this.comm;\n    }\n    // Delete all views of this model\n    if (this.views) {\n      const views = Object.keys(this.views).map((id: string) => {\n        return this.views![id].then((view) => view.remove());\n      });\n      delete this.views;\n      return Promise.all(views).then(() => {\n        return;\n      });\n    }\n    return Promise.resolve();\n  }\n\n  /**\n   * Handle when a widget comm is closed.\n   */\n  _handle_comm_closed(msg: KernelMessage.ICommCloseMsg): void {\n    this.trigger('comm:close');\n    this.close(true);\n  }\n\n  /**\n   * Handle incoming comm msg.\n   */\n  _handle_comm_msg(msg: KernelMessage.ICommMsgMsg): Promise<void> {\n    const data = msg.content.data as any;\n    const method = data.method;\n    switch (method) {\n      case 'update':\n      case 'echo_update':\n        this.state_change = this.state_change\n          .then(() => {\n            const state: Dict<BufferJSON> = data.state;\n            const buffer_paths = data.buffer_paths ?? [];\n            const buffers = msg.buffers?.slice(0, buffer_paths.length) ?? [];\n            utils.put_buffers(state, buffer_paths, buffers);\n\n            if (msg.parent_header && method === 'echo_update') {\n              const msgId = (msg.parent_header as any).msg_id;\n              // we may have echos coming from other clients, we only care about\n              // dropping echos for which we expected a reply\n              const expectedEcho = Object.keys(state).filter((attrName) =>\n                this._expectedEchoMsgIds.has(attrName)\n              );\n              expectedEcho.forEach((attrName: string) => {\n                // Skip echo messages until we get the reply we are expecting.\n                const isOldMessage =\n                  this._expectedEchoMsgIds.get(attrName) !== msgId;\n                if (isOldMessage) {\n                  // Ignore an echo update that comes before our echo.\n                  delete state[attrName];\n                } else {\n                  // we got our echo confirmation, so stop looking for it\n                  this._expectedEchoMsgIds.delete(attrName);\n                  // Start accepting echo updates unless we plan to send out a new state soon\n                  if (\n                    this._msg_buffer !== null &&\n                    Object.prototype.hasOwnProperty.call(\n                      this._msg_buffer,\n                      attrName\n                    )\n                  ) {\n                    delete state[attrName];\n                  }\n                }\n              });\n            }\n            return (this.constructor as typeof WidgetModel)._deserialize_state(\n              // Combine the state updates, with preference for kernel updates\n              state,\n              this.widget_manager\n            );\n          })\n          .then((state) => {\n            this.set_state(state);\n          })\n          .catch(\n            utils.reject(\n              `Could not process update msg for model id: ${this.model_id}`,\n              true\n            )\n          );\n        return this.state_change;\n      case 'custom':\n        this.trigger('msg:custom', data.content, msg.buffers);\n        return Promise.resolve();\n    }\n    return Promise.resolve();\n  }\n\n  /**\n   * Handle when a widget is updated from the backend.\n   *\n   * This function is meant for internal use only. Values set here will not be propagated on a sync.\n   */\n  set_state(state: Dict<unknown>): void {\n    this._state_lock = state;\n    try {\n      this.set(state);\n    } catch (e) {\n      console.error(\n        `Error setting state: ${e instanceof Error ? e.message : e}`\n      );\n    } finally {\n      this._state_lock = null;\n    }\n  }\n\n  /**\n   * Get the serializable state of the model.\n   *\n   * If drop_default is truthy, attributes that are equal to their default\n   * values are dropped.\n   */\n  get_state(drop_defaults?: boolean): JSONObject {\n    const fullState = this.attributes;\n    if (drop_defaults) {\n      // if defaults is a function, call it\n      const d = this.defaults;\n      const defaults = typeof d === 'function' ? d.call(this) : d;\n      const state: JSONObject = {};\n      Object.keys(fullState).forEach((key) => {\n        if (!utils.isEqual(fullState[key], defaults[key])) {\n          state[key] = fullState[key];\n        }\n      });\n      return state;\n    } else {\n      return { ...fullState };\n    }\n  }\n\n  /**\n   * Handle status msgs.\n   *\n   * execution_state : ('busy', 'idle', 'starting')\n   */\n  _handle_status(msg: KernelMessage.IStatusMsg): void {\n    if (this.comm !== void 0) {\n      if (msg.content.execution_state === 'idle') {\n        this._pending_msgs--;\n        // Sanity check for logic errors that may push this below zero.\n        if (this._pending_msgs < 0) {\n          console.error(\n            `Jupyter Widgets message throttle: Pending messages < 0 (=${this._pending_msgs}), which is unexpected. Resetting to 0 to continue.`\n          );\n          this._pending_msgs = 0; // do not break message throttling in case of unexpected errors\n        }\n        // Send buffer if one is waiting and we are below the throttle.\n        if (this._msg_buffer !== null && this._pending_msgs < 1) {\n          const msgId = this.send_sync_message(\n            this._msg_buffer,\n            this._msg_buffer_callbacks\n          );\n          this.rememberLastUpdateFor(msgId);\n          this._msg_buffer = null;\n          this._msg_buffer_callbacks = null;\n        }\n      }\n    }\n  }\n\n  /**\n   * Create msg callbacks for a comm msg.\n   */\n  callbacks(view?: WidgetView): ICallbacks {\n    return this.widget_manager.callbacks(view);\n  }\n\n  /**\n   * Set one or more values.\n   *\n   * We just call the super method, in which val and options are optional.\n   * Handles both \"key\", value and {key: value} -style arguments.\n   */\n  set(key: any, val?: any, options?: any): any {\n    // Call our patched backbone set. See #1642 and #1643.\n    const return_value = backbonePatch.set.call(this, key, val, options);\n\n    // Backbone only remembers the diff of the most recent set()\n    // operation.  Calling set multiple times in a row results in a\n    // loss of change information.  Here we keep our own running diff.\n    //\n    // We don't buffer the state set in the constructor (including\n    // defaults), so we first check to see if we've initialized _buffered_state_diff.\n    // which happens after the constructor sets attributes at creation.\n    if (this._buffered_state_diff !== void 0) {\n      const attrs = this.changedAttributes() || {};\n\n      // The state_lock lists attributes that are currently being changed\n      // right now from a kernel message. We don't want to send these\n      // non-changes back to the kernel, so we delete them out of attrs if\n      // they haven't changed from their state_lock value.\n      // The state lock could be null or undefined (if set is being called from\n      // the initializer).\n      if (this._state_lock) {\n        for (const key of Object.keys(this._state_lock)) {\n          if (attrs[key] === this._state_lock[key]) {\n            delete attrs[key];\n          }\n        }\n      }\n\n      // _buffered_state_diff_synced lists things that have already been sent to the kernel during a top-level call to .set(), so we don't need to buffer these things either.\n      if (this._buffered_state_diff_synced) {\n        for (const key of Object.keys(this._buffered_state_diff_synced)) {\n          if (attrs[key] === this._buffered_state_diff_synced[key]) {\n            delete attrs[key];\n          }\n        }\n      }\n\n      this._buffered_state_diff = utils.assign(\n        this._buffered_state_diff,\n        attrs\n      );\n    }\n\n    // If this ended a top-level call to .set, then reset _buffered_state_diff_synced\n    if ((this as any)._changing === false) {\n      this._buffered_state_diff_synced = {};\n    }\n    return return_value;\n  }\n\n  /**\n   * Handle sync to the back-end.  Called when a model.save() is called.\n   *\n   * Make sure a comm exists.\n   *\n   * Parameters\n   * ----------\n   * method : create, update, patch, delete, read\n   *   create/update always send the full attribute set\n   *   patch - only send attributes listed in options.attrs, and if we\n   *   are queuing up messages, combine with previous messages that have\n   *   not been sent yet\n   * model : the model we are syncing\n   *   will normally be the same as `this`\n   * options : dict\n   *   the `attrs` key, if it exists, gives an {attr: value} dict that\n   *   should be synced, otherwise, sync all attributes.\n   *\n   */\n  sync(method: string, model: WidgetModel, options: any = {}): any {\n    // the typing is to return `any` since the super.sync method returns a JqXHR, but we just return false if there is an error.\n    if (this.comm === undefined) {\n      throw 'Syncing error: no comm channel defined';\n    }\n\n    const attrs =\n      method === 'patch'\n        ? options.attrs\n        : model.get_state(options.drop_defaults);\n\n    // The state_lock lists attributes that are currently being changed\n    // right now from a kernel message. We don't want to send these\n    // non-changes back to the kernel, so we delete them out of attrs if\n    // they haven't changed from their state_lock value.\n    // The state lock could be null or undefined (if this is triggered\n    // from the initializer).\n    if (this._state_lock) {\n      for (const key of Object.keys(this._state_lock)) {\n        if (attrs[key] === this._state_lock[key]) {\n          delete attrs[key];\n        }\n      }\n    }\n\n    Object.keys(attrs).forEach((attrName: string) => {\n      this._attrsToUpdate.add(attrName);\n    });\n\n    const msgState = this.serialize(attrs);\n\n    if (Object.keys(msgState).length > 0) {\n      // If this message was sent via backbone itself, it will not\n      // have any callbacks.  It's important that we create callbacks\n      // so we can listen for status messages, etc...\n      const callbacks = options.callbacks || this.callbacks();\n\n      // Check throttle.\n      if (this._pending_msgs >= 1) {\n        // The throttle has been exceeded, buffer the current msg so\n        // it can be sent once the kernel has finished processing\n        // some of the existing messages.\n        // Combine updates if it is a 'patch' sync, otherwise replace updates\n        switch (method) {\n          case 'patch':\n            this._msg_buffer = utils.assign(this._msg_buffer || {}, msgState);\n            break;\n          case 'update':\n          case 'create':\n            this._msg_buffer = msgState;\n            break;\n          default:\n            throw 'unrecognized syncing method';\n        }\n        this._msg_buffer_callbacks = callbacks;\n      } else {\n        // We haven't exceeded the throttle, send the message like\n        // normal.\n        const msgId = this.send_sync_message(attrs, callbacks);\n        this.rememberLastUpdateFor(msgId);\n        // Since the comm is a one-way communication, assume the message\n        // arrived and was processed successfully.\n        // Don't call options.success since we don't have a model back from\n        // the server. Note that this means we don't have the Backbone\n        // 'sync' event.\n      }\n    }\n  }\n  rememberLastUpdateFor(msgId: string) {\n    this._attrsToUpdate.forEach((attrName) => {\n      this._expectedEchoMsgIds.set(attrName, msgId);\n    });\n    this._attrsToUpdate = new Set<string>();\n  }\n\n  /**\n   * Serialize widget state.\n   *\n   * A serializer is a function which takes in a state attribute and a widget,\n   * and synchronously returns a JSONable object. The returned object will\n   * have toJSON called if possible, and the final result should be a\n   * primitive object that is a snapshot of the widget state that may have\n   * binary array buffers.\n   */\n  serialize(state: Dict<any>): JSONObject {\n    const serializers =\n      (this.constructor as typeof WidgetModel).serializers ||\n      JSONExt.emptyObject;\n    for (const k of Object.keys(state)) {\n      try {\n        if (serializers[k] && serializers[k].serialize) {\n          state[k] = serializers[k].serialize!(state[k], this);\n        } else {\n          // the default serializer just deep-copies the object\n          state[k] = JSON.parse(JSON.stringify(state[k]));\n        }\n        if (state[k] && state[k].toJSON) {\n          state[k] = state[k].toJSON();\n        }\n      } catch (e) {\n        console.error('Error serializing widget state attribute: ', k);\n        throw e;\n      }\n    }\n    return state;\n  }\n\n  /**\n   * Send a sync message to the kernel.\n   *\n   * If a message is sent successfully, this returns the message ID of that\n   * message. Otherwise it returns an empty string\n   */\n  send_sync_message(state: JSONObject, callbacks: any = {}): string {\n    if (!this.comm) {\n      return '';\n    }\n    try {\n      // Make a 2-deep copy so we don't modify the caller's callbacks object.\n      callbacks = {\n        shell: { ...callbacks.shell },\n        iopub: { ...callbacks.iopub },\n        input: callbacks.input,\n      };\n      // Save the caller's status callback so we can call it after we handle the message.\n      const statuscb = callbacks.iopub.status;\n      callbacks.iopub.status = (msg: KernelMessage.IStatusMsg): void => {\n        this._handle_status(msg);\n        if (statuscb) {\n          statuscb(msg);\n        }\n      };\n\n      // split out the binary buffers\n      const split = utils.remove_buffers(state);\n      const msgId = this.comm.send(\n        {\n          method: 'update',\n          state: split.state,\n          buffer_paths: split.buffer_paths,\n        },\n        callbacks,\n        {},\n        split.buffers\n      );\n      this._pending_msgs++;\n      return msgId;\n    } catch (e) {\n      console.error('Could not send widget sync message', e);\n    }\n    return '';\n  }\n\n  /**\n   * Push this model's state to the back-end\n   *\n   * This invokes a Backbone.Sync.\n   */\n  save_changes(callbacks?: {}): void {\n    if (this.comm_live) {\n      const options: any = { patch: true };\n      if (callbacks) {\n        options.callbacks = callbacks;\n      }\n      this.save(this._buffered_state_diff, options);\n\n      // If we are currently in a .set() call, save what state we have synced\n      // to the kernel so we don't buffer it again as we come out of the .set call.\n      if ((this as any)._changing) {\n        utils.assign(\n          this._buffered_state_diff_synced,\n          this._buffered_state_diff\n        );\n      }\n      this._buffered_state_diff = {};\n    }\n  }\n\n  /**\n   * on_some_change(['key1', 'key2'], foo, context) differs from\n   * on('change:key1 change:key2', foo, context).\n   * If the widget attributes key1 and key2 are both modified,\n   * the second form will result in foo being called twice\n   * while the first will call foo only once.\n   */\n  on_some_change(\n    keys: string[],\n    callback: (...args: any[]) => void,\n    context: any\n  ): void {\n    this.on(\n      'change',\n      (...args) => {\n        if (keys.some(this.hasChanged, this)) {\n          callback.apply(context, args);\n        }\n      },\n      this\n    );\n  }\n\n  /**\n   * Serialize the model.  See the deserialization function at the top of this file\n   * and the kernel-side serializer/deserializer.\n   */\n  toJSON(options?: {}): string {\n    return `IPY_MODEL_${this.model_id}`;\n  }\n\n  /**\n   * Returns a promise for the deserialized state. The second argument\n   * is an instance of widget manager, which is required for the\n   * deserialization of widget models.\n   */\n  static _deserialize_state(\n    state: Dict<BufferJSON>,\n    manager: IWidgetManager\n  ): Promise<utils.Dict<unknown>> {\n    const serializers = this.serializers;\n    let deserialized: Dict<unknown>;\n    if (serializers) {\n      deserialized = {};\n      for (const k in state) {\n        if (serializers[k] && serializers[k].deserialize) {\n          deserialized[k] = serializers[k].deserialize!(state[k], manager);\n        } else {\n          deserialized[k] = state[k];\n        }\n      }\n    } else {\n      deserialized = state;\n    }\n    return utils.resolvePromisesDict(deserialized);\n  }\n\n  static serializers: ISerializers;\n\n  // Backbone calls the overridden initialization function from the\n  // constructor. We initialize the default values above in the initialization\n  // function so that they are ready for the user code, and to not override\n  // values subclasses may set in their initialization functions.\n  widget_manager: IWidgetManager;\n  model_id: string;\n  views?: { [key: string]: Promise<WidgetView> };\n  state_change: Promise<any>;\n  comm?: IClassicComm;\n  name: string;\n  module: string;\n\n  private _comm_live: boolean;\n  private _closed: boolean;\n  private _state_lock: any;\n  private _buffered_state_diff: any;\n  private _buffered_state_diff_synced: any;\n  private _msg_buffer: any;\n  private _msg_buffer_callbacks: any;\n  private _pending_msgs: number;\n  // keep track of the msg id for each attr for updates we send out so\n  // that we can ignore old messages that we send in order to avoid\n  // 'drunken' sliders going back and forward\n  private _expectedEchoMsgIds: Map<string, string>;\n  // because we don't know the attrs in _handle_status, we keep track of what we will send\n  private _attrsToUpdate: Set<string>;\n}\n\nexport class DOMWidgetModel extends WidgetModel {\n  static serializers: ISerializers = {\n    ...WidgetModel.serializers,\n    layout: { deserialize: unpack_models },\n    style: { deserialize: unpack_models },\n  };\n\n  defaults(): Backbone.ObjectHash {\n    return utils.assign(super.defaults(), {\n      _dom_classes: [],\n      tabbable: null,\n      tooltip: null,\n      // We do not declare defaults for the layout and style attributes.\n      // Those defaults are constructed on the kernel side and synced here\n      // as needed, and our code here copes with those attributes being\n      // undefined. See\n      // https://github.com/jupyter-widgets/ipywidgets/issues/1620 and\n      // https://github.com/jupyter-widgets/ipywidgets/pull/1621\n    });\n  }\n}\n\nexport class WidgetView extends NativeView<WidgetModel> {\n  /**\n   * Public constructor.\n   */\n  constructor(options?: Backbone.ViewOptions<WidgetModel> & { options?: any }) {\n    super(options);\n  }\n\n  /**\n   * Initializer, called at the end of the constructor.\n   */\n  initialize(parameters: WidgetView.IInitializeParameters): void {\n    this.listenTo(this.model, 'change', (model, options) => {\n      const changed = Object.keys(this.model.changedAttributes() || {});\n      if (changed[0] === '_view_count' && changed.length === 1) {\n        // Just the view count was updated\n        return;\n      }\n      this.update(options);\n    });\n\n    this.options = parameters.options;\n\n    this.once('remove', () => {\n      if (typeof this.model.get('_view_count') === 'number') {\n        this.model.set('_view_count', this.model.get('_view_count') - 1);\n        this.model.save_changes();\n      }\n    });\n\n    this.once('displayed', () => {\n      if (typeof this.model.get('_view_count') === 'number') {\n        this.model.set('_view_count', this.model.get('_view_count') + 1);\n        this.model.save_changes();\n      }\n    });\n\n    this.displayed = new Promise((resolve, reject) => {\n      this.once('displayed', resolve);\n\n      this.model.on('msg:custom', this.handle_message.bind(this));\n    });\n  }\n\n  /**\n   * Handle message sent to the front end.\n   *\n   * Used to focus or blur the widget.\n   */\n  handle_message(content: any): void {\n    if (content.do === 'focus') {\n      this.el.focus();\n    } else if (content.do === 'blur') {\n      this.el.blur();\n    }\n  }\n\n  /**\n   * Triggered on model change.\n   *\n   * Update view to be consistent with this.model\n   */\n  update(options?: any): void {\n    return;\n  }\n\n  /**\n   * Render a view\n   *\n   * @returns the view or a promise to the view.\n   */\n  render(): any {\n    return;\n  }\n\n  /**\n   * Create and promise that resolves to a child view of a given model\n   */\n  create_child_view<VT extends DOMWidgetView = DOMWidgetView>(\n    child_model: DOMWidgetModel,\n    options?: any\n  ): Promise<VT>;\n  create_child_view<VT extends WidgetView = WidgetView>(\n    child_model: WidgetModel,\n    options?: any\n  ): Promise<VT>;\n  create_child_view<VT extends WidgetView = WidgetView>(\n    child_model: WidgetModel,\n    options = {}\n  ): Promise<VT> {\n    options = { parent: this, ...options };\n    return this.model.widget_manager\n      .create_view<VT>(child_model, options)\n      .catch(utils.reject('Could not create child view', true));\n  }\n\n  /**\n   * Create msg callbacks for a comm msg.\n   */\n  callbacks(): ICallbacks {\n    return this.model.callbacks(this);\n  }\n\n  /**\n   * Send a custom msg associated with this view.\n   */\n  send(content: {}, buffers?: ArrayBuffer[] | ArrayBufferView[]): void {\n    this.model.send(content, this.callbacks(), buffers);\n  }\n\n  touch(): void {\n    this.model.save_changes(this.callbacks());\n  }\n\n  remove(): any {\n    // Raise a remove event when the view is removed.\n    super.remove();\n    this.trigger('remove');\n    return this;\n  }\n\n  options: any;\n\n  /**\n   * A promise that resolves to the parent view when a child view is displayed.\n   */\n  displayed: Promise<WidgetView>;\n}\n\nexport namespace WidgetView {\n  export interface IInitializeParameters<T extends WidgetModel = WidgetModel>\n    extends Backbone.ViewOptions<T> {\n    options: any;\n  }\n}\n\nexport namespace JupyterLuminoWidget {\n  export interface IOptions {\n    view: DOMWidgetView;\n  }\n}\n\nexport class JupyterLuminoWidget extends Widget {\n  constructor(options: Widget.IOptions & JupyterLuminoWidget.IOptions) {\n    const view = options.view;\n    // Cast as any since we cannot delete a mandatory value\n    delete (options as any).view;\n    super(options);\n    this._view = view;\n  }\n\n  /**\n   * Dispose the widget.\n   *\n   * This causes the view to be destroyed as well with 'remove'\n   */\n  dispose(): void {\n    if (this.isDisposed) {\n      return;\n    }\n    super.dispose();\n    this._view.remove();\n    this._view = null!;\n  }\n\n  /**\n   * Process the Lumino message.\n   *\n   * Any custom Lumino widget used inside a Jupyter widget should override\n   * the processMessage function like this.\n   */\n  processMessage(msg: Message): void {\n    super.processMessage(msg);\n    this._view.processLuminoMessage(msg);\n  }\n\n  private _view: DOMWidgetView;\n}\n\n/**\n * @deprecated Use {@link JupyterLuminoWidget} instead (Since 8.0).\n */\nexport const JupyterPhosphorWidget = JupyterLuminoWidget;\n\nexport class JupyterLuminoPanelWidget extends Panel {\n  constructor(options: JupyterLuminoWidget.IOptions & Panel.IOptions) {\n    const view = options.view;\n    delete (options as any).view;\n    super(options);\n    this._view = view;\n  }\n\n  /**\n   * Process the Lumino message.\n   *\n   * Any custom Lumino widget used inside a Jupyter widget should override\n   * the processMessage function like this.\n   */\n  processMessage(msg: Message): void {\n    super.processMessage(msg);\n    this._view.processLuminoMessage(msg);\n  }\n\n  /**\n   * Dispose the widget.\n   *\n   * This causes the view to be destroyed as well with 'remove'\n   */\n  dispose(): void {\n    if (this.isDisposed) {\n      return;\n    }\n    super.dispose();\n    this._view?.remove();\n    this._view = null!;\n  }\n\n  private _view: DOMWidgetView;\n}\n\n/**\n * @deprecated Use {@link JupyterLuminoPanelWidget} instead (Since 8.0).\n */\nexport const JupyterPhosphorPanelWidget = JupyterLuminoPanelWidget;\n\nexport class DOMWidgetView extends WidgetView {\n  /**\n   * Public constructor\n   */\n  initialize(parameters: WidgetView.IInitializeParameters): void {\n    super.initialize(parameters);\n\n    this.listenTo(\n      this.model,\n      'change:_dom_classes',\n      (model: WidgetModel, new_classes: string[]) => {\n        const old_classes = model.previous('_dom_classes');\n        this.update_classes(old_classes, new_classes);\n      }\n    );\n\n    this.layoutPromise = Promise.resolve();\n    this.listenTo(\n      this.model,\n      'change:layout',\n      (model: WidgetModel, value: WidgetModel) => {\n        this.setLayout(value, model.previous('layout'));\n      }\n    );\n\n    this.stylePromise = Promise.resolve();\n    this.listenTo(\n      this.model,\n      'change:style',\n      (model: WidgetModel, value: WidgetModel) => {\n        this.setStyle(value, model.previous('style'));\n      }\n    );\n\n    this.displayed.then(() => {\n      this.update_classes([], this.model.get('_dom_classes'));\n      this.setLayout(this.model.get('layout'));\n      this.setStyle(this.model.get('style'));\n    });\n\n    this._comm_live_update();\n    this.listenTo(this.model, 'comm_live_update', () => {\n      this._comm_live_update();\n    });\n    this.listenTo(this.model, 'change:tooltip', this.updateTooltip);\n    this.updateTooltip();\n  }\n\n  setLayout(layout: LayoutModel, oldLayout?: LayoutModel): void {\n    if (layout) {\n      this.layoutPromise = this.layoutPromise.then((oldLayoutView) => {\n        if (oldLayoutView) {\n          oldLayoutView.unlayout();\n          this.stopListening(oldLayoutView.model);\n          oldLayoutView.remove();\n        }\n\n        return this.create_child_view(layout)\n          .then((view) => {\n            // Trigger the displayed event of the child view.\n            return this.displayed.then(() => {\n              view.trigger('displayed');\n              this.listenTo(view.model, 'change', () => {\n                // Post (asynchronous) so layout changes can take\n                // effect first.\n                MessageLoop.postMessage(\n                  this.luminoWidget,\n                  Widget.ResizeMessage.UnknownSize\n                );\n              });\n              MessageLoop.postMessage(\n                this.luminoWidget,\n                Widget.ResizeMessage.UnknownSize\n              );\n              this.trigger('layout-changed');\n              return view;\n            });\n          })\n          .catch(\n            utils.reject('Could not add LayoutView to DOMWidgetView', true)\n          );\n      });\n    }\n  }\n\n  setStyle(style: StyleModel, oldStyle?: StyleModel): void {\n    if (style) {\n      this.stylePromise = this.stylePromise.then((oldStyleView) => {\n        if (oldStyleView) {\n          oldStyleView.unstyle();\n          this.stopListening(oldStyleView.model);\n          oldStyleView.remove();\n        }\n\n        return this.create_child_view(style)\n          .then((view) => {\n            // Trigger the displayed event of the child view.\n            return this.displayed.then(() => {\n              view.trigger('displayed');\n              this.trigger('style-changed');\n              // Unlike for the layout attribute, style changes don't\n              // trigger Lumino resize messages.\n              return view;\n            });\n          })\n          .catch(\n            utils.reject('Could not add styleView to DOMWidgetView', true)\n          );\n      });\n    }\n  }\n\n  updateTooltip(): void {\n    const title = this.model.get('tooltip');\n    if (!title) {\n      this.el.removeAttribute('title');\n    } else if (this.model.get('description').length === 0) {\n      this.el.setAttribute('title', title);\n    }\n  }\n\n  /**\n   * Update the DOM classes applied to an element, default to this.el.\n   */\n  update_classes(\n    old_classes: string[],\n    new_classes: string[],\n    el?: HTMLElement\n  ): void {\n    if (el === undefined) {\n      el = this.el;\n    }\n    utils.difference(old_classes, new_classes).map(function (c) {\n      if (el!.classList) {\n        // classList is not supported by IE for svg elements\n        el!.classList.remove(c);\n      } else {\n        el!.setAttribute('class', el!.getAttribute('class')!.replace(c, ''));\n      }\n    });\n    utils.difference(new_classes, old_classes).map(function (c) {\n      if (el!.classList) {\n        // classList is not supported by IE for svg elements\n        el!.classList.add(c);\n      } else {\n        el!.setAttribute('class', el!.getAttribute('class')!.concat(' ', c));\n      }\n    });\n  }\n\n  /**\n   * Update the DOM classes applied to the widget based on a single\n   * trait's value.\n   *\n   * Given a trait value classes map, this function automatically\n   * handles applying the appropriate classes to the widget element\n   * and removing classes that are no longer valid.\n   *\n   * Parameters\n   * ----------\n   * class_map: dictionary\n   *  Dictionary of trait values to class lists.\n   *  Example:\n   *      {\n   *          success: ['alert', 'alert-success'],\n   *          info: ['alert', 'alert-info'],\n   *          warning: ['alert', 'alert-warning'],\n   *          danger: ['alert', 'alert-danger']\n   *      };\n   * trait_name: string\n   *  Name of the trait to check the value of.\n   * el: optional DOM element handle, defaults to this.el\n   *  Element that the classes are applied to.\n   */\n  update_mapped_classes(\n    class_map: Dict<string[]>,\n    trait_name: string,\n    el?: HTMLElement\n  ): void {\n    let key = this.model.previous(trait_name) as string;\n    const old_classes = class_map[key] ? class_map[key] : [];\n    key = this.model.get(trait_name);\n    const new_classes = class_map[key] ? class_map[key] : [];\n\n    this.update_classes(old_classes, new_classes, el || this.el);\n  }\n\n  set_mapped_classes(\n    class_map: Dict<string[]>,\n    trait_name: string,\n    el?: HTMLElement\n  ): void {\n    const key = this.model.get(trait_name);\n    const new_classes = class_map[key] ? class_map[key] : [];\n    this.update_classes([], new_classes, el || this.el);\n  }\n\n  _setElement(el: HTMLElement): void {\n    if (this.luminoWidget) {\n      this.luminoWidget.dispose();\n    }\n\n    this.$el = el instanceof $ ? el : $(el);\n    this.el = this.$el[0];\n    this.luminoWidget = new JupyterLuminoWidget({\n      node: el,\n      view: this,\n    });\n  }\n\n  remove(): any {\n    if (this.luminoWidget) {\n      this.luminoWidget.dispose();\n    }\n    return super.remove();\n  }\n\n  /**\n   * @deprecated Use {@link processLuminoMessage} instead (Since 8.0).\n   */\n  processPhosphorMessage(msg: Message): void {\n    this.processLuminoMessage(msg);\n  }\n\n  processLuminoMessage(msg: Message): void {\n    switch (msg.type) {\n      case 'after-attach':\n        this.trigger('displayed');\n        break;\n      case 'show':\n        this.trigger('shown');\n        break;\n    }\n  }\n\n  private _comm_live_update(): void {\n    if (this.model.comm_live) {\n      this.luminoWidget.removeClass('jupyter-widgets-disconnected');\n    } else {\n      this.luminoWidget.addClass('jupyter-widgets-disconnected');\n    }\n  }\n\n  updateTabindex(): void {\n    const tabbable = this.model.get('tabbable');\n    if (tabbable === true) {\n      this.el.setAttribute('tabIndex', '0');\n    } else if (tabbable === false) {\n      this.el.setAttribute('tabIndex', '-1');\n    } else if (tabbable === null) {\n      this.el.removeAttribute('tabIndex');\n    }\n  }\n\n  /**\n   * @deprecated Use {@link luminoWidget} instead (Since 8.0).\n   */\n  get pWidget(): Widget {\n    return this.luminoWidget;\n  }\n\n  /**\n   * @deprecated Use {@link luminoWidget} instead (Since 8.0).\n   */\n  set pWidget(value: Widget) {\n    this.luminoWidget = value;\n  }\n\n  el: HTMLElement; // Override typing\n  '$el': any;\n  luminoWidget: Widget;\n  layoutPromise: Promise<any>;\n  stylePromise: Promise<any>;\n}\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nimport { assign, Dict } from './utils';\n\nimport { WidgetModel, WidgetView, DOMWidgetView } from './widget';\n\n/**\n * css properties exposed by the layout widget with their default values.\n */\nconst css_properties: Dict<string | null> = {\n  align_content: null,\n  align_items: null,\n  align_self: null,\n  border_top: null,\n  border_right: null,\n  border_bottom: null,\n  border_left: null,\n  bottom: null,\n  display: null,\n  flex: null,\n  flex_flow: null,\n  height: null,\n  justify_content: null,\n  justify_items: null,\n  left: null,\n  margin: null,\n  max_height: null,\n  max_width: null,\n  min_height: null,\n  min_width: null,\n  overflow: null,\n  order: null,\n  padding: null,\n  right: null,\n  top: null,\n  visibility: null,\n  width: null,\n\n  // image-specific\n  object_fit: null,\n  object_position: null,\n\n  // container\n  grid_auto_columns: null,\n  grid_auto_flow: null,\n  grid_auto_rows: null,\n  grid_gap: null,\n  grid_template_rows: null,\n  grid_template_columns: null,\n  grid_template_areas: null,\n\n  // items\n  grid_row: null,\n  grid_column: null,\n  grid_area: null,\n};\n\nexport class LayoutModel extends WidgetModel {\n  defaults(): Backbone.ObjectHash {\n    return assign(\n      super.defaults(),\n      {\n        _model_name: 'LayoutModel',\n        _view_name: 'LayoutView',\n      },\n      css_properties\n    );\n  }\n}\n\nexport class LayoutView extends WidgetView {\n  /**\n   * Public constructor\n   */\n  initialize(parameters: WidgetView.IInitializeParameters): void {\n    this._traitNames = [];\n    super.initialize(parameters);\n    // Register the traits that live on the Python side\n    for (const key of Object.keys(css_properties)) {\n      this.registerTrait(key);\n    }\n  }\n\n  /**\n   * Register a CSS trait that is known by the model\n   * @param trait\n   */\n  registerTrait(trait: string): void {\n    this._traitNames.push(trait);\n\n    // Listen to changes, and set the value on change.\n    this.listenTo(\n      this.model,\n      'change:' + trait,\n      (model: LayoutModel, value: any) => {\n        this.handleChange(trait, value);\n      }\n    );\n\n    // Set the initial value on display.\n    this.handleChange(trait, this.model.get(trait));\n  }\n\n  /**\n   * Get the the name of the css property from the trait name\n   * @param  model attribute name\n   * @return css property name\n   */\n  css_name(trait: string): string {\n    return trait.replace(/_/g, '-');\n  }\n\n  /**\n   * Handles when a trait value changes\n   */\n  handleChange(trait: string, value: any): void {\n    // should be synchronous so that we can measure later.\n    const parent = this.options.parent as DOMWidgetView;\n    if (parent) {\n      if (value === null) {\n        parent.el.style.removeProperty(this.css_name(trait));\n      } else {\n        parent.el.style.setProperty(this.css_name(trait), value);\n      }\n    } else {\n      console.warn('Style not applied because a parent view does not exist');\n    }\n  }\n\n  /**\n   * Remove the styling from the parent view.\n   */\n  unlayout(): void {\n    const parent = this.options.parent as DOMWidgetView;\n    this._traitNames.forEach((trait) => {\n      if (parent) {\n        parent.el.style.removeProperty(this.css_name(trait));\n      } else {\n        console.warn('Style not removed because a parent view does not exist');\n      }\n    }, this);\n  }\n\n  private _traitNames: string[];\n}\n","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nimport { assign } from './utils';\n\nimport { WidgetModel, WidgetView, DOMWidgetView } from './widget';\n\n/**\n * Three functions to deal with some CSS attributes\n * to make them easier to use.\n */\n\nexport class StyleModel extends WidgetModel {\n  defaults(): Backbone.ObjectHash {\n    const Derived = this.constructor as typeof StyleModel;\n    return assign(\n      super.defaults(),\n      {\n        _model_name: 'StyleModel',\n        _view_name: 'StyleView',\n      },\n      Object.keys(Derived.styleProperties).reduce((obj: any, key: string) => {\n        obj[key] = Derived.styleProperties[key].default;\n        return obj;\n      }, {})\n    );\n  }\n\n  public static styleProperties: { [s: string]: IStyleProperty } = {};\n}\n\ninterface IStyleProperty {\n  attribute: string;\n  selector: string;\n  default: string;\n}\n\nexport class StyleView extends WidgetView {\n  /**\n   * Public constructor\n   */\n  initialize(parameters: WidgetView.IInitializeParameters): void {\n    this._traitNames = [];\n    super.initialize(parameters);\n    // Register the traits that live on the Python side\n    const ModelType = this.model.constructor as typeof StyleModel;\n    for (const key of Object.keys(ModelType.styleProperties)) {\n      this.registerTrait(key);\n    }\n\n    // Set the initial styles\n    this.style();\n  }\n\n  /**\n   * Register a CSS trait that is known by the model\n   * @param trait\n   */\n  registerTrait(trait: string): void {\n    this._traitNames.push(trait);\n\n    // Listen to changes, and set the value on change.\n    this.listenTo(\n      this.model,\n      'change:' + trait,\n      (model: StyleModel, value: string) => {\n        this.handleChange(trait, value);\n      }\n    );\n  }\n\n  /**\n   * Handles when a trait value changes\n   */\n  handleChange(trait: string, value: any): void {\n    // should be synchronous so that we can measure later.\n    const parent = this.options.parent as DOMWidgetView;\n    if (parent) {\n      const ModelType = this.model.constructor as typeof StyleModel;\n      const styleProperties = ModelType.styleProperties;\n      const attribute = styleProperties[trait].attribute;\n      const selector = styleProperties[trait].selector;\n      const elements = selector\n        ? parent.el.querySelectorAll<HTMLElement>(selector)\n        : [parent.el];\n      if (value === null) {\n        for (let i = 0; i !== elements.length; ++i) {\n          elements[i].style.removeProperty(attribute);\n        }\n      } else {\n        for (let i = 0; i !== elements.length; ++i) {\n          elements[i].style.setProperty(attribute, value);\n        }\n      }\n    } else {\n      console.warn('Style not applied because a parent view does not exist');\n    }\n  }\n\n  /**\n   * Apply styles for all registered traits\n   */\n  style(): void {\n    for (const trait of this._traitNames) {\n      this.handleChange(trait, this.model.get(trait));\n    }\n  }\n\n  /**\n   * Remove the styling from the parent view.\n   */\n  unstyle(): void {\n    const parent = this.options.parent as DOMWidgetView;\n    const ModelType = this.model.constructor as typeof StyleModel;\n    const styleProperties = ModelType.styleProperties;\n    this._traitNames.forEach((trait) => {\n      if (parent) {\n        const attribute = styleProperties[trait].attribute;\n        const selector = styleProperties[trait].selector;\n        const elements = selector\n          ? parent.el.querySelectorAll<HTMLElement>(selector)\n          : [parent.el];\n        for (let i = 0; i !== elements.length; ++i) {\n          elements[i].style.removeProperty(attribute);\n        }\n      } else {\n        console.warn('Style not removed because a parent view does not exist');\n      }\n    }, this);\n  }\n\n  private _traitNames: string[];\n}\n"],"names":[],"sourceRoot":""}