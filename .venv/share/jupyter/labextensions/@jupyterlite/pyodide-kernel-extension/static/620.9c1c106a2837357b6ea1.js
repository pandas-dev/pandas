/*! For license information please see 620.9c1c106a2837357b6ea1.js.LICENSE.txt */
(()=>{var e={620:(e,t,i)=>{"use strict";var r=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,h=(e,t)=>()=>(e&&(t=e(e=0)),t),u=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),d=u(((e,t)=>{var r,n;r=e,n=function(e){function t(e,t){let i=0;for(let r of e)if(!1===t(r,i++))return!1;return!0}var i;e.ArrayExt=void 0,function(e){function t(e,t,i=0,r=-1){let n,s=e.length;if(0===s)return-1;i=i<0?Math.max(0,i+s):Math.min(i,s-1),n=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))<i?r+1+(s-i):r-i+1;for(let r=0;r<n;++r){let n=(i+r)%s;if(e[n]===t)return n}return-1}function i(e,t,i=-1,r=0){let n,s=e.length;if(0===s)return-1;n=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<(r=r<0?Math.max(0,r+s):Math.min(r,s-1))?i+1+(s-r):i-r+1;for(let r=0;r<n;++r){let n=(i-r+s)%s;if(e[n]===t)return n}return-1}function r(e,t,i=0,r=-1){let n,s=e.length;if(0===s)return-1;i=i<0?Math.max(0,i+s):Math.min(i,s-1),n=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))<i?r+1+(s-i):r-i+1;for(let r=0;r<n;++r){let n=(i+r)%s;if(t(e[n],n))return n}return-1}function n(e,t,i=-1,r=0){let n,s=e.length;if(0===s)return-1;n=(i=i<0?Math.max(0,i+s):Math.min(i,s-1))<(r=r<0?Math.max(0,r+s):Math.min(r,s-1))?i+1+(s-r):i-r+1;for(let r=0;r<n;++r){let n=(i-r+s)%s;if(t(e[n],n))return n}return-1}function s(e,t=0,i=-1){let r=e.length;if(!(r<=1))for(t=t<0?Math.max(0,t+r):Math.min(t,r-1),i=i<0?Math.max(0,i+r):Math.min(i,r-1);t<i;){let r=e[t],n=e[i];e[t++]=n,e[i--]=r}}function a(e,t){let i=e.length;if(t<0&&(t+=i),t<0||t>=i)return;let r=e[t];for(let r=t+1;r<i;++r)e[r-1]=e[r];return e.length=i-1,r}e.firstIndexOf=t,e.lastIndexOf=i,e.findFirstIndex=r,e.findLastIndex=n,e.findFirstValue=function(e,t,i=0,n=-1){let s=r(e,t,i,n);return-1!==s?e[s]:void 0},e.findLastValue=function(e,t,i=-1,r=0){let s=n(e,t,i,r);return-1!==s?e[s]:void 0},e.lowerBound=function(e,t,i,r=0,n=-1){let s=e.length;if(0===s)return 0;let a=r=r<0?Math.max(0,r+s):Math.min(r,s-1),o=(n=n<0?Math.max(0,n+s):Math.min(n,s-1))-r+1;for(;o>0;){let r=o>>1,n=a+r;i(e[n],t)<0?(a=n+1,o-=r+1):o=r}return a},e.upperBound=function(e,t,i,r=0,n=-1){let s=e.length;if(0===s)return 0;let a=r=r<0?Math.max(0,r+s):Math.min(r,s-1),o=(n=n<0?Math.max(0,n+s):Math.min(n,s-1))-r+1;for(;o>0;){let r=o>>1,n=a+r;i(e[n],t)>0?o=r:(a=n+1,o-=r+1)}return a},e.shallowEqual=function(e,t,i){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;++r)if(i?!i(e[r],t[r]):e[r]!==t[r])return!1;return!0},e.slice=function(e,t={}){let{start:i,stop:r,step:n}=t;if(void 0===n&&(n=1),0===n)throw new Error("Slice `step` cannot be zero.");let s,a=e.length;void 0===i?i=n<0?a-1:0:i<0?i=Math.max(i+a,n<0?-1:0):i>=a&&(i=n<0?a-1:a),void 0===r?r=n<0?-1:a:r<0?r=Math.max(r+a,n<0?-1:0):r>=a&&(r=n<0?a-1:a),s=n<0&&r>=i||n>0&&i>=r?0:n<0?Math.floor((r-i+1)/n+1):Math.floor((r-i-1)/n+1);let o=[];for(let t=0;t<s;++t)o[t]=e[i+t*n];return o},e.move=function(e,t,i){let r=e.length;if(r<=1||(t=t<0?Math.max(0,t+r):Math.min(t,r-1))===(i=i<0?Math.max(0,i+r):Math.min(i,r-1)))return;let n=e[t],s=t<i?1:-1;for(let r=t;r!==i;r+=s)e[r]=e[r+s];e[i]=n},e.reverse=s,e.rotate=function(e,t,i=0,r=-1){let n=e.length;if(n<=1||(i=i<0?Math.max(0,i+n):Math.min(i,n-1))>=(r=r<0?Math.max(0,r+n):Math.min(r,n-1)))return;let a=r-i+1;if(t>0?t%=a:t<0&&(t=(t%a+a)%a),0===t)return;let o=i+t;s(e,i,o-1),s(e,o,r),s(e,i,r)},e.fill=function(e,t,i=0,r=-1){let n,s=e.length;if(0!==s){i=i<0?Math.max(0,i+s):Math.min(i,s-1),n=(r=r<0?Math.max(0,r+s):Math.min(r,s-1))<i?r+1+(s-i):r-i+1;for(let r=0;r<n;++r)e[(i+r)%s]=t}},e.insert=function(e,t,i){let r=e.length;t=t<0?Math.max(0,t+r):Math.min(t,r);for(let i=r;i>t;--i)e[i]=e[i-1];e[t]=i},e.removeAt=a,e.removeFirstOf=function(e,i,r=0,n=-1){let s=t(e,i,r,n);return-1!==s&&a(e,s),s},e.removeLastOf=function(e,t,r=-1,n=0){let s=i(e,t,r,n);return-1!==s&&a(e,s),s},e.removeAllOf=function(e,t,i=0,r=-1){let n=e.length;if(0===n)return 0;i=i<0?Math.max(0,i+n):Math.min(i,n-1),r=r<0?Math.max(0,r+n):Math.min(r,n-1);let s=0;for(let a=0;a<n;++a)i<=r&&a>=i&&a<=r&&e[a]===t||r<i&&(a<=r||a>=i)&&e[a]===t?s++:s>0&&(e[a-s]=e[a]);return s>0&&(e.length=n-s),s},e.removeFirstWhere=function(e,t,i=0,n=-1){let s,o=r(e,t,i,n);return-1!==o&&(s=a(e,o)),{index:o,value:s}},e.removeLastWhere=function(e,t,i=-1,r=0){let s,o=n(e,t,i,r);return-1!==o&&(s=a(e,o)),{index:o,value:s}},e.removeAllWhere=function(e,t,i=0,r=-1){let n=e.length;if(0===n)return 0;i=i<0?Math.max(0,i+n):Math.min(i,n-1),r=r<0?Math.max(0,r+n):Math.min(r,n-1);let s=0;for(let a=0;a<n;++a)i<=r&&a>=i&&a<=r&&t(e[a],a)||r<i&&(a<=r||a>=i)&&t(e[a],a)?s++:s>0&&(e[a-s]=e[a]);return s>0&&(e.length=n-s),s}}(e.ArrayExt||(e.ArrayExt={})),(i||(i={})).rangeLength=function(e,t,i){return 0===i?1/0:e>t&&i>0||e<t&&i<0?0:Math.ceil((t-e)/i)},e.StringExt=void 0,function(e){function t(e,t,i=0){let r=new Array(t.length);for(let n=0,s=i,a=t.length;n<a;++n,++s){if(s=e.indexOf(t[n],s),-1===s)return null;r[n]=s}return r}e.findIndices=t,e.matchSumOfSquares=function(e,i,r=0){let n=t(e,i,r);if(!n)return null;let s=0;for(let e=0,t=n.length;e<t;++e){let t=n[e]-r;s+=t*t}return{score:s,indices:n}},e.matchSumOfDeltas=function(e,i,r=0){let n=t(e,i,r);if(!n)return null;let s=0,a=r-1;for(let e=0,t=n.length;e<t;++e){let t=n[e];s+=t-a-1,a=t}return{score:s,indices:n}},e.highlight=function(e,t,i){let r=[],n=0,s=0,a=t.length;for(;n<a;){let o=t[n],l=t[n];for(;++n<a&&t[n]===l+1;)l++;s<o&&r.push(e.slice(s,o)),o<l+1&&r.push(i(e.slice(o,l+1))),s=l+1}return s<e.length&&r.push(e.slice(s)),r},e.cmp=function(e,t){return e<t?-1:e>t?1:0}}(e.StringExt||(e.StringExt={})),e.chain=function*(...e){for(let t of e)yield*t},e.each=function(e,t){let i=0;for(let r of e)if(!1===t(r,i++))return},e.empty=function*(){},e.enumerate=function*(e,t=0){for(let i of e)yield[t++,i]},e.every=t,e.filter=function*(e,t){let i=0;for(let r of e)t(r,i++)&&(yield r)},e.find=function(e,t){let i=0;for(let r of e)if(t(r,i++))return r},e.findIndex=function(e,t){let i=0;for(let r of e)if(t(r,i++))return i-1;return-1},e.map=function*(e,t){let i=0;for(let r of e)yield t(r,i++)},e.max=function(e,t){let i;for(let r of e)void 0!==i?t(r,i)>0&&(i=r):i=r;return i},e.min=function(e,t){let i;for(let r of e)void 0!==i?t(r,i)<0&&(i=r):i=r;return i},e.minmax=function(e,t){let i,r,n=!0;for(let s of e)n?(i=s,r=s,n=!1):t(s,i)<0?i=s:t(s,r)>0&&(r=s);return n?void 0:[i,r]},e.once=function*(e){yield e},e.range=function*(e,t,r){void 0===t?(t=e,e=0,r=1):void 0===r&&(r=1);let n=i.rangeLength(e,t,r);for(let t=0;t<n;t++)yield e+r*t},e.reduce=function(e,t,i){let r=e[Symbol.iterator](),n=0,s=r.next();if(s.done&&void 0===i)throw new TypeError("Reduce of empty iterable with no initial value.");if(s.done)return i;let a,o,l=r.next();if(l.done&&void 0===i)return s.value;if(l.done)return t(i,s.value,n++);for(a=t(void 0===i?s.value:t(i,s.value,n++),l.value,n++);!(o=r.next()).done;)a=t(a,o.value,n++);return a},e.repeat=function*(e,t){for(;0<t--;)yield e},e.retro=function*(e){if("function"==typeof e.retro)yield*e.retro();else for(let t=e.length-1;t>-1;t--)yield e[t]},e.some=function(e,t){let i=0;for(let r of e)if(t(r,i++))return!0;return!1},e.stride=function*(e,t){let i=0;for(let r of e)i++%t==0&&(yield r)},e.take=function*(e,t){if(t<1)return;let i,r=e[Symbol.iterator]();for(;0<t--&&!(i=r.next()).done;)yield i.value},e.toArray=function(e){return Array.from(e)},e.toObject=function(e){let t={};for(let[i,r]of e)t[i]=r;return t},e.topologicSort=function(e){let t=[],i=new Set,r=new Map;for(let t of e)n(t);for(let[e]of r)s(e);return t;function n(e){let[t,i]=e,n=r.get(i);n?n.push(t):r.set(i,[t])}function s(e){if(i.has(e))return;i.add(e);let n=r.get(e);if(n)for(let e of n)s(e);t.push(e)}},e.zip=function*(...e){let i=e.map((e=>e[Symbol.iterator]())),r=i.map((e=>e.next()));for(;t(r,(e=>!e.done));r=i.map((e=>e.next())))yield r.map((e=>e.value))}},"object"==typeof e&&void 0!==t?n(e):"function"==typeof define&&i.amdO?define(["exports"],n):n((r="undefined"!=typeof globalThis?globalThis:r||self).lumino_algorithm={})})),f=u(((e,t)=>{var r,n;r=e,n=function(e,t){var i;function r(e){let t=0;for(let i=0,r=e.length;i<r;++i)i%4==0&&(t=4294967295*Math.random()>>>0),e[i]=255&t,t>>>=8}e.JSONExt=void 0,function(e){function t(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e}function i(e){return Array.isArray(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=i,e.isObject=function(e){return!t(e)&&!i(e)},e.deepEqual=function e(r,n){if(r===n)return!0;if(t(r)||t(n))return!1;let s=i(r),a=i(n);return s===a&&(s&&a?function(t,i){if(t===i)return!0;if(t.length!==i.length)return!1;for(let r=0,n=t.length;r<n;++r)if(!e(t[r],i[r]))return!1;return!0}(r,n):function(t,i){if(t===i)return!0;for(let e in t)if(void 0!==t[e]&&!(e in i))return!1;for(let e in i)if(void 0!==i[e]&&!(e in t))return!1;for(let r in t){let n=t[r],s=i[r];if(!(void 0===n&&void 0===s||void 0!==n&&void 0!==s&&e(n,s)))return!1}return!0}(r,n))},e.deepCopy=function e(r){return t(r)?r:i(r)?function(t){let i=new Array(t.length);for(let r=0,n=t.length;r<n;++r)i[r]=e(t[r]);return i}(r):function(t){let i={};for(let r in t){let n=t[r];void 0!==n&&(i[r]=e(n))}return i}(r)}}(e.JSONExt||(e.JSONExt={})),function(e){class i{constructor(e){var t,i,r,n;this._activated=!1,this._promise=null,this._service=null,this.id=e.id,this.description=null!==(t=e.description)&&void 0!==t?t:"",this.activate=e.activate,this.deactivate=null!==(i=e.deactivate)&&void 0!==i?i:null,this.provides=null!==(r=e.provides)&&void 0!==r?r:null,this.autoStart=null!==(n=e.autoStart)&&void 0!==n&&n,this.requires=e.requires?e.requires.slice():[],this.optional=e.optional?e.optional.slice():[]}get activated(){return this._activated}set activated(e){this._activated=e}get service(){return this._service}set service(e){this._service=e}get promise(){return this._promise}set promise(e){this._promise=e}}e.createPluginData=function(e){return new i(e)},e.ensureNoCycle=function(e,t,i){let r=[...e.requires,...e.optional],n=r=>{if(r===e.provides)return!0;let a=i.get(r);if(!a)return!1;let o=t.get(a),l=[...o.requires,...o.optional];return 0!==l.length&&(s.push(a),!!l.some(n)||(s.pop(),!1))};if(!e.provides||0===r.length)return;let s=[e.id];if(r.some(n))throw new ReferenceError(`Cycle detected: ${s.join(" -> ")}.`)},e.findDependents=function(e,i,r){let n=new Array,s=e=>{let t=i.get(e),s=[...t.requires,...t.optional];n.push(...s.reduce(((t,i)=>{let n=r.get(i);return n&&t.push([e,n]),t}),[]))};for(let e of i.keys())s(e);let a=n.filter((t=>t[1]===e)),o=0;for(;a.length>o;){let e=a.length,t=new Set(a.map((e=>e[0])));for(let e of t)n.filter((t=>t[1]===e)).forEach((e=>{a.includes(e)||a.push(e)}));o=e}let l=t.topologicSort(a),h=l.findIndex((t=>t===e));return-1===h?[e]:l.slice(0,h+1)},e.collectStartupPlugins=function(e,t){let i=new Set;for(let t of e.keys())!0===e.get(t).autoStart&&i.add(t);if(t.startPlugins)for(let e of t.startPlugins)i.add(e);if(t.ignorePlugins)for(let e of t.ignorePlugins)i.delete(e);return Array.from(i)}}(i||(i={})),e.Random=void 0,(e.Random||(e.Random={})).getRandomValues=(()=>{let e="undefined"!=typeof window&&(window.crypto||window.msCrypto)||null;return e&&"function"==typeof e.getRandomValues?function(t){return e.getRandomValues(t)}:r})(),e.UUID=void 0,(e.UUID||(e.UUID={})).uuid4=function(e){let t=new Uint8Array(16),i=new Array(256);for(let e=0;e<16;++e)i[e]="0"+e.toString(16);for(let e=16;e<256;++e)i[e]=e.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],i[t[0]]+i[t[1]]+i[t[2]]+i[t[3]]+"-"+i[t[4]]+i[t[5]]+"-"+i[t[6]]+i[t[7]]+"-"+i[t[8]]+i[t[9]]+"-"+i[t[10]]+i[t[11]]+i[t[12]]+i[t[13]]+i[t[14]]+i[t[15]]}}(e.Random.getRandomValues),e.MimeData=class{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(e){return-1!==this._types.indexOf(e)}getData(e){let t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0}setData(e,t){this.clearData(e),this._types.push(e),this._values.push(t)}clearData(e){let t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))}clear(){this._types.length=0,this._values.length=0}},e.PluginRegistry=class{constructor(e={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=new Map,this._services=new Map,e.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=e.validatePlugin)}get application(){return this._application}set application(e){if(null!==this._application)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=e}get deferredPlugins(){return Array.from(this._plugins).filter((([e,t])=>"defer"===t.autoStart)).map((([e,t])=>e))}getPluginDescription(e){var t,i;return null!==(i=null===(t=this._plugins.get(e))||void 0===t?void 0:t.description)&&void 0!==i?i:""}hasPlugin(e){return this._plugins.has(e)}isPluginActivated(e){var t,i;return null!==(i=null===(t=this._plugins.get(e))||void 0===t?void 0:t.activated)&&void 0!==i&&i}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(e){if(this._plugins.has(e.id))throw new TypeError(`Plugin '${e.id}' is already registered.`);if(!this._validatePlugin(e))throw new Error(`Plugin '${e.id}' is not valid.`);let t=i.createPluginData(e);i.ensureNoCycle(t,this._plugins,this._services),t.provides&&this._services.set(t.provides,t.id),this._plugins.set(t.id,t)}registerPlugins(e){for(let t of e)this.registerPlugin(t)}deregisterPlugin(e,t){let i=this._plugins.get(e);if(i){if(i.activated&&!t)throw new Error(`Plugin '${e}' is still active.`);this._plugins.delete(e)}}async activatePlugin(e){let t=this._plugins.get(e);if(!t)throw new ReferenceError(`Plugin '${e}' is not registered.`);if(t.activated)return;if(t.promise)return t.promise;let i=t.requires.map((e=>this.resolveRequiredService(e))),r=t.optional.map((e=>this.resolveOptionalService(e)));return t.promise=Promise.all([...i,...r]).then((e=>t.activate.apply(void 0,[this.application,...e]))).then((e=>{t.service=e,t.activated=!0,t.promise=null})).catch((e=>{throw t.promise=null,e})),t.promise}async activatePlugins(e,t={}){switch(e){case"defer":{let e=this.deferredPlugins.filter((e=>this._plugins.get(e).autoStart)).map((e=>this.activatePlugin(e)));await Promise.all(e);break}case"startUp":{let e=i.collectStartupPlugins(this._plugins,t).map((async e=>{try{return await this.activatePlugin(e)}catch(t){console.error(`Plugin '${e}' failed to activate.`,t)}}));await Promise.all(e);break}}}async deactivatePlugin(e){let t=this._plugins.get(e);if(!t)throw new ReferenceError(`Plugin '${e}' is not registered.`);if(!t.activated)return[];if(!t.deactivate)throw new TypeError(`Plugin '${e}'#deactivate() method missing`);let r=i.findDependents(e,this._plugins,this._services),n=r.map((e=>this._plugins.get(e)));for(let t of n)if(!t.deactivate)throw new TypeError(`Plugin ${t.id}#deactivate() method missing (depends on ${e})`);for(let e of n){let t=[...e.requires,...e.optional].map((e=>{let t=this._services.get(e);return t?this._plugins.get(t).service:null}));await e.deactivate(this.application,...t),e.service=null,e.activated=!1}return r.pop(),r}async resolveRequiredService(e){let t=this._services.get(e);if(!t)throw new TypeError(`No provider for: ${e.name}.`);let i=this._plugins.get(t);return i.activated||await this.activatePlugin(t),i.service}async resolveOptionalService(e){let t=this._services.get(e);if(!t)return null;let i=this._plugins.get(t);if(!i.activated)try{await this.activatePlugin(t)}catch(e){return console.error(e),null}return i.service}},e.PromiseDelegate=class{constructor(){this.promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}resolve(e){(0,this._resolve)(e)}reject(e){(0,this._reject)(e)}},e.Token=class{constructor(e,t){this.name=e,this.description=null!=t?t:"",this._tokenStructuralPropertyT=null}}},"object"==typeof e&&void 0!==t?n(e,d()):"function"==typeof define&&i.amdO?define(["exports","@lumino/algorithm"],n):n((r="undefined"!=typeof globalThis?globalThis:r||self).lumino_coreutils={},r.lumino_algorithm)})),c=h((()=>{})),p={};((e,t)=>{for(var i in t)n(e,i,{get:t[i],enumerable:!0})})(p,{BLOCK_SIZE:()=>_,ContentsAPI:()=>E,DRIVE_SEPARATOR:()=>g,DriveFS:()=>R,DriveFSEmscriptenNodeOps:()=>b,DriveFSEmscriptenStreamOps:()=>P,ServiceWorkerContentsAPI:()=>M});var m,g,_,y,v,w,P,b,E,M,R,S=h((()=>{var e,t,i;e=f(),i=null!=e?r(o(e)):{},m=((e,t,i,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of a(t))!l.call(e,i)&&void 0!==i&&n(e,i,{get:()=>t[i],enumerable:!(r=s(t,i))||r.enumerable});return e})(!t&&e&&e.__esModule?i:n(i,"default",{value:e,enumerable:!0}),e),c(),g=":",_=4096,y=new TextEncoder,v=new TextDecoder("utf-8"),w={0:!1,1:!0,2:!0,64:!0,65:!0,66:!0,129:!0,193:!0,514:!0,577:!0,578:!0,705:!0,706:!0,1024:!0,1025:!0,1026:!0,1089:!0,1090:!0,1153:!0,1154:!0,1217:!0,1218:!0,4096:!0,4098:!0},P=class{constructor(e){this.fs=e}open(e){var t;let i=this.fs.realPath(e.node);if(this.fs.FS.isFile(e.node.mode))try{let t=this.fs.API.get(i);e.file=t}catch{let r=null!==(t=e.flags)&&void 0!==t?t:e.shared.flags,n="string"==typeof r?parseInt(r,10):r;n&=8191;let s=!0;if(n in w&&(s=w[n]),!s)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.ENOENT);{e.node=this.fs.node_ops.mknod(e.node.parent,e.node.name,e.node.mode,0);let t=this.fs.API.get(i);e.file=t}}}close(e){var t;if(!this.fs.FS.isFile(e.node.mode)||!e.file)return;let i=this.fs.realPath(e.node),r=null!==(t=e.flags)&&void 0!==t?t:e.shared.flags,n="string"==typeof r?parseInt(r,10):r;n&=8191;let s=!0;n in w&&(s=w[n]),s&&this.fs.API.put(i,e.file),e.file=void 0}read(e,t,i,r,n){if(r<=0||void 0===e.file||n>=(e.file.data.length||0))return 0;let s=Math.min(e.file.data.length-n,r);return t.set(e.file.data.subarray(n,n+s),i),s}write(e,t,i,r,n){var s;if(r<=0||void 0===e.file)return 0;let a=Date.now();if(e.node.timestamp=a,e.node.atime=a,e.node.mtime=a,e.node.ctime=a,n+r>((null===(s=e.file)||void 0===s?void 0:s.data.length)||0)){let t=e.file.data?e.file.data:new Uint8Array;e.file.data=new Uint8Array(n+r),e.file.data.set(t)}return e.file.data.set(t.subarray(i,i+r),n),r}llseek(e,t,i){var r;let n=t;if(1===i)n+=null!==(r=e.position)&&void 0!==r?r:e.shared.position;else if(2===i&&this.fs.FS.isFile(e.node.mode)){if(void 0===e.file)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM);n+=e.file.data.length}if(n<0)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EINVAL);return n}},b=class{constructor(e){this.node=e=>"node"in e?e.node:e,this.getattr=e=>{let t=this.node(e);return{...this.fs.API.getattr(this.fs.realPath(t)),mode:t.mode,ino:t.id}},this.setattr=(e,t)=>{let i=this.node(e);for(let[e,r]of Object.entries(t))switch(e){case"mode":i.mode=r;break;case"timestamp":i.timestamp=r;break;case"atime":i.atime=r;break;case"mtime":i.mtime=r;break;case"ctime":i.ctime=r;break;case"size":{let e=r,t=this.fs.realPath(i);if(this.fs.FS.isFile(i.mode)&&e>=0){let i;try{i=this.fs.API.get(t)}catch{break}let r=i.data?i.data:new Uint8Array;e!==r.length&&(e<r.length?i.data=i.data.slice(0,e):(i.data=new Uint8Array(e),i.data.set(r)),this.fs.API.put(t,i))}else console.warn("setattr size of",e,"on",i,"not yet implemented");break}case"dontFollow":break;default:console.warn("setattr",e,"of",r,"on",i,"not yet implemented")}},this.lookup=(e,t)=>{let i=this.node(e),r=this.fs.PATH.join2(this.fs.realPath(i),t),n=this.fs.API.lookup(r);if(!n.ok)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.ENOENT);return this.fs.createNode(i,t,n.mode,0)},this.mknod=(e,t,i,r)=>{let n=this.node(e),s=this.fs.PATH.join2(this.fs.realPath(n),t);return this.fs.API.mknod(s,i),this.fs.createNode(n,t,i,r)},this.rename=(e,t,i)=>{let r=this.node(e),n=this.node(t);this.fs.API.rename(r.parent?this.fs.PATH.join2(this.fs.realPath(r.parent),r.name):r.name,this.fs.PATH.join2(this.fs.realPath(n),i)),r.name=i,r.parent=n},this.unlink=(e,t)=>this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(e)),t)),this.rmdir=(e,t)=>this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(e)),t)),this.readdir=e=>this.fs.API.readdir(this.fs.realPath(this.node(e))),this.symlink=(e,t,i)=>{throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM)},this.readlink=e=>{throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EINVAL)},this.fs=e}},E=class{constructor(e){this._driveName=e.driveName,this._mountpoint=e.mountpoint,this.FS=e.FS,this.ERRNO_CODES=e.ERRNO_CODES}lookup(e){return this.request({method:"lookup",path:this.normalizePath(e)})}getmode(e){return this.request({method:"getmode",path:this.normalizePath(e)})}mknod(e,t){return this.request({method:"mknod",path:this.normalizePath(e),data:{mode:t}})}rename(e,t){return this.request({method:"rename",path:this.normalizePath(e),data:{newPath:this.normalizePath(t)}})}readdir(e){let t=this.request({method:"readdir",path:this.normalizePath(e)});return t.push("."),t.push(".."),t}rmdir(e){return this.request({method:"rmdir",path:this.normalizePath(e)})}get(e){let t=this.request({method:"get",path:this.normalizePath(e)});if(!t)throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT);let i=t.content,r=t.format;switch(r){case"json":case"text":return{data:y.encode(i),format:r};case"base64":{let e=atob(i),t=e.length,n=new Uint8Array(t);for(let i=0;i<t;i++)n[i]=e.charCodeAt(i);return{data:n,format:r}}default:throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT)}}put(e,t){switch(t.format){case"json":case"text":return this.request({method:"put",path:this.normalizePath(e),data:{format:t.format,data:v.decode(t.data)}});case"base64":{let i="";for(let e=0;e<t.data.byteLength;e++)i+=String.fromCharCode(t.data[e]);return this.request({method:"put",path:this.normalizePath(e),data:{format:t.format,data:btoa(i)}})}}}getattr(e){let t=this.request({method:"getattr",path:this.normalizePath(e)}),i=new Date(0);return t.atime=t.atime?new Date(t.atime):i,t.mtime=t.mtime?new Date(t.mtime):i,t.ctime=t.ctime?new Date(t.ctime):i,t.size=t.size||0,t}normalizePath(e){return e.startsWith(this._mountpoint)&&(e=e.slice(this._mountpoint.length)),this._driveName&&(e=`${this._driveName}${g}${e}`),e}},M=class extends E{constructor(e){super(e),this._baseUrl=e.baseUrl,this._browsingContextId=e.browsingContextId||""}request(e){let t=new XMLHttpRequest;t.open("POST",encodeURI(this.endpoint),!1);let i=m.UUID.uuid4(),r={data:{...e,requestId:i},browsingContextId:this._browsingContextId,requestId:i};try{t.send(JSON.stringify(r))}catch(e){console.error(e)}if(t.status>=400)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return JSON.parse(t.responseText)}get endpoint(){return`${this._baseUrl}api/drive`}},R=class{constructor(e){this.FS=e.FS,this.PATH=e.PATH,this.ERRNO_CODES=e.ERRNO_CODES,this.API=this.createAPI(e),this.driveName=e.driveName,this.node_ops=new b(this),this.stream_ops=new P(this)}createAPI(e){if(!e.browsingContextId||!e.baseUrl)throw new Error("Cannot create service-worker API without current browsingContextId");return new M(e)}mount(e){return this.createNode(null,e.mountpoint,16895,0)}createNode(e,t,i,r){let n=this.FS;if(!n.isDir(i)&&!n.isFile(i))throw new n.ErrnoError(this.ERRNO_CODES.EINVAL);let s=n.createNode(e,t,i,r);return s.node_ops=this.node_ops,s.stream_ops=this.stream_ops,s}getMode(e){return this.API.getmode(e)}realPath(e){let t=[],i=e;for(t.push(i.name);i.parent!==i;)i=i.parent,t.push(i.name);return t.reverse(),this.PATH.join.apply(null,t)}}})),x="function",O="64e10b34-2bf7-4616-9668-f99de5aa046e",{isArray:k}=Array,{SharedArrayBuffer:A,window:I}=globalThis,{notify:N,wait:D,waitAsync:T}=Atomics,C=null;T||(T=e=>({value:new Promise((t=>{let i=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");i.onmessage=t,i.postMessage(e)}))}));try{new A(4)}catch{A=ArrayBuffer;let e=new WeakMap;if(I){let t=new Map,{prototype:{postMessage:i}}=Worker,r=e=>{var i;let r=null==(i=e.data)?void 0:i[O];if(!k(r)){e.stopImmediatePropagation();let{id:i,sb:n}=r;t.get(i)(n)}};C=function(t,...n){let s=null==t?void 0:t[O];if(k(s)){let[t,i]=s;e.set(i,t),this.addEventListener("message",r)}return i.call(this,t,...n)},T=i=>({value:new Promise((r=>{t.set(e.get(i),r)})).then((r=>{t.delete(e.get(i)),e.delete(i);for(let e=0;e<r.length;e++)i[e]=r[e];return"ok"}))})}else{let t=(e,t)=>({[O]:{id:e,sb:t}});N=i=>{postMessage(t(e.get(i),i))},addEventListener("message",(t=>{var i;let r=null==(i=t.data)?void 0:i[O];if(k(r)){let[t,i]=r;e.set(i,t)}}))}}var{Int32Array:F,Map:j,Uint16Array:U}=globalThis,{BYTES_PER_ELEMENT:q}=F,{BYTES_PER_ELEMENT:z}=U,L=new WeakSet,$=new WeakMap,W={value:{then:e=>e()}},H=0,V=(e,{parse:t=JSON.parse,stringify:i=JSON.stringify,transform:r,interrupt:n}=JSON)=>{if(!$.has(e)){let s=C||e.postMessage,a=(t,...i)=>s.call(e,{[O]:i},{transfer:t}),o=typeof n===x?n:null==n?void 0:n.handler,l=(null==n?void 0:n.delay)||42,h=new TextDecoder("utf-16"),u=(e,t)=>e?T(t,0):(o?((e,t,i)=>{for(;"timed-out"===D(e,0,0,t);)i()})(t,l,o):D(t,0),W),d=!1;$.set(e,new Proxy(new j,{has:(e,t)=>"string"==typeof t&&!t.startsWith("_"),get:(i,n)=>"then"===n?null:(...i)=>{let s=H++,o=new F(new A(2*q)),l=[];L.has(i.at(-1)||l)&&L.delete(l=i.pop()),a(l,s,o,n,r?i.map(r):i);let f=e!==globalThis,c=0;return d&&f&&(c=setTimeout(console.warn,1e3,`ðŸ’€ðŸ”’ - Possible deadlock if proxy.${n}(...args) is awaited`)),u(f,o).value.then((()=>{clearTimeout(c);let e=o[1];if(!e)return;let i=z*e;return o=new F(new A(i+i%q)),a([],s,o),u(f,o).value.then((()=>t(h.decode(new U(o.buffer).slice(0,e)))))}))},set(t,n,s){let a=typeof s;if(a!==x)throw new Error(`Unable to assign ${n} as ${a}`);if(!t.size){let n=new j;e.addEventListener("message",(async e=>{var s;let a=null==(s=e.data)?void 0:s[O];if(k(a)){e.stopImmediatePropagation();let s,[o,l,...h]=a;if(h.length){let[e,a]=h;if(t.has(e)){d=!0;try{let s=await t.get(e)(...a);if(void 0!==s){let e=i(r?r(s):s);n.set(o,e),l[1]=e.length}}catch(e){s=e}finally{d=!1}}else s=new Error(`Unsupported action: ${e}`);l[0]=1}else{let e=n.get(o);n.delete(o);for(let t=new U(l.buffer),i=0;i<e.length;i++)t[i]=e.charCodeAt(i)}if(N(l,0),s)throw s}}))}return!!t.set(n,s)}}))}return $.get(e)};V.transfer=(...e)=>(L.add(e),e);var J=V;S();var B=class{constructor(){this._options=null,this._initializer=null,this._pyodide=null,this._localPath="",this._driveName="",this._driveFS=null,this._sendWorkerMessage=()=>{},this._logMessage=()=>{},this._initialized=new Promise(((e,t)=>{this._initializer={resolve:e,reject:t}}))}async initialize(e){var t;if(this._options=e,e.location.includes(":")){let t=e.location.split(":");this._driveName=t[0],this._localPath=t[1]}else this._driveName="",this._localPath=e.location;await this.initRuntime(e),await this.initFilesystem(e),await this.initPackageManager(e),await this.initKernel(e),await this.initGlobals(e),null==(t=this._initializer)||t.resolve()}async initRuntime(e){let t,{pyodideUrl:r,indexUrl:n}=e;r.endsWith(".mjs")?t=(await i(476)(r)).loadPyodide:(importScripts(r),t=self.loadPyodide),this._pyodide=await t({indexURL:n,stdout:e=>{console.log(e),this._logMessage({type:"text",level:"info",data:e})},stderr:e=>{console.error(e),this._logMessage({type:"text",level:"critical",data:e})},...e.loadPyodideOptions}),this._pyodide._api.on_fatal=async e=>{let t="";t="Exit"===e.name?"Pyodide has exited and can no longer be used.":`Pyodide has suffered a fatal error. Please report this to the Pyodide maintainers.\nThe cause of the error was: ${e.name}\n${e.message}\nStack trace:\n${e.stack}`,this._logMessage({type:"text",level:"critical",data:t})}}async initPackageManager(e){if(!this._options)throw new Error("Uninitialized");let{pipliteWheelUrl:t,disablePyPIFallback:i,pipliteUrls:r,loadPyodideOptions:n}=this._options,s=(n||{}).packages||[];s.includes("micropip")||await this._pyodide.loadPackage(["micropip"]),s.includes("piplite")||await this._pyodide.runPythonAsync(`\n      import micropip\n      await micropip.install('${t}', keep_going=True)\n    `),await this._pyodide.runPythonAsync(`\n      import piplite.piplite\n      piplite.piplite._PIPLITE_DISABLE_PYPI = ${i?"True":"False"}\n      piplite.piplite._PIPLITE_URLS = ${JSON.stringify(r)}\n    `)}async initKernel(e){let t=(e.loadPyodideOptions||{}).packages||[],i=["sqlite3","ipykernel","comm","pyodide_kernel","jedi","ipython"],r=[];for(let e of i)t.includes(e)||r.push(`await piplite.install('${e}', keep_going=True)`);r.push("import pyodide_kernel"),e.mountDrive&&this._localPath&&r.push("import os",`os.chdir("${this._localPath}")`),await this._pyodide.runPythonAsync(r.join("\n"))}async initGlobals(e){let{globals:t}=this._pyodide;this._kernel=t.get("pyodide_kernel").kernel_instance.copy(),this._stdout_stream=t.get("pyodide_kernel").stdout_stream.copy(),this._stderr_stream=t.get("pyodide_kernel").stderr_stream.copy(),this._interpreter=this._kernel.interpreter.copy(),this._interpreter.send_comm=this.sendComm.bind(this)}async initFilesystem(e){if(e.mountDrive){let t="/drive",{FS:i,PATH:r,ERRNO_CODES:n}=this._pyodide,{baseUrl:s}=e,{DriveFS:a}=await Promise.resolve().then((()=>(S(),p))),o=new a({FS:i,PATH:r,ERRNO_CODES:n,baseUrl:s,driveName:this._driveName,mountpoint:t,browsingContextId:this._browsingContextId});i.mkdirTree(t),i.mount(o,{},t),i.chdir(t),this._driveFS=o}}mapToObject(e){let t=e instanceof Array?[]:{},i=e instanceof Map?e.entries():Object.entries(e);for(let[e,r]of i)t[e]=r instanceof Map||r instanceof Array?this.mapToObject(r):r;return t}formatResult(e){if(!(e instanceof this._pyodide.ffi.PyProxy))return e;let t=e.toJs();return this.mapToObject(t)}registerWorkerMessageCallback(e){this._sendWorkerMessage=e}registerLogMessageCallback(e){this._logMessage=e}async setup(e){await this._initialized,this._kernel._parent_header=this._pyodide.toPy(e)}async execute(e,t){await this.setup(t);let i=(e,t)=>{let i={name:this.formatResult(e),text:this.formatResult(t)};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:i,type:"stream"})};this._stdout_stream.publish_stream_callback=i,this._stderr_stream.publish_stream_callback=i,this._interpreter.display_pub.clear_output_callback=e=>{let t={wait:this.formatResult(e)};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:t,type:"clear_output"})},this._interpreter.display_pub.display_data_callback=(e,t,i)=>{let r={data:this.formatResult(e),metadata:this.formatResult(t),transient:this.formatResult(i)};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:r,type:"display_data"})},this._interpreter.display_pub.update_display_data_callback=(e,t,i)=>{let r={data:this.formatResult(e),metadata:this.formatResult(t),transient:this.formatResult(i)};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:r,type:"update_display_data"})},this._interpreter.displayhook.publish_execution_result=(e,t,i)=>{let r={execution_count:e,data:this.formatResult(t),metadata:this.formatResult(i)};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:r,type:"execute_result"})},this._interpreter.input=this.input.bind(this),this._interpreter.getpass=this.getpass.bind(this);let r=await this._kernel.run(e.code),n=this.formatResult(r);return"error"===n.status&&((e,t,i)=>{let r={ename:e,evalue:t,traceback:i};this._sendWorkerMessage({parentHeader:this.formatResult(this._kernel._parent_header).header,bundle:r,type:"execute_error"})})(n.ename,n.evalue,n.traceback),n}async complete(e,t){await this.setup(t);let i=this._kernel.complete(e.code,e.cursor_pos);return this.formatResult(i)}async inspect(e,t){await this.setup(t);let i=this._kernel.inspect(e.code,e.cursor_pos,e.detail_level);return this.formatResult(i)}async isComplete(e,t){await this.setup(t);let i=this._kernel.is_complete(e.code);return this.formatResult(i)}async commInfo(e,t){await this.setup(t);let i=this._kernel.comm_info(e.target_name);return{comms:this.formatResult(i),status:"ok"}}async commOpen(e,t){await this.setup(t);let i=this._kernel.comm_manager.comm_open(this._pyodide.toPy(null),this._pyodide.toPy(null),this._pyodide.toPy(e));return this.formatResult(i)}async commMsg(e,t){await this.setup(t);let i=this._kernel.comm_manager.comm_msg(this._pyodide.toPy(null),this._pyodide.toPy(null),this._pyodide.toPy(e));return this.formatResult(i)}async commClose(e,t){await this.setup(t);let i=this._kernel.comm_manager.comm_close(this._pyodide.toPy(null),this._pyodide.toPy(null),this._pyodide.toPy(e));return this.formatResult(i)}async inputReply(e,t){}getpass(e){return e=void 0===e?"":e,this.sendInputRequest(e,!0)}input(e){return e=void 0===e?"":e,this.sendInputRequest(e,!1)}async sendComm(e,t,i,r,n){this._sendWorkerMessage({type:e,content:this.formatResult(t),metadata:this.formatResult(i),ident:this.formatResult(r),buffers:this.formatResult(n),parentHeader:this.formatResult(this._kernel._parent_header).header})}},K=J(self),Y=class extends E{request(e){return K.processDriveRequest(e)}},G=class extends R{createAPI(e){return new Y(e)}},X=new class extends B{async initFilesystem(e){if(e.mountDrive){let t="/drive",{FS:i,PATH:r,ERRNO_CODES:n}=this._pyodide,{baseUrl:s}=e,a=new G({FS:i,PATH:r,ERRNO_CODES:n,baseUrl:s,driveName:this._driveName,mountpoint:t});i.mkdirTree(t),i.mount(a,{},t),i.chdir(t),this._driveFS=a}}sendInputRequest(e,t){return K.processStdinRequest({prompt:e,password:t})}},Z=K.processWorkerMessage.bind(K);X.registerWorkerMessageCallback(Z);var Q=K.processLogMessage.bind(K);X.registerLogMessageCallback(Q),K.initialize=X.initialize.bind(X),K.execute=X.execute.bind(X),K.complete=X.complete.bind(X),K.inspect=X.inspect.bind(X),K.isComplete=X.isComplete.bind(X),K.commInfo=X.commInfo.bind(X),K.commOpen=X.commOpen.bind(X),K.commMsg=X.commMsg.bind(X),K.commClose=X.commClose.bind(X),K.inputReply=X.inputReply.bind(X)},476:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=476,e.exports=t}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}i.m=e,i.c=t,i.amdO={},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{i.S={};var e={},t={};i.I=(r,n)=>{n||(n=[]);var s=t[r];if(s||(s=t[r]={}),!(n.indexOf(s)>=0)){if(n.push(s),e[r])return e[r];i.o(i.S,r)||(i.S[r]={}),i.S[r];var a=[];return e[r]=a.length?Promise.all(a).then((()=>e[r]=1)):1}}})(),i(620)})();
//# sourceMappingURL=620.9c1c106a2837357b6ea1.js.map?v=9c1c106a2837357b6ea1